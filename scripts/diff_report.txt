=== 文件差异详细报告 ===
对比目录: 项目根目录 vs scripts/元/人机的玩笑
共 235 个文件有差异
================================================================================


================================================================================
文件: all-units.template
================================================================================

--- scripts/元/人机的玩笑/all-units.template
+++ all-units.template
@@ -1,3 +1,4 @@
+#通用模块
 [全局资源_AI阶段]
 显示名称:阶段
 显示颜色: #42F2DC
@@ -16,6 +17,7 @@
 [全局资源_时间]
 显示名称:游戏时间
 显示颜色: #FFFFFF
+#FF0000
 [全局资源_AI难度]
 显示名称:ai难度
 显示颜色: #DA2D00

================================================================================
文件: 作战单位\地面模块.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\地面模块.ini
+++ 作战单位\地面模块.ini
@@ -1,5 +1,8 @@
 [核心]
 禁止加载:真
+自动触发间隔:2s
+自动触发检查率:每8帧
+#––「通用」––#
 [全局资源_AI阶段]
 显示名称:阶段
 显示颜色: #42F2DC
@@ -11,75 +14,19 @@
 [全局资源_时间]
 显示名称:游戏时间
 显示颜色: #FFFFFF
+#––「设定」––#
 [资源_攻击范围]
-隐藏:真
-[资源_对地范围]
 隐藏:真
 [隐藏行动_攻击范围]
 自动触发事件:创建
 用逻辑设置资源:攻击范围=${攻击.攻击距离}
 临时标签添加:安全
-[隐藏行动_作战范围]
-自动触发:真
-用逻辑设置资源:对地范围=选择(敌人有此单位数量(需标签="火炮塔II", 范围内=480)>0, 460, 选择(敌人有此单位数量(需标签="对地390", 范围内=420)>0, 390, 选择(敌人有此单位数量(需标签="火炮塔I", 范围内=365)>0, 350, 选择(敌人有此单位数量(需标签="机枪塔II", 范围内=335)>0, 320, 选择(敌人有此单位数量(需标签="对地310", 范围内=325)>0, 310, 选择(敌人有此单位数量(需标签="对地290", 范围内=310)>0, 290, 选择(敌人有此单位数量(需标签="对地290", 范围内=290)>0, 280, 选择(敌人有此单位数量(需标签="闪电塔II", 范围内=265)>0, 250, 选择(敌人有此单位数量(需标签="对地240", 范围内=255)>0, 240, 选择(敌人有此单位数量(需标签="对地210", 范围内=220)+敌人有此单位数量(需标签="闪电塔I", 范围内=220)>0, 210, 选择(敌人有此单位数量(需标签="对地190", 范围内=200)>0, 190, 选择(敌人有此单位数量(需标签="机枪塔I", 范围内=195)>0, 185, 选择(敌人有此单位数量(需标签="对地170", 范围内=180)>0, 170, 选择(敌人有此单位数量(需标签="炮塔T0", 范围内=170)>0, 165, 选择(敌人有此单位数量(需标签="对地", 范围内=165)>0, 160, 0)))))))))))))))
-[隐藏行动_对地求救]
-临时标签删除:安全
-临时标签添加:对地求救
-[隐藏行动_对地解除]
-自动触发:真
-需要条件:if (自身资源.攻击范围)>(自身资源.对地范围) and 自身有标签(包含标签="对地求救")
-临时标签删除:对地求救
-[隐藏行动_对空求救]
-自动触发:真
-需要条件:if 自身有标签(包含标签="安全") and 位距(self.攻击中, self)<(自身资源.攻击范围-5) and 自身有标签(包含标签="对地") and 攻击中.tags(包含标签='对地') and not 自身有标签(包含标签="已锁定") and 自身在攻击 and 自身有标签(包含标签="安全") and 自身属于AI控制
-临时标签删除:安全
-临时标签添加:对空求救
-[隐藏行动_对空解除]
-自动触发:真
-需要条件:if (队伍中此单位数量(需标签="拦截", 范围内=320)+队伍中此单位数量(需标签="对空", 范围内=320)+队伍中此单位数量(需标签="防空", 范围内=320))>=(敌人有此单位数量(需标签="空对地", 范围内=400)*0.3) and 自身有标签(包含标签="对空求救")
-临时标签删除:对空求救
-[隐藏行动_安全]
-自动触发:真
-需要条件:if not 自身有标签(包含标签="对地求救") and not 自身有标签(包含标签="对空求救") and 自身资源.逃跑冷却>=0 and not 自身有标签(包含标签="安全") and 自身属于AI控制 or not 敌人有此单位数量(范围内=480, 超过=0) and 自身资源.逃跑冷却>=0 and not 自身有标签(包含标签="安全") and 自身属于AI控制
-清除所有路径点:真
-用逻辑设置资源:逃跑冷却:-4
-临时标签添加:安全
-[资源_逃跑冷却]
-显示名称:逃跑
-[隐藏行动_减少冷却]
-自动触发:真
-需要条件:if not 自身有标签(包含标签="安全") and 自身资源.逃跑冷却<0 and 自身自定义计时器(指定时间后=1) and 自身属于AI控制
-增加资源:逃跑冷却:1
-[隐藏行动_逃跑]
-清除所有路径点:真
-添加路径点动作类型:移动
-添加路径点来自参考:创建标记(x=最后伤害源.x, y=最后伤害源.y, dir=间距(self, self.最后伤害源)).获取相对偏移(y=-400)
-[隐藏行动_逃跑2]
-清除所有路径点:真
-添加路径点动作类型:靠近目标
-添加路径点检索标签:修复
-添加路径点路径可达:真
-添加路径点靠近队伍:盟友
-添加路径点失败触发:去修复
-[隐藏行动_追不上]
-临时标签删除:安全
-[隐藏行动_控距]
-自动触发:真
-需要条件:if 自身资源.攻击范围>=190 and not 自身有标签(包含标签="控距") and 位距(self.攻击中, self)<(自身资源.攻击范围-5) and 自身有标签(包含标签="对地") and 攻击中.tags(包含标签='对地') and not 自身有标签(包含标签="已锁定") and 自身在攻击 and 自身有标签(包含标签="安全") and 自身属于AI控制
-临时标签添加:控距
-清除所有路径点:真
-添加路径点动作类型:移动
-添加路径点来自参考:创建标记(x=攻击中.x, y=攻击中.y, dir=间距(self, self.攻击中)).获取相对偏移(y=-400)
-[隐藏行动_控距停止]
-自动触发:真
-需要条件:if 位距(self.攻击中, self)>=(自身资源.攻击范围) and 自身在攻击 and 自身有标签(包含标签="控距") and 自身属于AI控制 and 自身有活动的路径点 and 自身有标签(包含标签="安全") or not 自身在攻击 and 自身有标签(包含标签="控距") and 自身属于AI控制 and 自身有活动的路径点 and 自身有标签(包含标签="安全")
-临时标签删除:控距
-清除所有路径点:真
+#––「赋予标签」––#
 [隐藏行动_无防空保护]
 自动触发:真
-需要条件:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))<=0 and not 自身有标签(包含标签="水")
+需要条件:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))<=0 and not 自身有标签(包含标签="水") and not 自身有标签(包含标签="无防空保护")
 临时标签添加:无防空保护
 [隐藏行动_有防空保护]
 自动触发:真
-需要条件:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))>0
+需要条件:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))>0 and 自身有标签(包含标签="无防空保护")
 临时标签删除:无防空保护

================================================================================
文件: 作战单位\战力模块.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\战力模块.ini
+++ 作战单位\战力模块.ini
@@ -1,5 +1,6 @@
 [核心]
 禁止加载:真
+#––「资源」––#
 [资源_伤害量]
 隐藏:真
 [资源_对空伤害量]
@@ -8,6 +9,7 @@
 显示名称:战力
 [资源_对空战力]
 显示名称:对空战力
+#––「战力设定」––#
 [隐藏行动_战力修正]
 自动触发:真
 需要条件:if 自身自定义计时器(指定时间后=1)

================================================================================
文件: 作战单位\海军单位\all-units.template
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\all-units.template
+++ 作战单位\海军单位\all-units.template
@@ -4,6 +4,7 @@
 ROOT:/作战单位/地面模块.ini, 
 ROOT:/作战单位/海军模块.ini
 """
+#––「设定」––#
 [隐藏行动_攻击范围]
 也执行动作:海军
 [隐藏行动_海军]
@@ -13,35 +14,12 @@
 自动触发:真
 需要条件:if 队伍中此单位数量(需标签="海军区块", 范围内=690)==0
 产生单位:海军区块
-[隐藏行动_海军对地求救]
-自动触发:真
-也执行动作:对地求救
-也执行队列或需执行条件:if 自身有标签(包含标签="安全") and 敌人有此单位数量(需标签="对地", 范围内=480, 超过=0)
-需要条件:if 自身资源.攻击范围>=250 and (自身资源.攻击范围)<=(自身资源.对地范围) and 队伍中此单位数量(需标签="激光防御塔", 范围内=95, 少于=1) or 队伍中此单位数量(需标签="开始进攻", 范围内=500, 少于=1) and 自身资源.攻击范围<250 and (自身资源.攻击范围)<=(自身资源.对地范围) or not 自身有标签(包含标签="对地") and 自身有标签(包含标签="对空")
-[隐藏行动_对水求救]
-自动触发:真
-需要条件:if 自身有标签(包含标签="安全") and (队伍中此单位数量(需标签="对水", 范围内=300)+队伍中此单位数量(需标签="水", 范围内=300))<(敌人有此单位数量(需标签="水", 范围内=300)) and 自身有标签(包含标签="海")
-临时标签删除:安全
-[隐藏行动_海军逃跑]
-自动触发:真
-也执行动作:逃跑
-也执行队列或需执行条件:if not 自身有标签(包含标签="安全") and not 自身有标签(包含标签="已锁定") and 自身属于AI控制 and not 自身有活动的路径点(type='靠近目标') and 自身受到伤害(指定时间内=3)
-需要条件:if 自身最大血量<=1200 or 自身血量<=自身最大血量*0.5 or 队伍中此单位数量(需标签="开始进攻", 少于=1)
-[隐藏行动_去修复]
-添加路径点动作类型:靠近目标
-添加路径点路径可达:假
-添加路径点检索标签:海厂
-添加路径点靠近队伍:己方
-[隐藏行动_海军追不上]
-自动触发:真
-也执行动作:追不上
-也执行队列或需执行条件:if 自身最大血量<=1200 or 自身血量<=自身最大血量*0.5
-需要条件:if 位距(self.活动路径点目标, self)>(自身资源.攻击范围) and (自身资源.攻击范围)<(活动路径点目标.resource.攻击范围) and 自身有活动的路径点(type='攻击') and 活动路径点目标.tags(包含标签='对地') and not 自身有标签(包含标签="已定制") and 队伍中此单位数量(需标签="开始进攻", 范围内=500, 少于=1) and 自身属于AI控制
+#––「攻击模块」––#
 [隐藏行动_海军攻击]
 自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 范围内=310, 超过=0) or 敌人有此单位数量(需标签="激光防御塔", 范围内=310, 超过=0) or 敌人有此单位数量(需标签="对地", 范围内=310, 超过=0)
 也执行动作:攻击优先级
 也执行队列或需执行条件:if 自身有标签(包含标签="安全") and not 自身有标签(包含标签="控距") and not 自身有标签(包含标签="已定制") and 自身有标签(包含标签="对地") and 自身在攻击 and 自身属于AI控制 and 自身自定义计时器(指定时间后=1) and 队伍中此单位数量(需标签="聚集", 范围内=500, 超过=0)
-需要条件:if 敌人有此单位数量(需标签="建造", 范围内=310, 超过=0) or 敌人有此单位数量(需标签="激光防御塔", 范围内=310, 超过=0) or 敌人有此单位数量(需标签="对地", 范围内=310, 超过=0)
 [隐藏行动_攻击优先级]
 重置自定义计时器:真
 添加路径点路径可达:真

================================================================================
文件: 作战单位\海军单位\导弹舰\导弹舰.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\导弹舰\导弹舰.ini
+++ 作战单位\海军单位\导弹舰\导弹舰.ini
@@ -14,7 +14,7 @@
 运输占用位置:3
 能量值:1
 覆盖单位:Missileship
-tags:对地, 对空, 对水, 导弹, 海, 对地210
+tags:对地, 对空, 对水, 导弹, 海, 对地210, C1
 资源活着时借用:伤害量=-550, 对空伤害量=-550
 [攻击]
 可攻击:真

================================================================================
文件: 作战单位\海军单位\战列舰\战列舰.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\战列舰\战列舰.ini
+++ 作战单位\海军单位\战列舰\战列舰.ini
@@ -14,7 +14,7 @@
 半径:20
 运输占用位置:3
 死亡产生碎片:0
-tags:对地, 海, 战列, 对地240
+tags:对地, 海, 战列, 对地240, C4
 资源活着时借用:伤害量=-1850
 [图像]
 image:battle_ship_t2.png

================================================================================
文件: 作战单位\海军单位\机枪艇\瓜子.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\机枪艇\瓜子.ini
+++ 作战单位\海军单位\机枪艇\瓜子.ini
@@ -10,14 +10,18 @@
 界面显示内部调用:gunBoat
 覆盖单位:gunBoat
 半径:11
+#displayRadius:11
 是生物:假
+#softCollisionOnAll:3
 死亡产生碎片:0
-tags:海, 对地
+tags:海, 对地, C1
 [图像]
 总帧数:1
 image:gun_boat.png
 死亡图像:无
 炮塔图像:无
+#scaleImagesTo 20
+#scaleTurretImagesTo 9
 水波效果:真
 image_shadow:AUTO
 X轴阴影偏移:1
@@ -62,3 +66,6 @@
 倒车速度比率:0
 最大转弯速度:4.1
 转弯加速度:0.25
+#moveSlidingMode false
+#moveIgnoringBodyfalse
+#moveSlidingDir  45

================================================================================
文件: 作战单位\海军单位\水下探测器\水下探测器.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\水下探测器\水下探测器.ini
+++ 作战单位\海军单位\水下探测器\水下探测器.ini
@@ -10,6 +10,7 @@
 建造速度:0.0050
 availableInDemo:真
 半径:7
+#displayRadius: 11
 是生物:假
 tags:水
 [图像]
@@ -21,6 +22,7 @@
 image_shadow:AUTO
 X轴阴影偏移:2
 Y轴阴影偏移:2
+#splastEffect: true
 [攻击]
 可攻击:真
 可攻击空中单位:假
@@ -38,6 +40,7 @@
 y:0
 可以开火:假
 [炮塔_2]
+#torpedo
 不可见:真
 x:0
 y:4
@@ -48,6 +51,7 @@
 size:1.1
 转弯速度:15
 [抛射体_torpedo]
+#torpedo
 直接伤害:10
 效果存在时间:250
 速度:0.2

================================================================================
文件: 作战单位\海军单位\潜水艇\潜艇-水面.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\潜水艇\潜艇-水面.ini
+++ 作战单位\海军单位\潜水艇\潜艇-水面.ini
@@ -9,9 +9,10 @@
 availableInDemo:假
 显示在沙盒中:假
 半径:13
+#displayRadius: 5
 运输占用位置:3
 是生物:假
-tags:对地, 对空, 海
+tags:对地, 对空, 海, C1
 [行动_dive]
 转换成:attackSubmarine
 显示类型:action
@@ -38,6 +39,8 @@
 X轴阴影偏移:2
 Y轴阴影偏移:2
 运动效果:CUSTOM:splash
+#movementEffectReverse: CUSTOM:splash
+#movementEffectReverseFlipEffects: true
 运动效果频率:8
 [攻击]
 可攻击:真
@@ -49,6 +52,7 @@
 攻击距离:250
 攻击间隔:180
 [炮塔_1]
+#torpedo
 不可见:真
 x:10
 y:0
@@ -61,9 +65,11 @@
 开火闪光: #FFEECCCC
 抛射体:torpedo
 size:1.1
+#turnSpeed: 15
 转弯速度:0
 可攻击最大角度:181
 [抛射体_torpedo]
+#torpedo
 直接伤害:42
 效果存在时间:300
 速度:1.2
@@ -102,6 +108,7 @@
 X随机绝对速度:0.1
 Y随机绝对速度:0.1
 Y相对速度:-0.2
+#hSpeed:0.1
 Y轴相对偏移:-28
 附着在单位上:假
 绘制在单位下方:真

================================================================================
文件: 作战单位\海军单位\潜水艇\潜艇.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\潜水艇\潜艇.ini
+++ 作战单位\海军单位\潜水艇\潜艇.ini
@@ -13,6 +13,7 @@
 运输占用位置:3
 是生物:假
 tags:水
+#softCollisionOnAll: 3
 [行动_Surface]
 转换成:attackSubmarine(WATER)
 显示类型:action
@@ -48,6 +49,7 @@
 攻击距离:180
 攻击间隔:180
 [炮塔_1]
+#torpedo
 不可见:真
 x:10
 y:0
@@ -58,9 +60,11 @@
 可以攻击非接触水单位:假
 抛射体:torpedo
 size:1.1
+#turnSpeed: 15
 转弯速度:0
 可攻击最大角度:181
 [抛射体_torpedo]
+#torpedo
 直接伤害:42
 效果存在时间:300
 速度:1

================================================================================
文件: 作战单位\海军单位\航空母舰\航母.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\航空母舰\航母.ini
+++ 作战单位\海军单位\航空母舰\航母.ini
@@ -10,6 +10,7 @@
 availableInDemo:假
 覆盖单位:experiementalCarrier
 半径:53
+#softCollisionOnAll: 3
 运输占用位置:5
 是生物:假
 能量值:2
@@ -35,7 +36,7 @@
 离开旋转角度:0
 离开距离:140
 离开高度:5
-tags:对地, 对空, 对水, 海, 对地290, 中防空, 航母
+tags:对地, 对空, 对水, 海, 对地290, 中防空, 航母, C7
 资源活着时借用:伤害量=-2150
 [可建造_1]
 name:setRally, 直升机T1, 拦截机T1, 运输机T1, 武装直升机T1, 两栖喷气机T1, 轰炸机T1, 导弹飞艇T1, 重型拦截机I
@@ -52,6 +53,7 @@
 text:i:gui.actions.buildAntiNuke
 描述:i:gui.actions.buildAntiNuke.描述
 显示类型:无
+#don't want a speed up from nanoFactorySpeed
 建造速度:${ 0.0005 / core.工厂速度乘数 }
 pos:0.2
 可用:if 自身弹药包括队列(少于=12)
@@ -60,6 +62,7 @@
 锁定消息:i:gui.actions.nukesDisabled
 图标:SHARED:icon_build.png
 [行动_showAntiNukeCount]
+#infoOnly: true
 增加资源:ammo=1
 价格:ammo=1
 text:i:gui.actions.antiNukeCount
@@ -72,10 +75,12 @@
 可见性:if 自身弹药(超过=0)
 图标:SHARED:icon_nuke_stockpile.png
 [行动_showAntiNukeCountEmpty]
+#infoOnly: true
 text:i:gui.actions.antiNukeCountEmpty
 描述:i:gui.actions.antiNukeCount.descriptionEmpty
 建造速度:0s
 pos:0.1
+#displayRemainingStockpile: true
 显示类型:infoOnlyStockpile
 可用:假
 可见性:if 自身弹药(少于=1)
@@ -130,6 +135,7 @@
 开火动画:small
 开火闪光: #FFEECCCC
 抛射体:flak
+#image: SHARED:debug_marker.png
 [炮塔_rightMissilePod]
 x:-5
 y:10
@@ -137,6 +143,7 @@
 链接间隔:leftMissilePod
 预热:55
 [炮塔_torpedos]
+#torpedo
 不可见:真
 x:0
 y:0
@@ -150,6 +157,8 @@
 开火间隔:180
 限制范围:290
 [炮塔_plasma1]
+#plasma
+#turret
 x:17
 y:-4
 闲置方向:90
@@ -168,12 +177,17 @@
 后坐力大小:-1
 限制范围:250
 [炮塔_plasma2]
+#plasma
+#turret
 x:-17
 y:-4
 闲置方向:-90
 闲置方向反转:-90
 复制与:plasma1
+#linkDelayWithTurret:plasma1
+#warmup: 50
 [炮塔_laserDefence]
+#laserdefence
 x:9
 y:4
 可以开火:假
@@ -182,6 +196,7 @@
 限制范围:160
 size:0
 [炮塔_antiNuke]
+#anti-nuke turret
 x:0
 y:-20
 可以开火:假
@@ -199,7 +214,10 @@
 转弯速度:40
 资源需求:ammo=1
 开火动画:shockwave, smoke
+#shoot_flame:custom:nukeLaunch
+#onShoot_playAnimation: fireNuke
 [炮塔_repairTurret]
+#repair
 x:-16
 y:-32
 可以开火:假
@@ -208,6 +226,7 @@
 是主构建炮塔:真
 预热:30
 [抛射体_flak]
+#flak
 效果存在时间:340
 速度:20
 绘制大小:0.9
@@ -220,6 +239,7 @@
 闪光颜色: #ffff00
 闪光大小:0.4
 [抛射体_torpedo]
+#torpedo
 直接伤害:65
 效果存在时间:550
 速度:0.15
@@ -230,6 +250,7 @@
 大的打击效果:真
 激光拦截耗能:-1
 [抛射体_gunShot]
+#gun
 效果存在时间:150
 速度:4
 大的打击效果:真
@@ -242,6 +263,7 @@
 闪光大小:0.6
 image:抛射体.png
 [抛射体_antiNukeMissile]
+#anti-nuke
 直接伤害:600
 效果存在时间:99999
 速度:0.2
@@ -253,6 +275,7 @@
 弹道垂直飞行高度:80
 弹道高度:110
 帧:10
+#shadowFrame:1
 作图类型:0
 目标为地面:真
 范围伤害:100

================================================================================
文件: 作战单位\海军单位\运输艇\偷家模版.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\运输艇\偷家模版.ini
+++ 作战单位\海军单位\运输艇\偷家模版.ini
@@ -2,7 +2,8 @@
 禁止加载:真
 @memory 目标:unit
 [隐藏行动_获取目标]
-自动触发:if 最后转换时间(指定时间内=1) or 存活时间(指定时间内=1)
+自动触发:真
+需要条件:if 最后转换时间(指定时间内=1) or 存活时间(指定时间内=1)
 提取资源仅搜索:真
 提取资源范围:99999
 提取资源队伍:己方
@@ -11,6 +12,7 @@
 提取资源触发行为:存储
 [隐藏行动_存储]
 设置单位内存:目标=当前动作目标
+#memory.目标.readUnitMemory('坐标[0]',类型='number')
 [资源_冷却]
 隐藏:真
 [隐藏行动_左右图–上]
@@ -42,6 +44,7 @@
 临时标签添加:继续偷家
 添加路径点来自参考:创建标记(game.mapWidth-108, 内存.目标.读取单位内存('目标', type='unit').y-内存.目标.读取单位内存('中间值[1]', type='number'))
 [隐藏行动_继续偷家]
-自动触发:if 自身有标签(包含标签="继续偷家") and not 自身在移动 and not 自身有标签(包含标签="停止绕路") and 自身有资源(冷却=2.5)
+自动触发:真
+需要条件:if 自身有标签(包含标签="继续偷家") and not 自身在移动 and not 自身有标签(包含标签="停止绕路") and 自身有资源(冷却=2.5)
 临时标签添加:停止绕路
 清除所有路径点:真

================================================================================
文件: 作战单位\海军单位\运输艇\运输模版.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\运输艇\运输模版.ini
+++ 作战单位\海军单位\运输艇\运输模版.ini
@@ -1,5 +1,6 @@
 [核心]
 name:运输模版
+tags:无
 显示在沙盒中:假
 界面显示内部调用:hovercraft
 class:CustomUnitMetadata
@@ -35,8 +36,10 @@
 可攻击:假
 攻击距离:1
 [隐藏行动_水上]
-自动触发:if 自身在水中
+自动触发:真
+需要条件:if 自身在水中
 设置单位状态:移动速度=1.20
 [隐藏行动_陆地]
-自动触发:if not 自身在水中
+自动触发:真
+需要条件:if not 自身在水中
 设置单位状态:移动速度=0.9

================================================================================
文件: 作战单位\海军单位\运输艇\运输艇.ini
================================================================================

(内容完全相同)

================================================================================
文件: 作战单位\海军单位\运输艇\运输艇I.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\运输艇\运输艇I.ini
+++ 作战单位\海军单位\运输艇\运输艇I.ini
@@ -9,22 +9,26 @@
 [资源_冷却]
 隐藏:真
 [隐藏行动_增加冷却]
-自动触发:if not 自身在移动 and not 自身有活动的路径点
+自动触发:真
+需要条件:if not 自身在移动 and not 自身有活动的路径点
 增加资源:冷却=0.4
 [隐藏行动_偏移]
-自动触发:if 自身有资源(冷却=3) and not 自身在移动
+自动触发:真
+需要条件:if 自身有资源(冷却=3) and not 自身在移动
 开始卸载单位:真
 转换成:运输艇Z
 增加资源:冷却=-2
 [隐藏行动_ai装建造]
-自动触发:if not 自身运输单位有标签(包含标签='建造') and not 自身有活动的路径点(type='loadUP') and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165) and (队伍中此单位数量(需标签="经济", 范围内=165, 包含未完成的=true)-(队伍中此单位数量(需标签="经济", 范围内=165)))==0
+自动触发:真
+需要条件:if not 自身运输单位有标签(包含标签='建造') and not 自身有活动的路径点(type='loadUP') and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165) and (队伍中此单位数量(需标签="经济", 范围内=165, 包含未完成的=true)-(队伍中此单位数量(需标签="经济", 范围内=165)))==0
 添加路径点动作类型:loadUP
 清除所有路径点:真
 添加路径点序列位置:真
 添加路径点检索标签:外出
 添加路径点靠近队伍:己方
 [隐藏行动_ai装对地]
-自动触发:if 自身运输单位有标签(包含标签='建造') and not 自身在移动 and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165)
+自动触发:真
+需要条件:if 自身运输单位有标签(包含标签='建造') and not 自身在移动 and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165)
 清除所有路径点:真
 添加路径点动作类型:loadUP
 添加路径点序列位置:真

================================================================================
文件: 作战单位\海军单位\运输艇\运输艇T.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\运输艇\运输艇T.ini
+++ 作战单位\海军单位\运输艇\运输艇T.ini
@@ -6,17 +6,20 @@
 自动触发间隔:0.2s
 自动触发检查率:everyFrame
 [隐藏行动_冷却]
-自动触发:if 自身有标签(包含标签="开始")
+自动触发:真
+需要条件:if 自身有标签(包含标签="开始")
 增加资源:冷却:0.2
 [隐藏行动_ai装等离子]
-自动触发:if 自身运输数量(少于=4) and 自身属于AI控制 and 队伍中此单位数量(需标签="偷家战术", 超过=0) and not 自身有活动的路径点(type='loadUP')
+自动触发:真
+需要条件:if 自身运输数量(少于=4) and 自身属于AI控制 and 队伍中此单位数量(需标签="偷家战术", 超过=0) and not 自身有活动的路径点(type='loadUP')
 添加路径点动作类型:loadUP
 清除所有路径点:真
 添加路径点检索标签:离子坦
 添加路径点检索范围:400
 添加路径点靠近队伍:己方
 [隐藏行动_偷家]
-自动触发:if 自身运输数量(超过=3) and 队伍中此单位数量(需标签="偷家战术", 超过=0) and not 自身有活动的路径点(type='移动') and 自身自定义计时器(指定时间后=1) or 自身有标签(包含标签="停止绕路") and not 有全局标签(包含标签="偷家完毕")
+自动触发:真
+需要条件:if 自身运输数量(超过=3) and 队伍中此单位数量(需标签="偷家战术", 超过=0) and not 自身有活动的路径点(type='移动') and 自身自定义计时器(指定时间后=1) or 自身有标签(包含标签="停止绕路") and not 有全局标签(包含标签="偷家完毕")
 临时标签添加:开始
 添加路径点动作类型:攻击
 添加路径点靠近队伍:敌方

================================================================================
文件: 作战单位\海军单位\重型导弹舰\重导.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\重型导弹舰\重导.ini
+++ 作战单位\海军单位\重型导弹舰\重导.ini
@@ -25,7 +25,7 @@
 能量值:4
 能量恢复速度:0.007
 能量需要充满:真
-tags:对地, 对空, 重导, 海, 对地390, 大防空
+tags:对地, 对空, 重导, 海, 对地390, 大防空, C7
 资源活着时借用:伤害量=-3000, 对空伤害量=-3000
 [隐藏行动_ai拉扯]
 自动触发:if 敌人有此单位数量(需标签="海", 超过=0, 范围内=380) or 敌人有此单位数量(需标签="空对地", 超过=4, 范围内=380)

================================================================================
文件: 作战单位\海军单位\重型战舰\重战.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\重型战舰\重战.ini
+++ 作战单位\海军单位\重型战舰\重战.ini
@@ -14,7 +14,7 @@
 是生物:假
 自动触发间隔:2s
 自动触发检查率:每8帧
-tags:对地, 对空, 对水, 海, 对地290, 中防空, 重舰
+tags:对地, 对空, 对水, 海, 对地290, 中防空, 重舰, C5
 资源活着时借用:伤害量=-1250
 [图像]
 image:heavy_battleship.png

================================================================================
文件: 作战单位\海军单位\重型潜艇\重潜.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\重型潜艇\重潜.ini
+++ 作战单位\海军单位\重型潜艇\重潜.ini
@@ -117,7 +117,8 @@
 附着在单位上:假
 绘制在单位下方:真
 [隐藏行动_ai]
-自动触发:if 敌人有此单位数量(需标签="海厂", 超过=0) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="海厂", 超过=0) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点序列位置:真
 添加路径点检索标签:海厂, 水, 海

================================================================================
文件: 作战单位\海军单位\重型防空舰\重防空舰.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\重型防空舰\重防空舰.ini
+++ 作战单位\海军单位\重型防空舰\重防空舰.ini
@@ -10,9 +10,11 @@
 availableInDemo:真
 覆盖单位:heavyAAShip
 半径:30
+#displayRadius: 11
 护盾恢复速度:0.25
 运输占用位置:3
 是生物:假
+#softCollisionOnAll: 3
 tags:对空, 海, 中防空, 海防
 builtFrom_1_name:seaFactory
 builtFrom_1_pos:5
@@ -35,7 +37,9 @@
 炮塔转速:1.8
 攻击距离:320
 攻击间隔:140
+#turretMultiTargeting: true
 [炮塔_1]
+#pivot point
 x:0
 y:10
 可以开火:假
@@ -45,7 +49,12 @@
 后坐力速度:2
 后坐力恢复:40
 闲时转速:0.8
+#idleSweepAngle:60
+#idleSweepDelay:140
+#idleSweepSpeed:0.3
+#shouldResetTurret: false
 [炮塔_2]
+#left flak cannon
 x:6
 y:6
 链接到:1
@@ -68,6 +77,9 @@
 尾焰:真
 尾焰频率:0.75
 大的打击效果:真
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:0
 范围伤害:70
 范围半径:60

================================================================================
文件: 作战单位\海军单位\鹦鹉螺号\robotCrab\robotCrab.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\鹦鹉螺号\robotCrab\robotCrab.ini
+++ 作战单位\海军单位\鹦鹉螺号\robotCrab\robotCrab.ini
@@ -1,6 +1,7 @@
 [核心]
 显示在沙盒中:假
 name:robotCrab
+tags:无
 class:CustomUnitMetadata
 界面显示名称:侦察蟹
 界面显示描述:-可以攻击陆地和空中单位\n-可以修复和回收单位\n-可以透过雾看得更远\n-可以在水面上移动
@@ -38,6 +39,9 @@
 image:base.png
 死亡图像:base_dead.png
 炮塔图像:turret.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
+#AUTO
 image_shadow:AUTO
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -56,6 +60,7 @@
 [炮塔_1]
 x:0
 y:0
+#idleDir:-90
 不可见:真
 预热:30
 转弯速度:4
@@ -90,6 +95,7 @@
 x轴链接位置:-2
 Y轴链接位置:0
 移动速度:3.7
+#moveWarmUp:0.1s
 heightSpeed:1
 灰尘效果:假
 旋转速度:7
@@ -98,6 +104,7 @@
 最小移动距离:5
 最大移动腿数目:6
 最小移动距离检查相邻:真
+#hold_moveOnlyIfFurthest:false
 最大移动距离:10
 预测位置乘数:0.4
 [leg_2]

================================================================================
文件: 作战单位\海军单位\鹦鹉螺号\robotCrab\robotCrabWater.ini
================================================================================

(内容完全相同)

================================================================================
文件: 作战单位\海军单位\鹦鹉螺号\鹦鹉螺-水面.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\鹦鹉螺号\鹦鹉螺-水面.ini
+++ 作战单位\海军单位\鹦鹉螺号\鹦鹉螺-水面.ini
@@ -23,12 +23,14 @@
 可攻击水下单位:假
 可以攻击非接触水单位:真
 [炮塔_1]
+#gun turret (not in use)
 x:0
 y:27
 闲置方向:0
 不可见:真
 可以开火:假
 [炮塔_2]
+#missile turret
 x:10
 y:22
 闲置方向:0
@@ -46,6 +48,7 @@
 能量需求:1
 开火动画:shockwave
 [炮塔_3]
+#back turret
 复制与:2
 x:-10
 y:22
@@ -54,6 +57,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_4]
+#back turret
 复制与:2
 x:-10
 y:14
@@ -62,6 +66,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_5]
+#back turret
 复制与:2
 x:10
 y:14
@@ -70,6 +75,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_6]
+#back turret
 复制与:2
 x:10
 y:4
@@ -78,6 +84,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_7]
+#back turret
 复制与:2
 x:-10
 y:4
@@ -97,6 +104,9 @@
 腿图像:leg.png
 脚图像:foot.png
 脚图像阴影:SHADOW:foot.png
+#image_leg:  NONE
+#image_foot: NONE
+#image_foot_shadow: NONE
 锁定运动:真
 [leg_2]
 x:6

================================================================================
文件: 作战单位\海军单位\鹦鹉螺号\鹦鹉螺-陆地.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\鹦鹉螺号\鹦鹉螺-陆地.ini
+++ 作战单位\海军单位\鹦鹉螺号\鹦鹉螺-陆地.ini
@@ -14,7 +14,8 @@
 [行动_trigger_onLand]
 自动触发:假
 [行动_trigger_onWater]
-自动触发:if self.overWater()
+自动触发:真
+需要条件:if self.overWater()
 转换成:鹦鹉螺号水面
 建造速度:0
 text:TRIGGER
@@ -26,6 +27,7 @@
 可攻击水下单位:假
 可以攻击非接触水单位:真
 [炮塔_2]
+#missile turret
 x:10
 y:22
 闲置方向:0
@@ -44,6 +46,7 @@
 能量需求:1
 开火动画:shockwave
 [炮塔_3]
+#back turret
 复制与:2
 x:-10
 y:22
@@ -52,6 +55,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_4]
+#back turret
 复制与:2
 x:-10
 y:14
@@ -60,6 +64,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_5]
+#back turret
 复制与:2
 x:10
 y:14
@@ -68,6 +73,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_6]
+#back turret
 复制与:2
 x:10
 y:4
@@ -76,6 +82,7 @@
 抛射体:3
 链接间隔:2
 [炮塔_7]
+#back turret
 复制与:2
 x:-10
 y:4

================================================================================
文件: 作战单位\海军单位\鹦鹉螺号\鹦鹉螺.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军单位\鹦鹉螺号\鹦鹉螺.ini
+++ 作战单位\海军单位\鹦鹉螺号\鹦鹉螺.ini
@@ -23,6 +23,7 @@
 运输槽位数量:3
 被运输单位类型限制:水面, 两栖, 跨悬崖和水面
 载具可以卸载单位:假
+#transportUnitsCanUnloadUnits: if self.isOverLiquid()
 被运输单位需要标签:nonexistent
 单位建造完成时保留在载具内:真
 离开x轴:0
@@ -30,15 +31,17 @@
 离开旋转角度:0
 离开距离:110
 离开高度:0
-tags:水, 对地240, 鹦鹉螺
+tags:水, 对地240, 鹦鹉螺, C7
 资源活着时借用:伤害量=-3550
 [可建造_1]
 name:水下探测器, gunBoat, 导弹舰T1, 海上建造者T1, hoverTank
 [隐藏行动_trigger_onLand]
-自动触发:if not self.overWater()
+自动触发:真
+需要条件:if not self.overWater()
 转换成:鹦鹉螺号陆地
 [行动_surface]
 转换成:鹦鹉螺号水面
+#isActive: if not self.isOverwater
 显示类型:action
 价格:0
 text:Surface
@@ -50,8 +53,10 @@
 高优先级队列:真
 产生效果:CUSTOM:displacement_ripples, CUSTOM:ripples*3, CUSTOM:largeRipples
 额外图标图像:SHARED:icon_upgrade.png
+#图标额外颜色:#FFFFFF
 [隐藏行动_ai浮起]
-自动触发:if 敌人有此单位数量(超过=0, 范围内=240) and 自身有标签(包含标签="水") and 自身队列量(少于=1) and 自身能量(超过=5.5) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(超过=0, 范围内=240) and 自身有标签(包含标签="水") and 自身队列量(少于=1) and 自身能量(超过=5.5) and 自身属于AI控制
 也添加进队列:Surface
 [行动_dive]
 可见性:假
@@ -61,6 +66,7 @@
 价格:0
 text:Dive
 描述:-潜入水下
+#buildSpeed effected by nanoFactorySpeed:2
 建造速度:4.5s
 总是按一次:真
 建造时无法移动:真
@@ -68,8 +74,10 @@
 高优先级队列:真
 产生效果:CUSTOM:displacement_ripples, CUSTOM:ripples*3, CUSTOM:largeRipples
 额外图标图像:SHARED:icon_downgrade.png
+#图标额外颜色:#FFFFFF
 [隐藏行动_ai缩水]
-自动触发:if not 自身有标签(包含标签="水") and 自身在地块类型上(type="WATER") and 自身能量(少于=4) and 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if not 自身有标签(包含标签="水") and 自身在地块类型上(type="WATER") and 自身能量(少于=4) and 队伍中此单位数量(需标签="ai", 超过=0)
 也添加进队列:dive
 允许多个队列:假
 [行动_launchScoutBot]
@@ -78,6 +86,7 @@
 pos:0.8
 指定攻击地面炮塔:botTurret
 指定攻击地面类型:两栖
+#price: credits=250, energy=1
 价格:资金=250
 text:Launch scout bot
 描述:-Launch a scout bot to the target location
@@ -95,6 +104,7 @@
 text:i:gui.actions.buildAntiNuke
 描述:i:gui.actions.buildAntiNukeNautilus.描述
 显示类型:无
+#don't want a speed up from nanoFactorySpeed
 建造速度:${ 0.0005 / core.工厂速度乘数 }
 pos:0.2
 可用:if 自身弹药包括队列(少于=4)
@@ -103,6 +113,7 @@
 锁定消息:i:gui.actions.nukesDisabled
 图标:SHARED:icon_build.png
 [行动_showAntiNukeCount]
+#infoOnly: true
 增加资源:ammo=1
 价格:ammo=1
 text:i:gui.actions.antiNukeCount
@@ -115,10 +126,12 @@
 可见性:if 自身弹药(超过=0)
 图标:SHARED:icon_nuke_stockpile.png
 [行动_showAntiNukeCountEmpty]
+#infoOnly: true
 text:i:gui.actions.antiNukeCountEmpty
 描述:i:gui.actions.antiNukeCount.descriptionEmpty
 建造速度:0s
 pos:0.1
+#displayRemainingStockpile: true
 显示类型:infoOnlyStockpile
 可用:假
 可见性:if 自身弹药(少于=1)
@@ -143,12 +156,14 @@
 攻击距离:240
 攻击间隔:300
 [炮塔_1]
+#gun turret (not in use)
 x:0
 y:27
 闲置方向:0
 不可见:真
 可以开火:假
 [炮塔_2]
+#missile turret
 x:10
 y:22
 闲置方向:0
@@ -164,6 +179,7 @@
 转弯速度:40
 能量需求:1
 [炮塔_3]
+#back turret
 复制与:2
 x:-10
 y:22
@@ -172,6 +188,7 @@
 抛射体:2
 链接间隔:2
 [炮塔_4]
+#back turret
 复制与:2
 x:-10
 y:14
@@ -180,6 +197,7 @@
 抛射体:2
 链接间隔:2
 [炮塔_5]
+#back turret
 复制与:2
 x:10
 y:14
@@ -188,6 +206,7 @@
 抛射体:2
 链接间隔:2
 [炮塔_6]
+#back turret
 复制与:2
 x:10
 y:4
@@ -196,6 +215,7 @@
 抛射体:2
 链接间隔:2
 [炮塔_7]
+#back turret
 复制与:2
 x:-10
 y:4
@@ -204,6 +224,7 @@
 抛射体:2
 链接间隔:2
 [炮塔_botTurret]
+#bot turret
 x:10
 y:22
 可以开火:假
@@ -218,6 +239,7 @@
 开火动画:shockwave
 限制范围:500
 [炮塔_antiNuke]
+#anti-nuke turret
 x:7
 y:20
 可以开火:假
@@ -235,11 +257,14 @@
 转弯速度:40
 资源需求:ammo=1
 开火动画:shockwave, smoke
+#shoot_flame:custom:nukeLaunch
+#onShoot_playAnimation: fireNuke
 [抛射体_scoutBotProjectile]
 效果存在时间:0
 在寿命结束时刷抛射体:scoutBotProjectileSplit(偏移角度=15), scoutBotProjectileSplit(偏移角度=-180)
 直接伤害:0
 [抛射体_scoutBotProjectileSplit]
+#Scout bot
 直接伤害:123
 绘制大小:0.9
 spawnUnit:robotCrab
@@ -252,6 +277,7 @@
 弹道:真
 弹道垂直飞行高度:20
 弹道高度:50
+#initialUnguidedSpeedHeight: 1
 帧:9
 目标为地面:真
 激光拦截耗能:-1
@@ -269,6 +295,7 @@
 转弯速度:9
 速度:2
 [抛射体_2]
+#torpedo
 直接伤害:50
 效果存在时间:250
 速度:0.15
@@ -283,6 +310,7 @@
 弹道高度:-2
 自动切换目标:真
 [抛射体_3]
+#missile
 直接伤害:35
 绘制大小:0.8
 效果存在时间:240
@@ -298,6 +326,7 @@
 范围半径:55
 自动切换目标:真
 [抛射体_antiNukeMissile]
+#anti-nuke
 直接伤害:600
 效果存在时间:99999
 速度:0.2
@@ -309,6 +338,7 @@
 弹道垂直飞行高度:80
 弹道高度:110
 帧:10
+#shadowFrame:1
 作图类型:0
 目标为地面:真
 范围伤害:100
@@ -331,7 +361,9 @@
 高度改变速率:0.005
 [AI]
 用作运输:假
+#wave_normal_128.png
 [效果_displacement_ripples]
+#displacement type ignored if postprocessing is not enabled
 作图类型:displacement
 image:SHARED:ripple_normal_128.png
 效果存在时间:60

================================================================================
文件: 作战单位\海军模块.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\海军模块.ini
+++ 作战单位\海军模块.ini
@@ -2,13 +2,14 @@
 禁止加载:真
 [隐藏行动_海军集结]
 自动触发:真
-需要条件:if 队伍中此单位数量(需标签="海军作战中控", 超过=0) and 队伍中此单位数量(需标签="海军作战中控", 范围内=144, 少于=1) and 队伍中此单位数量(需标签="海军进攻", 范围内=390, 少于=1) and 自身有标签(包含标签="安全") and 自身有标签(包含标签="海军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制
+需要条件:if 队伍中此单位数量(需标签="海军作战中控", 超过=0) and 队伍中此单位数量(需标签="海军作战中控", 范围内=144, 少于=1) and 队伍中此单位数量(需标签="海军进攻", 范围内=390, 少于=1) and 自身有标签(包含标签="海军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制
 添加路径点动作类型:靠近目标
 添加路径点检索标签:海军作战中控
 添加路径点路径可达:真
 添加路径点靠近队伍:己方
 添加路径点匹配触发:清除路径
 [隐藏行动_清除路径]
+需要条件:if not 自身有活动的路径点(type='靠近目标')
 清除所有路径点:真
 添加路径点动作类型:靠近目标
 添加路径点检索标签:海军作战中控
@@ -16,7 +17,7 @@
 添加路径点靠近队伍:己方
 [隐藏行动_海军发起进攻]
 自动触发:真
-需要条件:if 队伍中此单位数量(需标签="海军进攻", 范围内=390, 超过=0) and not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="对地") and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="控距") and 自身有标签(包含标签="海军") and 自身属于AI控制
+需要条件:if 队伍中此单位数量(需标签="海军进攻", 范围内=390, 超过=0) and not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="对地") and 自身有标签(包含标签="海军") and not 自身有标签(包含标签="控距") and 自身属于AI控制
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:海厂, 海

================================================================================
文件: 作战单位\陆军模块.ini
================================================================================

--- scripts/元/人机的玩笑/作战单位\陆军模块.ini
+++ 作战单位\陆军模块.ini
@@ -2,26 +2,27 @@
 禁止加载:真
 [隐藏行动_陆军集结]
 自动触发:真
-需要条件:if 队伍中此单位数量(需标签="陆军作战中控", 超过=0) and 队伍中此单位数量(需标签="陆军作战中控", 范围内=120, 少于=1) and 队伍中此单位数量(需标签="发起进攻", 范围内=390, 少于=1) and 自身有标签(包含标签="安全") and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制 and 队伍中此单位数量(需标签="正在协防", 少于=1) or ${运动.移动速度}<0.8 and 队伍中此单位数量(需标签="正在协防", 范围内=500, 少于=1) and 队伍中此单位数量(需标签="陆军作战中控", 超过=0) and 队伍中此单位数量(需标签="陆军作战中控", 范围内=120, 少于=1) and 队伍中此单位数量(需标签="发起进攻", 范围内=390, 少于=1) and 自身有标签(包含标签="安全") and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制
+需要条件:if 队伍中此单位数量(需标签="陆军作战中控", 超过=0) and 队伍中此单位数量(需标签="陆军作战中控", 范围内=120, 少于=1) and 队伍中此单位数量(需标签="发起进攻", 范围内=390, 少于=1) and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制 and 队伍中此单位数量(需标签="正在协防", 少于=1) or ${运动.移动速度}<0.8 and 队伍中此单位数量(需标签="正在协防", 范围内=500, 少于=1) and 队伍中此单位数量(需标签="陆军作战中控", 超过=0) and 队伍中此单位数量(需标签="陆军作战中控", 范围内=120, 少于=1) and 队伍中此单位数量(需标签="发起进攻", 范围内=390, 少于=1) and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制
 添加路径点动作类型:靠近目标
 添加路径点检索标签:陆军作战中控
 添加路径点靠近队伍:己方
 添加路径点匹配触发:清除路径
 [隐藏行动_清除路径]
+需要条件:if not 自身有活动的路径点(type='靠近目标')
 清除所有路径点:真
 添加路径点动作类型:靠近目标
 添加路径点检索标签:陆军作战中控
 添加路径点靠近队伍:己方
 [隐藏行动_陆军发起进攻]
 自动触发:真
-需要条件:if 队伍中此单位数量(需标签="发起进攻", 范围内=390, 超过=0) and not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="对地") and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="控距") and 自身有标签(包含标签="陆军") and 自身属于AI控制 and 队伍中此单位数量(需标签="正在协防", 少于=1) or ${运动.移动速度}<0.8 and 队伍中此单位数量(需标签="正在协防", 范围内=500, 少于=1) and 队伍中此单位数量(需标签="发起进攻", 范围内=390, 超过=0) and not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="对地") and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="控距") and 自身有标签(包含标签="陆军") and 自身属于AI控制
+需要条件:if 队伍中此单位数量(需标签="发起进攻", 范围内=390, 超过=0) and not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="对地") and not 自身有标签(包含标签="控距") and 自身有标签(包含标签="陆军") and 自身属于AI控制 and 队伍中此单位数量(需标签="正在协防", 少于=1) or ${运动.移动速度}<0.8 and 队伍中此单位数量(需标签="正在协防", 范围内=500, 少于=1) and 队伍中此单位数量(需标签="发起进攻", 范围内=390, 超过=0) and not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="对地") and not 自身有标签(包含标签="控距") and 自身有标签(包含标签="陆军") and 自身属于AI控制
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:建筑物, 地
 添加路径点靠近队伍:敌方
 [隐藏行动_陆军协防]
 自动触发:真
-需要条件:if 队伍中此单位数量(需标签="正在协防", 超过=0) and ${运动.移动速度}>=0.8 and 队伍中此单位数量(需标签="正在协防", 超过=0) and 队伍中此单位数量(需标签="正在协防", 范围内=225, 少于=1) and 自身有标签(包含标签="安全") and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制 or 队伍中此单位数量(需标签="正在协防", 范围内=500, 超过=0) and 队伍中此单位数量(需标签="正在协防", 超过=0) and 队伍中此单位数量(需标签="正在协防", 范围内=225, 少于=1) and 自身有标签(包含标签="安全") and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制
+需要条件:if 队伍中此单位数量(需标签="正在协防", 超过=0) and ${运动.移动速度}>=0.8 and 队伍中此单位数量(需标签="正在协防", 超过=0) and 队伍中此单位数量(需标签="正在协防", 范围内=225, 少于=1) and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制 or 队伍中此单位数量(需标签="正在协防", 范围内=500, 超过=0) and 队伍中此单位数量(需标签="正在协防", 超过=0) and 队伍中此单位数量(需标签="正在协防", 范围内=225, 少于=1) and 自身有标签(包含标签="陆军") and not 自身有活动的路径点(type='靠近目标') and 自身属于AI控制
 添加路径点动作类型:靠近目标
 添加路径点检索标签:协防指挥
 添加路径点靠近队伍:己方

================================================================================
文件: 定制单位\实验蜘蛛\AI实验蜘蛛.ini
================================================================================

--- scripts/元/人机的玩笑/定制单位\实验蜘蛛\AI实验蜘蛛.ini
+++ 定制单位\实验蜘蛛\AI实验蜘蛛.ini
@@ -3,7 +3,8 @@
 复制与:蜘蛛模版.ini
 禁止接受指令:真
 [隐藏行动_进堡垒]
-自动触发:if 队伍中此单位数量(需标签="飞行核弹", 超过=0, 范围内=120) and not 敌人有此单位数量(超过=2, 范围内=210) and 自身属于AI控制
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="飞行核弹", 超过=0, 范围内=120) and not 敌人有此单位数量(超过=2, 范围内=210) and 自身属于AI控制
 添加路径点动作类型:loadInto
 添加路径点检索范围:100
 添加路径点检索标签:飞行核弹
@@ -11,5 +12,6 @@
 添加路径点靠近队伍:己方
 AI高优先级:真
 [隐藏行动_转化]
-自动触发:if not 队伍中此单位数量(需标签="飞行核弹", 超过=0, 范围内=120) or 敌人有此单位数量(超过=2, 范围内=210)
+自动触发:真
+需要条件:if not 队伍中此单位数量(需标签="飞行核弹", 超过=0, 范围内=120) or 敌人有此单位数量(超过=2, 范围内=210)
 转换成:实验蜘蛛I

================================================================================
文件: 定制单位\实验蜘蛛\实验蜘蛛I.ini
================================================================================

--- scripts/元/人机的玩笑/定制单位\实验蜘蛛\实验蜘蛛I.ini
+++ 定制单位\实验蜘蛛\实验蜘蛛I.ini
@@ -2,7 +2,8 @@
 name:实验蜘蛛I
 复制与:蜘蛛模版.ini
 [隐藏行动_核爆]
-自动触发:if 敌人有此单位数量(需标签="密集", 超过=0, 范围内=400) and 自身有资源(时间=600) and game.nukesEnabled() and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="密集", 超过=0, 范围内=400) and 自身有资源(时间=600) and game.nukesEnabled() and 自身属于AI控制
 添加路径点动作类型:移动
 添加路径点序列位置:真
 添加路径点检索标签:密集, 经济
@@ -11,6 +12,7 @@
 允许多个队列:假
 AI高优先级:真
 [隐藏行动_进堡垒]
-自动触发:if 队伍中此单位数量(需标签="飞行核弹", 超过=0, 范围内=210) and not 敌人有此单位数量(超过=2, 范围内=210) and 自身有资源(时间=600) and 自身属于AI控制
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="飞行核弹", 超过=0, 范围内=210) and not 敌人有此单位数量(超过=2, 范围内=210) and 自身有资源(时间=600) and 自身属于AI控制
 转换成:AI实验蜘蛛
 AI高优先级:真

================================================================================
文件: 定制单位\实验蜘蛛\蜘蛛模版.ini
================================================================================

--- scripts/元/人机的玩笑/定制单位\实验蜘蛛\蜘蛛模版.ini
+++ 定制单位\实验蜘蛛\蜘蛛模版.ini
@@ -1,6 +1,7 @@
 [核心]
 name:蜘蛛模版
 class:CustomUnitMetadata
+#price: 2
 价格:70000
 生命值:10000
 质量:90000
@@ -92,6 +93,7 @@
 spawnUnit:人机炮塔(跳过条件=true, 对齐网格=true), AI辅助建造
 目标为地面:真
 爆炸效果:无
+#建造模块
 [隐藏行动_炮塔]
 自动触发:if 敌人有此单位数量(需标签="地", 超过=0, 范围内=345) or 敌人有此单位数量(需标签="建筑物", 超过=0, 范围内=345) or 中立有此单位数量(需标签="资源点", 超过=0, 范围内=144) or 敌对中立拥有此单位数量(需标签="究极辉光", 超过=0, 范围内=450)
 需要条件:if 敌人有此单位数量(需标签="对地", 少于=1, 范围内=240) and 队伍中此单位数量(范围内=210, 需标签="炮塔I", 少于=1, 包含未完成的=true) and 队伍中此单位数量(需标签="家", 少于=1, 范围内=280) and 敌人有此单位数量(需标签="火炮塔", 少于=1, 范围内=425) and 敌人有此单位数量(需标签="炮塔I", 少于=1, 范围内=240) and 自身有资源(冷却=15) and 自身属于AI控制
@@ -104,16 +106,19 @@
 指定攻击地面坐标:0, 75
 重置自定义计时器:真
 [隐藏行动_辅助建造]
-自动触发:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair') and 自身属于AI控制
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair') and 自身属于AI控制
 AI高优先级:真
 添加路径点动作类型:follow
 添加路径点检索标签:辅助建造
 添加路径点路径可达:真
 [隐藏行动_建造中]
-自动触发:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair') and 自身属于AI控制
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair') and 自身属于AI控制
 临时标签添加:安全
 AI高优先级:真
 清除所有路径点:真
+#回收
 [资源_上班]
 隐藏:真
 [资源_冷却]
@@ -196,10 +201,17 @@
 [炮塔_mainCannon]
 x:0
 y:20
+#projectile: cannonShot
 抛射体:plasma
 链接到:mainCannonBase
 隶属:真
+#image: SHARED:experimental_tank_turret.png
+#image: SHARED:turret_artillery_large.png
 image:experimental_tank_turret2.png
+#canAttackFlyingUnits: false
+#canAttackLandUnits:   true
+#canAttackUnderwaterUnits: false
+#delay: 190
 开火间隔:110
 预热:20
 闲置方向:0
@@ -207,35 +219,45 @@
 开火音效大小:0.3
 开火动画:large, CUSTOM:lightSlowFade
 开火闪光: #EEEECCCC
+#warmupStartEffect:CUSTOM:lightSlowFadeBase
 size:16
 炮塔旋转加速度:0.1
 转弯速度:0
 后坐力大小:-5
 后坐力速度:3
 后坐力恢复:38
+#chargeEffectImage: SHARED:lighting_charge.png
 [炮塔_mainCannonBase]
 x:0
 y:-8
+#image: SHARED:experimental_tank_turret.png
+#image: SHARED:turret_artillery_large.png
 image:spider_turret_base.png
 图像应用队伍颜色:真
 可攻击空中单位:假
 可攻击表面单位:真
 可攻击水下单位:假
 可以开火:假
+#delay: 190
 开火间隔:110
 预热:20
 闲置方向:0
 开火音效:large_gun_fire2
 开火音效大小:0.3
+#shoot_flame:large
 开火闪光: #EEEECCCC
 开火动画:CUSTOM:lightSlowFade
+#warmupStartEffect:CUSTOM:lightSlowFadeBase
 size:40
 炮塔旋转加速度:0.1
 转弯速度:2
 后坐力大小:-1
 后坐力速度:3
 后坐力恢复:38
+#chargeEffectImage: SHARED:lighting_charge.png
 [抛射体_cannonShot]
+#main turret projectile
+#directDamage: 0 #no directDamage with targetGround
 效果存在时间:150
 速度:5
 大的打击效果:真
@@ -252,8 +274,12 @@
 作图类型:2
 帧:4
 绘制大小:1
+#trailEffect: CUSTOM:projectileTrail
 尾焰频率:2
+#trailEffectRate: true
+#lightColor:#ffffff
 爆炸效果:smallExplosion, CUSTOM:hitLightFlash, CUSTOM:projectilePassThough
+#explodeEffectOnShield: CUSTOM:hitLightFlash
 创建时效果:CUSTOM:projectileLight
 [效果_warmup]
 优先级:high
@@ -276,6 +302,7 @@
 初始缩放倍数:0.4
 结束缩放倍数:0.4
 透明度:0.5
+#drawUnderUnits:true
 [效果_lightSlowFadeBase]
 image:SHARED:light_50.png
 效果存在时间:30
@@ -285,6 +312,7 @@
 初始缩放倍数:0.2
 结束缩放倍数:0.6
 透明度:0.7
+#drawUnderUnits:true
 Y轴相对偏移:-41
 Y相对速度:0.3
 [效果_projectileTrail]
@@ -298,6 +326,7 @@
 结束缩放倍数:0.4
 透明度:0.6
 绘制在单位下方:真
+#ySpeedRelative:-1
 [效果_projectileLight]
 优先级:veryhigh
 image:SHARED:light_50.png
@@ -350,6 +379,7 @@
 腿图像:leg.png
 脚图像:foot.png
 脚图像阴影:SHADOW:foot.png
+#drawUnderAllUnits:true
 偏向于临近一侧:真
 缩小时绘制腿:真
 缩小时绘制脚:真
@@ -399,6 +429,8 @@
 leg3_5s:{x:0, dir:0}
 leg5_2.5s:{x:-20, y:18}
 leg6_3.5s:{x:20, y:18}
+#body_0s: {scale:1}
+#body_4s: {scale:1.8}
 [效果_lightFlash]
 优先级:high
 image:SHARED:light_50.png
@@ -425,6 +457,9 @@
 image:body.png
 死亡图像:body_dead.png
 炮塔图像:SHARED:nano_turret.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
+#teamColorsOnTurret: true
 image_shadow:AUTO
 X轴阴影偏移:3
 Y轴阴影偏移:3

================================================================================
文件: 定制单位\飞行堡垒\空堡模版.ini
================================================================================

--- scripts/元/人机的玩笑/定制单位\飞行堡垒\空堡模版.ini
+++ 定制单位\飞行堡垒\空堡模版.ini
@@ -9,7 +9,9 @@
 科技等级:1
 实验单位标志:真
 建造速度:0.0002
+#availableInDemo: true
 半径:25
+#displayRadius: 25
 是生物:假
 碰撞体积软化:3
 运输槽位数量:12
@@ -19,6 +21,8 @@
 生命恢复速度:0.4
 tags:堡垒, 空对地, 拦截, 蛋t1
 自动触发间隔:0.1s
+#transportUnitsKillOnDeath: if self.isOverLiquid()
+#transportUnitsHealBy: 1
 离开x轴:0
 离开y轴:10
 离开旋转角度:0
@@ -28,9 +32,14 @@
 image:experimental_dropship.png
 死亡图像:experimental_dropship_dead.png
 炮塔图像:SHARED:small_laser_turret.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
+#imageScale: 1.5
 image_shadow:AUTO
 X轴阴影偏移:1
 Y轴阴影偏移:1
+#movementEffect: CUSTOM:engineTrail
+#movementEffectRate: 6
 [攻击]
 可攻击:真
 可攻击空中单位:真
@@ -77,6 +86,7 @@
 移动滑动角度:45
 死亡缓慢降落:真
 [效果_engineTrail]
+#createWhenOverLiquid: false
 缩小时可产生效果:假
 优先级:low
 效果存在时间:20
@@ -87,6 +97,7 @@
 初始缩放倍数:0.3
 结束缩放倍数:0.8
 透明度:1.1
+#drawUnderUnits:true
 Y相对速度:-0.7
 X随机相对速度:0.2
 Y轴相对偏移:-40

================================================================================
文件: 定制单位\飞行堡垒\飞行堡垒.ini
================================================================================

--- scripts/元/人机的玩笑/定制单位\飞行堡垒\飞行堡垒.ini
+++ 定制单位\飞行堡垒\飞行堡垒.ini
@@ -13,11 +13,14 @@
 [可建造_5]
 name:重型坦克T1, 等离子坦克T1, 猛犸坦克I, missileTank, laserTank
 [隐藏行动_有核弹]
-自动触发:if 自身运输单位有标签(包含标签='蜘蛛')
+自动触发:真
+需要条件:if 自身运输单位有标签(包含标签='蜘蛛')
 临时标签添加:运输堡垒
 [隐藏行动_非移动]
-自动触发:if not 自身在移动
+自动触发:真
+需要条件:if not 自身在移动
 临时标签删除:运输堡垒
 [隐藏行动_变]
-自动触发:if 自身属于AI控制
+自动触发:真
+需要条件:if 自身属于AI控制
 转换成:AI飞行堡垒I

================================================================================
文件: 定制单位\飞行堡垒\飞行堡垒AI.ini
================================================================================

--- scripts/元/人机的玩笑/定制单位\飞行堡垒\飞行堡垒AI.ini
+++ 定制单位\飞行堡垒\飞行堡垒AI.ini
@@ -5,10 +5,12 @@
 [资源_冷却]
 隐藏:真
 [隐藏行动_增加冷却]
-自动触发:if not 自身在移动 and not 自身有活动的路径点
+自动触发:真
+需要条件:if not 自身在移动 and not 自身有活动的路径点
 增加资源:冷却=0.4
 [隐藏行动_偏移]
-自动触发:if 自身有资源(冷却=3) and not 自身在移动
+自动触发:真
+需要条件:if 自身有资源(冷却=3) and not 自身在移动
 开始卸载单位:真
 转换成:AI飞行堡垒I自由
 增加资源:冷却=-2
@@ -29,21 +31,26 @@
 生产单位:建造者I
 建造速度:8.3s
 [隐藏行动_攻堡垒]
-自动触发:if 敌人有此单位数量(需标签="堡垒", 超过=0, 范围内=400) and not 自身有标签(包含标签="偷家") and not 自身有资源(时间=600) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="堡垒", 超过=0, 范围内=400) and not 自身有标签(包含标签="偷家") and not 自身有资源(时间=600) and 自身属于AI控制
 添加路径点动作类型:follow
 添加路径点检索标签:堡垒
 添加路径点靠近队伍:敌方
 [隐藏行动_ai运]
-自动触发:if not 自身运输数量(超过=10) and not 自身有资源(时间=500)
+自动触发:真
+需要条件:if not 自身运输数量(超过=10) and not 自身有资源(时间=500)
 临时标签添加:运
 [隐藏行动_ai满]
-自动触发:if 自身运输数量(超过=10) and not 自身有资源(时间=520)
+自动触发:真
+需要条件:if 自身运输数量(超过=10) and not 自身有资源(时间=520)
 临时标签删除:运
 [隐藏行动_ai运核弹]
-自动触发:if not 自身运输数量(超过=0) and 自身有资源(时间=600) and game.nukesEnabled()
+自动触发:真
+需要条件:if not 自身运输数量(超过=0) and 自身有资源(时间=600) and game.nukesEnabled()
 临时标签添加:飞行核弹
 [隐藏行动_ai准备]
-自动触发:if 自身运输数量(超过=0) and 自身有资源(时间=600)
+自动触发:真
+需要条件:if 自身运输数量(超过=0) and 自身有资源(时间=600)
 临时标签删除:飞行核弹
 [隐藏行动_空中核弹]
 自动触发:if 敌人有此单位数量(需标签="密集", 超过=0) or 敌人有此单位数量(需标签="经济", 超过=0)
@@ -60,7 +67,8 @@
 添加路径点靠近队伍:敌方
 临时标签添加:运输堡垒
 [隐藏行动_偷家]
-自动触发:if 自身运输数量(超过=10) and not 自身在移动 and not 盟友有此单位数量(需标签="偷家", 超过=2)and not 自身有资源(时间=600)
+自动触发:真
+需要条件:if 自身运输数量(超过=10) and not 自身在移动 and not 盟友有此单位数量(需标签="偷家", 超过=2)and not 自身有资源(时间=600)
 添加路径点动作类型:follow
 添加路径点检索标签:家
 添加路径点靠近队伍:敌方
@@ -73,7 +81,8 @@
 添加路径点检索标签:实验工厂I
 添加路径点靠近队伍:己方
 [隐藏行动_ai装载]
-自动触发:if 队伍中此单位数量(需标签="蜘蛛", 超过=0, 范围内=300) and not 自身运输数量(超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="蜘蛛", 超过=0, 范围内=300) and not 自身运输数量(超过=0)
 添加路径点动作类型:loadUP
 添加路径点序列位置:真
 添加路径点检索标签:蜘蛛
@@ -103,8 +112,10 @@
 添加路径点靠近队伍:己方
 临时标签添加:运输堡垒
 [隐藏行动_落地]
-自动触发:if not 自身在移动
+自动触发:真
+需要条件:if not 自身在移动
 临时标签删除:运输堡垒
 [隐藏行动_变]
-自动触发:if not 自身属于AI控制
+自动触发:真
+需要条件:if not 自身属于AI控制
 转换成:experimentalDropship

================================================================================
文件: 定制单位\飞行堡垒\飞行堡垒AI自由.ini
================================================================================

--- scripts/元/人机的玩笑/定制单位\飞行堡垒\飞行堡垒AI自由.ini
+++ 定制单位\飞行堡垒\飞行堡垒AI自由.ini
@@ -38,5 +38,6 @@
 添加路径点靠近队伍:己方
 临时标签添加:运输堡垒
 [隐藏行动_变]
-自动触发:if 自身血量>7999 and not 敌人有此单位数量(超过=2, 范围内=300)
+自动触发:真
+需要条件:if 自身血量>7999 and not 敌人有此单位数量(超过=2, 范围内=300)
 转换成:AI飞行堡垒I

================================================================================
文件: 建筑\all-units.template
================================================================================

--- scripts/元/人机的玩笑/建筑\all-units.template
+++ 建筑\all-units.template
@@ -1,6 +1,7 @@
 [核心]
 自动触发检查率:每8帧
 tags:建筑物
+#建筑
 [全局资源_AI阶段]
 显示名称:阶段
 显示颜色: #FF5D46
@@ -22,25 +23,35 @@
 隐藏:真
 [全局资源_队伍]
 隐藏:真
+#特殊资源
 [资源_前线计时]
 隐藏:真
 [资源_ai核弹]
 显示名称:核弹数量
+#密集系统
 [隐藏行动_密集]
-自动触发:if 队伍中此单位数量(超过=12, 范围内=400) and not 自身有标签(包含标签="密集")
+自动触发:真
+需要条件:if 队伍中此单位数量(超过=12, 范围内=400) and not 自身有标签(包含标签="密集")
 临时标签添加:密集
 [隐藏行动_密集无反]
-自动触发:if 自身有标签(包含标签="密集") and 队伍中此单位数量(需标签="反核", 范围内=400, 超过=0) and not 自身有标签(包含标签="密集无反")
+自动触发:真
+需要条件:if 自身有标签(包含标签="密集") and 队伍中此单位数量(需标签="反核", 范围内=400, 超过=0) and not 自身有标签(包含标签="密集无反")
 临时标签添加:密集无反
 [隐藏行动_密集有反]
-自动触发:if 队伍中此单位数量(超过=12, 范围内=400) and 队伍中此单位数量(需标签="反核", 范围内=400, 少于=1) and 自身有标签(包含标签="密集无反")
+自动触发:真
+需要条件:if 队伍中此单位数量(超过=12, 范围内=400) and 队伍中此单位数量(需标签="反核", 范围内=400, 少于=1) and 自身有标签(包含标签="密集无反")
 临时标签删除:密集无反
 [隐藏行动_不密集]
-自动触发:if 队伍中此单位数量(少于=13, 范围内=400) and 自身有标签(包含标签="密集")
+自动触发:真
+需要条件:if 队伍中此单位数量(少于=13, 范围内=400) and 自身有标签(包含标签="密集")
 临时标签删除:密集, 密集无反
+#防空标签
 [隐藏行动_无防空保护]
-自动触发:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))<=0 and not 自身有标签(包含标签="防空")
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))<=0 and not 自身有标签(包含标签="防空")
 临时标签添加:无防空保护, 需要防空
 [隐藏行动_有防空保护]
-自动触发:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))>0
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="对空", 范围内=240)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=250)+队伍中此单位数量(需标签="中防空", 范围内=340)+队伍中此单位数量(需标签="大防空", 范围内=400))>0
 临时标签删除:无防空保护, 需要防空
+[贴花_1]

================================================================================
文件: 建筑\工厂建筑\实验工厂\人机实验厂.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工厂建筑\实验工厂\实验工厂I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工厂建筑\实验工厂\实验工厂I.ini
+++ 建筑\工厂建筑\实验工厂\实验工厂I.ini
@@ -28,7 +28,8 @@
 canBuild_1_pos:0.1
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
 [隐藏行动_检测]
 自动触发事件:创建
@@ -73,13 +74,15 @@
 更多锁定:if not 自身有资源(时间=500) and not 自身有资源(AI阶段=40)
 更多锁定消息:AI暂时禁用该单位
 [隐藏行动_造单位]
-自动触发:if not 队伍中此单位数量(需标签="堡垒已造", 超过=0) and 自身有资源(资金=180000) and 自身队列量(少于=1)
+自动触发:真
+需要条件:if not 队伍中此单位数量(需标签="堡垒已造", 超过=0) and 自身有资源(资金=180000) and 自身队列量(少于=1)
 允许多个队列:假
 临时标签添加:堡垒已造
 也添加进队列:生产飞行堡垒
 重置自定义计时器:真
 [隐藏行动_造飞行核弹]
-自动触发:if not 队伍中此单位数量(需标签="堡垒", 超过=0) and 队伍中此单位数量(需标签="大后期", 超过=0) and 自身队列量(少于=1) and 自身有资源(资金=30000) and 自身属于AI控制 and 自身自定义计时器(指定时间后=84)
+自动触发:真
+需要条件:if not 队伍中此单位数量(需标签="堡垒", 超过=0) and 队伍中此单位数量(需标签="大后期", 超过=0) and 自身队列量(少于=1) and 自身有资源(资金=30000) and 自身属于AI控制 and 自身自定义计时器(指定时间后=84)
 重置自定义计时器:真
 允许多个队列:假
 也添加进队列:生产飞行堡垒
@@ -88,7 +91,8 @@
 建造速度:83.3s
 增加资源:-30000
 [隐藏行动_造蜘蛛]
-自动触发:if not 队伍中此单位数量(需标签="蜘蛛", 超过=1) and 队伍中此单位数量(需标签="大后期", 超过=0) and 自身队列量(少于=1) and 自身有资源(资金=70000) and 自身属于AI控制 and 自身自定义计时器(指定时间后=84)
+自动触发:真
+需要条件:if not 队伍中此单位数量(需标签="蜘蛛", 超过=1) and 队伍中此单位数量(需标签="大后期", 超过=0) and 自身队列量(少于=1) and 自身有资源(资金=70000) and 自身属于AI控制 and 自身自定义计时器(指定时间后=84)
 重置自定义计时器:真
 允许多个队列:假
 也添加进队列:生产蜘蛛
@@ -107,7 +111,8 @@
 建造速度:83.3s
 增加资源:-14000
 [隐藏行动_概念坦]
-自动触发:if 队伍中此单位数量(需标签="概念坦", 包含队列中的=true)<int(min((自身资源.AI阶段-12.5)*(0.01+自身资源.AI阶段*0.02), 36)) and 自身队列量(少于=1) and 自身有资源(资金=21000) and 自身属于AI控制 and 自身自定义计时器(指定时间后=84)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="概念坦", 包含队列中的=true)<int(min((自身资源.AI阶段-12.5)*(0.01+自身资源.AI阶段*0.02), 36)) and 自身队列量(少于=1) and 自身有资源(资金=21000) and 自身属于AI控制 and 自身自定义计时器(指定时间后=84)
 重置自定义计时器:真
 允许多个队列:假
 也添加进队列:生产概念坦

================================================================================
文件: 建筑\工厂建筑\机械工厂\人机机械厂.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工厂建筑\机械工厂\机械工厂I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工厂建筑\机械工厂\机械工厂I.ini
+++ 建筑\工厂建筑\机械工厂\机械工厂I.ini
@@ -25,7 +25,8 @@
 canBuild_1_pos:1
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
 [全局资源_压力值]
 隐藏:真
@@ -40,7 +41,8 @@
 需要条件:if 全图中此单位数量(需标签="陆地检测点", 范围内=500, 少于=1)
 产生单位:陆地
 [隐藏行动_回收]
-自动触发:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 队伍中此单位数量(需标签="机械厂", 范围内=520, 超过=1)
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 队伍中此单位数量(需标签="机械厂", 范围内=520, 超过=1)
 临时标签添加:需要回收
 [行动_建造者]
 text:建造者I
@@ -105,7 +107,8 @@
 锁定:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0)
 锁定消息:暂时禁用
 [隐藏行动_炮塔开局]
-自动触发:if not 有全局标签(包含标签="开局兵源") and 有全局标签(包含标签="防线") and 自身队列量(少于=1) and 自身有资源(资金=3000)
+自动触发:真
+需要条件:if not 有全局标签(包含标签="开局兵源") and 有全局标签(包含标签="防线") and 自身队列量(少于=1) and 自身有资源(资金=3000)
 添加全局标签:开局兵源
 也添加进队列:炮塔开
 [隐藏行动_基础甲]
@@ -132,7 +135,8 @@
 增加资源:空闲=-1.2
 也添加进队列:基础甲
 [隐藏行动_甲空速攻]
-自动触发:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and 自身队列量(少于=2) and 自身有资源(资金=500)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and 自身队列量(少于=2) and 自身有资源(资金=500)
 也添加进队列:速攻小甲
 [隐藏行动_速攻小甲]
 生产单位:基础机甲T1
@@ -143,6 +147,9 @@
 image:mechFactoryTop.png
 背景图像:mechFactoryBottom.png
 死亡图像:mechFactoryDead.png
+#scaleImagesTo 20
+#scaleTurretImagesTo 9
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -154,12 +161,15 @@
 x:0
 y:5
 末端图像:mechFactoryDoor.png
+#y16
 [动画_openDoor]
 动画条件:queuedUnits
 在队列中有单位播放:0.8
 融入时间:1s
 切换融合:4s
 arm1_0:{x:0, y:16}
+#arm1_0ms {x0, y0}
+#arm1_1400ms {x10, y-8}
 [AI]
 建造优先级:0.36
 AI升级优先级:0.1

================================================================================
文件: 建筑\工厂建筑\机械工厂\机械工厂IT2.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工厂建筑\海军基地\海军基地I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工厂建筑\海军基地\海军基地I.ini
+++ 建筑\工厂建筑\海军基地\海军基地I.ini
@@ -29,7 +29,8 @@
 canBuild_5_isVisible:if not 队伍中此单位数量(需标签="运", 超过=0, 包含队列中的=true)
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
 [资源_空闲]
 隐藏:真

================================================================================
文件: 建筑\工厂建筑\海军基地\海军基地IT2.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工厂建筑\空军基地\人机空厂.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工厂建筑\空军基地\空军基地I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工厂建筑\空军基地\空军基地I.ini
+++ 建筑\工厂建筑\空军基地\空军基地I.ini
@@ -26,10 +26,12 @@
 canBuild_1_pos:0.1
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
 [隐藏行动_蚊子]
-自动触发:if 队伍中此单位数量(需标签="空对地", 少于=1) and 自身队列量(少于=1) and 敌人有此单位数量(需标签="空厂", 少于=1, 包含未完成的=true)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="空对地", 少于=1) and 自身队列量(少于=1) and 敌人有此单位数量(需标签="空厂", 少于=1, 包含未完成的=true)
 也添加进队列:蚊子1
 [隐藏行动_蚊子1]
 生产单位:轻型武装直升机
@@ -84,11 +86,12 @@
 可用:if 自身有资源(AI阶段=5) and not 队伍中此单位数量(需标签="T2空厂", 超过=0) or 队伍中此单位数量(需标签="前期", 少于=1) and not 自身有标签(包含标签="T2厂")
 锁定:if 队伍中此单位数量(需标签="T2厂", 超过=0) and 全图中此单位数量(需标签="岩浆点", 少于=1) and 全图中此单位数量(需标签="悬崖点", 少于=1) and not 自身有资源(AI阶段=10) or 自身队列量(超过=0)
 [隐藏行动_甲空速攻]
-自动触发:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and 自身队列量(少于=2) and 自身有资源(资金=2000) and 队伍中此单位数量(需标签="空对地", 少于=2, 包含队列中的=true)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and 自身队列量(少于=2) and 自身有资源(资金=2000) and 队伍中此单位数量(需标签="空对地", 少于=2, 包含队列中的=true)
 也添加进队列:速攻直升机
 [隐藏行动_速攻直升机]
 生产单位:直升机T1
-建造速度:0.0012s
+建造速度:0.0012
 增加资源:-700
 [图像]
 总帧数:5
@@ -109,7 +112,8 @@
 AI升级优先级:0.1
 每个基地最大数量:9
 [隐藏行动_禁空]
-自动触发:if 全图中此单位数量(需标签="禁空军", 超过=0)
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="禁空军", 超过=0)
 删除自身:真
 增加资源:1000
 [隐藏行动_变]

================================================================================
文件: 建筑\工厂建筑\空军基地\空军基地It2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工厂建筑\空军基地\空军基地It2.ini
+++ 建筑\工厂建筑\空军基地\空军基地It2.ini
@@ -89,6 +89,7 @@
 也添加进队列:两栖队列
 [隐藏行动_两栖队列]
 生产单位:两栖喷气机T1
+#120 1s
 建造速度:16.6s
 增加资源:-2000
 [隐藏行动_补充武直]
@@ -98,6 +99,7 @@
 也添加进队列:武直队列
 [隐藏行动_武直队列]
 生产单位:gunShip
+#58 1s
 建造速度:13.8s
 增加资源:-800
 [隐藏行动_补充轰炸]
@@ -107,6 +109,7 @@
 也添加进队列:轰炸队列
 [隐藏行动_轰炸队列]
 生产单位:轰炸机T1
+#60 1s
 建造速度:66.6s
 增加资源:-4000
 [隐藏行动_补充导飞]
@@ -124,7 +127,8 @@
 增加资源:空闲=-0.05
 也添加进队列:空2
 [隐藏行动_空军战术]
-自动触发:if 队伍中此单位数量(需标签="空军战术", 超过=0) and not 有全局标签(包含标签="空军完毕") and 队伍中此单位数量(需标签="空优", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="空军战术", 超过=0) and not 有全局标签(包含标签="空军完毕") and 队伍中此单位数量(需标签="空优", 超过=0)
 AI高优先级:真
 允许多个队列:假
 增加资源:空闲=-4
@@ -197,7 +201,8 @@
 [AI]
 升级自:空军基地I
 [隐藏行动_禁空]
-自动触发:if 全图中此单位数量(需标签="禁空军", 超过=0)
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="禁空军", 超过=0)
 删除自身:真
 增加资源:2500
 [隐藏行动_变]

================================================================================
文件: 建筑\工厂建筑\陆军工厂\人机陆厂.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工厂建筑\陆军工厂\陆军工厂I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工厂建筑\陆军工厂\陆军工厂I.ini
+++ 建筑\工厂建筑\陆军工厂\陆军工厂I.ini
@@ -16,6 +16,7 @@
 科技等级:1
 建造速度:0.001
 半径:30
+#displayRadius 25
 是生物:假
 是建筑:真
 tags:建筑物, 陆厂, 厂
@@ -26,14 +27,16 @@
 canBuild_1_pos:0.1
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
 [隐藏行动_检测]
 自动触发事件:创建
 需要条件:if 全图中此单位数量(需标签="陆地检测点", 范围内=500, 少于=1)
 产生单位:陆地
 [隐藏行动_回收]
-自动触发:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 队伍中此单位数量(需标签="陆厂", 范围内=520, 超过=1)
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 队伍中此单位数量(需标签="陆厂", 范围内=520, 超过=1)
 临时标签添加:需要回收
 [行动_建造者]
 text:建造者I
@@ -63,7 +66,8 @@
 更多锁定2:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0)
 更多锁定消息2:暂时禁用
 [隐藏行动_开局兵源]
-自动触发:if not 有全局标签(包含标签="开局兵源")
+自动触发:真
+需要条件:if not 有全局标签(包含标签="开局兵源")
 添加全局标签:开局兵源
 也添加进队列:陆01, 陆02, 陆03, 陆04, 陆05
 [隐藏行动_陆01]
@@ -87,7 +91,8 @@
 建造速度:8.3s
 增加资源:-350
 [隐藏行动_小坦速攻]
-自动触发:if 队伍中此单位数量(需标签="小坦速攻", 超过=0) and 自身队列量(少于=2)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="小坦速攻", 超过=0) and 自身队列量(少于=2)
 也添加进队列:速攻小坦
 [隐藏行动_速攻小坦]
 生产单位:坦克T1
@@ -111,6 +116,7 @@
 允许多个队列:假
 也添加进队列:upgrade
 增加资源:-2000
+#玩家建筑不会自动升级！
 [图像]
 总帧数:1
 image:land_factory_front.png

================================================================================
文件: 建筑\工厂建筑\陆军工厂\陆军工厂IT2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工厂建筑\陆军工厂\陆军工厂IT2.ini
+++ 建筑\工厂建筑\陆军工厂\陆军工厂IT2.ini
@@ -22,7 +22,8 @@
 需要条件:if 全图中此单位数量(需标签="陆地检测点", 范围内=500, 少于=1)
 产生单位:陆地
 [隐藏行动_回收]
-自动触发:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 全图中此单位数量(需标签="陆厂", 范围内=520, 超过=1)
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 全图中此单位数量(需标签="陆厂", 范围内=520, 超过=1)
 临时标签添加:需要回收
 [可建造_6]
 name:战斗工程师T1
@@ -42,7 +43,8 @@
 允许多个队列:假
 可用:if 自身有资源(AI阶段=5) and 敌人有此单位数量(需标签="机枪", 包含队列中的=true)>(队伍中此单位数量(需标签="猛犸", 包含队列中的=true)+盟友有此单位数量(需标签="猛犸", 包含队列中的=true))
 [隐藏行动_偷家战术]
-自动触发:if 队伍中此单位数量(需标签="偷家战术", 超过=0) and not 有全局标签(包含标签="偷家队列") and 自身自定义计时器(指定时间后=1)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="偷家战术", 超过=0) and not 有全局标签(包含标签="偷家队列") and 自身自定义计时器(指定时间后=1)
 重置自定义计时器:真
 AI高优先级:真
 允许多个队列:假

================================================================================
文件: 建筑\工程建筑\修复湾\修复湾.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\修复湾\修复湾.ini
+++ 建筑\工程建筑\修复湾\修复湾.ini
@@ -24,10 +24,12 @@
 tags:建筑物, 修复湾I
 维修或建造范围:230
 [隐藏行动_危险]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)>0
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)>0
 临时标签删除:修复
 [隐藏行动_安全]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)==0
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)==0
 临时标签添加:修复
 [可建造_canReclaim]
 name:reclaim

================================================================================
文件: 建筑\工程建筑\修复湾\修复湾I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\修复湾\修复湾I.ini
+++ 建筑\工程建筑\修复湾\修复湾I.ini
@@ -24,13 +24,16 @@
 维修或建造范围:520
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
 [隐藏行动_危险]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)>0
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)>0
 临时标签删除:修复
 [隐藏行动_安全]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)==0
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=460)+敌人有此单位数量(需标签="拦截", 范围内=460)+敌人有此单位数量(需标签="对空", 范围内=460)==0
 临时标签添加:修复
 [可建造_canReclaim]
 name:reclaim

================================================================================
文件: 建筑\工程建筑\前线模块.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\前线模块.ini
+++ 建筑\工程建筑\前线模块.ini
@@ -1,7 +1,9 @@
 [核心]
 禁止加载:真
+#前线系统
 [隐藏行动_前线计时]
-自动触发:if 自身有标签(包含标签="前线")
+自动触发:真
+需要条件:if 自身有标签(包含标签="前线")
 用逻辑设置资源:前线计时=max(自身资源.前线计时+2-(min((敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=320)), 5)), -100)
 也执行动作:完善, 补充
 [隐藏行动_完善]
@@ -24,9 +26,11 @@
 建造速度:0s
 显示给盟友:真
 [隐藏行动_前线限制]
-自动触发:if 队伍中此单位数量(需标签="前线", 超过=1) and 自身有资源(前线计时=20) and 自身有标签(包含标签="前线")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="前线", 超过=1) and 自身有资源(前线计时=20) and 自身有标签(包含标签="前线")
 用逻辑设置资源:前线计时:0
 临时标签删除:前线, 需要补充
 [隐藏行动_前线]
-自动触发:if (敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=320))>0 and not 自身有标签(包含标签="前线")
+自动触发:真
+需要条件:if (敌人有此单位数量(需标签="对地", 范围内=460)+敌人有此单位数量(需标签="空对地", 范围内=320))>0 and not 自身有标签(包含标签="前线")
 临时标签添加:前线

================================================================================
文件: 建筑\工程建筑\核弹\人机反核.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工程建筑\核弹\反核防御I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\核弹\反核防御I.ini
+++ 建筑\工程建筑\核弹\反核防御I.ini
@@ -11,7 +11,9 @@
 建筑覆盖范围:-1, -1, 1, 1
 科技等级:1
 建造速度:0.001
+#availableInDemo: true
 半径:35
+#displayRadius: 25
 是生物:假
 是建筑:真
 tags:反核, 建筑物
@@ -19,7 +21,8 @@
 离开y轴:-1
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
 [隐藏行动_ai自带]
 自动触发事件:创建
@@ -38,6 +41,7 @@
 AI被禁用:if 自身弹药(超过=11)
 图标:SHARED:icon_build.png
 [行动_showAntiNukeCount]
+#infoOnly: true
 增加资源:ammo=1
 价格:ammo=1
 text:i:gui.actions.antiNukeCount
@@ -50,10 +54,12 @@
 可见性:if 自身弹药(超过=0)
 图标:SHARED:icon_nuke_stockpile.png
 [行动_showAntiNukeCountEmpty]
+#infoOnly: true
 text:i:gui.actions.antiNukeCountEmpty
 描述:i:gui.actions.antiNukeCount.descriptionEmpty
 建造速度:0s
 pos:0.1
+#displayRemainingStockpile: true
 显示类型:infoOnlyStockpile
 可用:假
 可见性:if 自身弹药(少于=1)
@@ -99,6 +105,7 @@
 image:SHARED:no_icon.png
 图像缩放:0.5
 [炮塔_silo]
+#anti-nuke turret
 x:0
 y:10
 闲置方向:0
@@ -115,8 +122,10 @@
 转弯速度:40
 资源需求:ammo=1
 开火动画:shockwave, smoke
+#shoot_flame:custom:nukeLaunch
 开火播放动画:fireNuke
 [抛射体_antiNukeProjectile]
+#anti-nuke
 直接伤害:600
 效果存在时间:99999
 速度:0.2
@@ -128,6 +137,7 @@
 弹道垂直飞行高度:80
 弹道高度:110
 帧:10
+#shadowFrame:1
 作图类型:0
 目标为地面:真
 范围伤害:100
@@ -142,11 +152,15 @@
 y:12
 末端图像:antinuke_launcher_door_r.png
 末端图像着色:真
+#x:13
+#y:-9
 [arm_2]
 x:-2
 y:11
 末端图像:antinuke_launcher_door_l.png
 末端图像着色:真
+#x:-14
+#y:14
 [动画_fireNuke]
 融入时间:0.5s
 切换融合:3.5s
@@ -154,7 +168,12 @@
 arm2_0:{x:-5, y:0}
 arm1_1.2s:{x:3, y:0}
 arm2_1.2s:{x:-3, y:0}
+#arm1_0s: {x:0, y:0}
+#arm2_0s: {x:0, y:0}
+#arm1_1.400s: {x:10, y:-8}
+#arm2_1.400s: {x:-9, y:5}
 [效果_nukeLaunch]
+#image: shockwave_large.png
 [AI]
 建造优先级:0.3
 全图没有时优先级:997

================================================================================
文件: 建筑\工程建筑\激光防御塔\人机激光.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工程建筑\激光防御塔\激光模版.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\激光防御塔\激光模版.ini
+++ 建筑\工程建筑\激光防御塔\激光模版.ini
@@ -13,8 +13,10 @@
 @memory 战力涨幅:number[]
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
+#––「资源」––#
 [资源_战斗力]
 显示名称:战力
 [资源_战力]
@@ -23,8 +25,10 @@
 显示名称:对空战力
 [资源_对空战力]
 隐藏:真
+#––「设定」––#
 [隐藏行动_战力修正]
-自动触发:if 自身自定义计时器(指定时间后=1)
+自动触发:真
+需要条件:if 自身自定义计时器(指定时间后=1)
 重置自定义计时器:真
 设置单位内存:战力涨幅[0]=1+(队伍中此单位数量(需标签="建造", 范围内=210)*0.3+盟友有此单位数量(需标签="建造", 范围内=210)*0.15+队伍中此单位数量(需标签="对地", 范围内=210)*0.05+盟友有此单位数量(需标签="对地", 范围内=210)*0.05+队伍中此单位数量(需标签="炮塔I", 范围内=210)*0.125+盟友有此单位数量(需标签="炮塔I", 范围内=210)*0.125+队伍中此单位数量(需标签="激光防御塔", 范围内=210)*0.09+盟友有此单位数量(需标签="激光防御塔", 范围内=210)*0.09)*0.5, 战力涨幅[1]=1+(队伍中此单位数量(需标签="建造", 范围内=210)*0.3+盟友有此单位数量(需标签="建造", 范围内=210)*0.15+队伍中此单位数量(需标签="对空", 范围内=210)*0.05+盟友有此单位数量(需标签="对空", 范围内=210)*0.05+队伍中此单位数量(需标签="防空", 范围内=210)*0.125+盟友有此单位数量(需标签="防空", 范围内=210)*0.125+队伍中此单位数量(需标签="激光防御塔", 范围内=210)*0.09+盟友有此单位数量(需标签="激光防御塔", 范围内=210)*0.09)*0.5
 用逻辑设置资源:战力=(选择(队伍中此单位数量(需标签="炮塔I", 范围内=210, 超过=0), 自身最大血量*0.02, 自身最大血量*0.01)*内存.战力涨幅[0])*(0.4+(自身血量/自身最大血量)*0.6), 对空战力=(选择(队伍中此单位数量(需标签="防空", 范围内=210, 超过=0), 自身最大血量*0.02, 自身最大血量*0.01)*内存.战力涨幅[0])*(0.4+(自身血量/自身最大血量)*0.6)
@@ -36,11 +40,13 @@
 自动触发事件:创建
 用逻辑设置资源:最新编号=自身资源.最新编号+1, 编号=自身资源.最新编号
 [隐藏行动_灭]
-自动触发:if 自身能量(少于=0.1)
+自动触发:真
+需要条件:if 自身能量(少于=0.1)
 临时标签添加:灭
 临时标签删除:激光防御塔
 [隐藏行动_亮]
-自动触发:if 自身护盾满(满=true)
+自动触发:真
+需要条件:if 自身护盾满(满=true)
 临时标签删除:灭
 临时标签添加:激光防御塔
 [运动]

================================================================================
文件: 建筑\工程建筑\激光防御塔\激光防御T2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\激光防御塔\激光防御T2.ini
+++ 建筑\工程建筑\激光防御塔\激光防御T2.ini
@@ -22,6 +22,7 @@
 总帧数:1
 image:激光防御塔t2.png
 死亡图像:laser_defence_dead.png
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -31,6 +32,7 @@
 攻击距离:192
 显示范围UI:真
 [炮塔_laserDefence]
+#laserdefence
 x:0
 y:12
 可以开火:假
@@ -38,6 +40,7 @@
 激光防御能量需求:0.05
 size:0
 [炮塔_laserDefence1]
+#laserdefence
 x:0
 y:12
 可以开火:假

================================================================================
文件: 建筑\工程建筑\激光防御塔\激光防御塔.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\激光防御塔\激光防御塔.ini
+++ 建筑\工程建筑\激光防御塔\激光防御塔.ini
@@ -33,6 +33,7 @@
 总帧数:1
 image:laser_defence1.png
 死亡图像:laser_defence_dead.png
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -42,6 +43,7 @@
 攻击距离:160
 显示范围UI:真
 [炮塔_laserDefence]
+#laserdefence
 x:0
 y:12
 可以开火:假

================================================================================
文件: 建筑\工程建筑\激光防御塔\马奇诺激光.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\激光防御塔\马奇诺激光.ini
+++ 建筑\工程建筑\激光防御塔\马奇诺激光.ini
@@ -32,6 +32,7 @@
 总帧数:1
 image:laser_defence1.png
 死亡图像:laser_defence_dead.png
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -41,6 +42,7 @@
 攻击距离:160
 显示范围UI:真
 [炮塔_laserDefence]
+#laserdefence
 x:0
 y:12
 可以开火:假

================================================================================
文件: 建筑\工程建筑\炮塔\人机炮塔.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工程建筑\炮塔\人机防空.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工程建筑\炮塔\喷火塔.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\喷火塔.ini
+++ 建筑\工程建筑\炮塔\喷火塔.ini
@@ -6,10 +6,11 @@
 价格:1200
 生命值:1600
 生命恢复速度:0.16
-tags:建筑物, 喷火塔I, 炮塔I, 对地
+tags:建筑物, 喷火塔I, 炮塔I, 对地, C3
 资源活着时借用:伤害量=-1000
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=155) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=155) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -31,6 +32,11 @@
 攻击距离:155
 攻击间隔:5
 瞄准偏移:0
+#[turret_fake]
+#x:0
+#y:6
+#canShoot:false
+#invisible:true
 [炮塔_1]
 x:0
 y:6
@@ -57,6 +63,8 @@
 激光拦截耗能:-1
 范围伤害:4
 范围半径:65
+#explodeEffect: CUSTOM:hitFlame
+#effectOnCreate: CUSTOM:attachedFlame, CUSTOM:attachedLight
 [效果_attachedFlame]
 优先级:high
 帧索引:3
@@ -64,6 +72,7 @@
 效果存在时间:120
 淡出:真
 附着在单位上:真
+#color: #fdc14d
 颜色: #FFFFFF
 淡入时间:9
 初始缩放倍数:0.9
@@ -90,6 +99,7 @@
 效果存在时间:40
 淡出:真
 附着在单位上:假
+#color: #fdc14d
 颜色: #FFFFFF
 初始缩放倍数:1.0
 结束缩放倍数:1.2

================================================================================
文件: 建筑\工程建筑\炮塔\机枪T1.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\机枪T1.ini
+++ 建筑\工程建筑\炮塔\机枪T1.ini
@@ -8,10 +8,11 @@
 覆盖单位:c_turret_t2_gun
 科技等级:2
 建造速度:0.0008
-tags:建筑物, 炮塔I, 机枪塔I, 对地
+tags:建筑物, 炮塔I, 机枪塔I, 对地, C4
 资源活着时借用:伤害量=-3450
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=185) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=185) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -59,6 +60,7 @@
 开火音效大小:0.3
 开火动画:small
 开火闪光: #FFEECCCC
+#idleSpin: 0.8
 后坐力大小:-0.5
 后坐力速度:6
 后坐力恢复:12

================================================================================
文件: 建筑\工程建筑\炮塔\机枪塔T2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\机枪塔T2.ini
+++ 建筑\工程建筑\炮塔\机枪塔T2.ini
@@ -10,10 +10,11 @@
 科技等级:2
 建造速度:0.0006666
 视野:16
-tags:建筑物, 机枪塔II, 炮塔I, 对地
+tags:建筑物, 机枪塔II, 炮塔I, 对地, C8
 资源活着时借用:伤害量=-4800
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=320) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=320) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -22,6 +23,9 @@
 image:turret_base2.png
 死亡图像:turret_base_dead.png
 炮塔图像:turret_top_l3.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -43,6 +47,7 @@
 开火音效大小:0.3
 开火动画:small
 开火闪光: #FFEECCCC
+#idleSpin: 0.8
 后坐力大小:-0.5
 后坐力速度:6
 后坐力恢复:12
@@ -53,4 +58,9 @@
 直接伤害:40
 效果存在时间:60
 速度:8
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:5
+#areaDamage: 40
+#areaRadiu

================================================================================
文件: 建筑\工程建筑\炮塔\火炮T1.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\火炮T1.ini
+++ 建筑\工程建筑\炮塔\火炮T1.ini
@@ -10,10 +10,11 @@
 建造速度:0.0008
 视野:20
 未完成时视野:15
-tags:建筑物, 火炮塔I, 炮塔I, 对地
+tags:建筑物, 火炮塔I, 炮塔I, 对地, C3
 资源活着时借用:伤害量=-650
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=350) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=350) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -41,6 +42,9 @@
 image:turret_base2.png
 死亡图像:turret_base_dead.png
 炮塔图像:turret_top_artillery.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1

================================================================================
文件: 建筑\工程建筑\炮塔\火炮塔T2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\火炮塔T2.ini
+++ 建筑\工程建筑\炮塔\火炮塔T2.ini
@@ -9,11 +9,13 @@
 科技等级:2
 建造速度:0.0006666
 视野:26
+#15 = default
 未完成时视野:18
-tags:建筑物, 火炮塔II, 炮塔I, 对地
+tags:建筑物, 火炮塔II, 炮塔I, 对地, C7
 资源活着时借用:伤害量=-2800
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=460) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=460) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -22,6 +24,9 @@
 image:turret_base2B.png
 死亡图像:turret_base_dead.png
 炮塔图像:turret_top_artillery_l2.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -65,10 +70,16 @@
 范围半径:66
 效果存在时间:240
 速度:4.8
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
+#frame: 2
 作图类型:2
 帧:0
 绘制大小:0.9
 颜色: #bebe50
+#areaDamage: 40
+#areaRadius: 35
 大的打击效果:真
 闪光颜色: #EEEEEE
 目标为地面散布:10

================================================================================
文件: 建筑\工程建筑\炮塔\炮塔T0.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\炮塔T0.ini
+++ 建筑\工程建筑\炮塔\炮塔T0.ini
@@ -9,17 +9,19 @@
 生命值:700
 科技等级:1
 建造速度:0.0008
-tags:建筑物, 炮塔I, 对地, 炮塔T0
+tags:建筑物, 炮塔I, 对地, 炮塔T0, C3
 资源活着时借用:伤害量=-2350
 [隐藏行动_完成]
-自动触发:if 队伍中此单位数量(需标签="建筑物", 范围内=25, 超过=0) and not 有全局标签(包含标签="对塔完毕")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建筑物", 范围内=25, 超过=0) and not 有全局标签(包含标签="对塔完毕")
 添加全局标签:对塔完毕
 也执行动作:前线判断
 [隐藏行动_前线判断]
 需要条件:if 队伍中此单位数量(需标签="I", 范围内=810)+盟友有此单位数量(需标签="I", 范围内=810)<1 and 队伍中此单位数量(需标签="前线", 少于=1)
 临时标签添加:前线
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=165) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=165) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -82,7 +84,8 @@
 转换成:机枪T1
 建造速度:16.6s
 [隐藏行动_喷火]
-自动触发:if 自身队列量(少于=1) and 自身属于AI控制 and 队伍中此单位数量(需标签="喷火塔I", 少于=1, 包含未完成的=true) and 队伍中此单位数量(需标签="升级火", 少于=1) and 自身血量<650 and 自身有资源(AI阶段=2.5)
+自动触发:真
+需要条件:if 自身队列量(少于=1) and 自身属于AI控制 and 队伍中此单位数量(需标签="喷火塔I", 少于=1, 包含未完成的=true) and 队伍中此单位数量(需标签="升级火", 少于=1) and 自身血量<650 and 自身有资源(AI阶段=2.5)
 临时标签添加:升级火
 也添加进队列:升级喷火
 [隐藏行动_升级喷火]

================================================================================
文件: 建筑\工程建筑\炮塔\炮塔模版.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\炮塔模版.ini
+++ 建筑\工程建筑\炮塔\炮塔模版.ini
@@ -16,14 +16,18 @@
 自动触发检查率:每8帧
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
+#––「资源」––#
 [资源_伤害量]
 隐藏:真
 [资源_战力]
 显示名称:战力
+#––「设定」––#
 [隐藏行动_战力修正]
-自动触发:if 自身自定义计时器(指定时间后=1)
+自动触发:真
+需要条件:if 自身自定义计时器(指定时间后=1)
 重置自定义计时器:真
 用逻辑设置资源:战力=int(max(((max(${攻击.攻击距离}+(-${攻击.攻击距离}*0.45), 100)*(自身资源.伤害量)*0.012+(自身最大血量+(自身护盾*1.2))*1.44)*0.0128), 1))*(0.4+(自身血量/自身最大血量)*0.6)
 [全局资源_最新编号]
@@ -34,17 +38,21 @@
 自动触发事件:创建
 用逻辑设置资源:最新编号=自身资源.最新编号+1, 编号=自身资源.最新编号
 [隐藏行动_作战中控]
-自动触发:if 队伍中此单位数量(需标签="作战区块", 范围内=690)==0
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="作战区块", 范围内=690)==0
 产生单位:作战区块
+#––「作战指示」––#
 [隐藏行动_需要激光]
 自动触发事件:tookDamage
 需要条件:if 自身血量<=自身最大血量*0.9
 临时标签添加:辅助建造, 开始建造, 需要激光
 [隐藏行动_安全了]
-自动触发:if 自身血量>自身最大血量*0.9
+自动触发:真
+需要条件:if 自身血量>自身最大血量*0.9
 临时标签删除:辅助建造, 开始建造
 [隐藏行动_解除]
-自动触发:if 队伍中此单位数量(需标签="激光防御塔", 范围内=120, 包含未完成的=true)>0
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="激光防御塔", 范围内=120, 包含未完成的=true)>0
 临时标签删除:需要激光
 [图像]
 总帧数:1

================================================================================
文件: 建筑\工程建筑\炮塔\闪电塔T1.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\闪电塔T1.ini
+++ 建筑\工程建筑\炮塔\闪电塔T1.ini
@@ -9,10 +9,11 @@
 科技等级:2
 建造速度:0.0008
 覆盖单位:c_turret_t1_lightning
-tags:建筑物, 电击, 闪电塔I, 炮塔I, 对地
+tags:建筑物, 电击, 闪电塔I, 炮塔I, 对地, C3
 资源活着时借用:伤害量=-1350
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=210) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=210) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -44,6 +45,7 @@
 image:turret_base2.png
 死亡图像:turret_base_dead.png
 炮塔图像:turret_top_lightning.png
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -72,7 +74,9 @@
 后坐力大小:-1.5
 后坐力速度:3
 后坐力恢复:17
+#energyUsage: 1
 [抛射体_1]
+#directDamage: 310
 直接伤害:150
 效果存在时间:25
 瞬间命中:真

================================================================================
文件: 建筑\工程建筑\炮塔\闪电塔T2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\闪电塔T2.ini
+++ 建筑\工程建筑\炮塔\闪电塔T2.ini
@@ -8,10 +8,11 @@
 生命值:2700
 科技等级:2
 建造速度:0.0006666
-tags:建筑物, 炮塔I, 闪电塔II, 对地
+tags:建筑物, 炮塔I, 闪电塔II, 对地, C5
 资源活着时借用:伤害量=-2450
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=250) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 超过=0, 范围内=250) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
@@ -33,6 +34,7 @@
 image:turret_base2B.png
 死亡图像:turret_base_dead.png
 炮塔图像:turret_top_lightning_l2.png
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -61,6 +63,7 @@
 后坐力大小:-1.5
 后坐力速度:3
 后坐力恢复:17
+#energyUsage: 1
 炮弹x:7
 [炮塔_2]
 可以开火:假
@@ -70,6 +73,7 @@
 不可见:真
 炮弹x:-7
 [抛射体_1]
+#directDamage: 310
 直接伤害:310
 效果存在时间:25
 瞬间命中:真

================================================================================
文件: 建筑\工程建筑\炮塔\防空T0.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\防空T0.ini
+++ 建筑\工程建筑\炮塔\防空T0.ini
@@ -36,7 +36,8 @@
 从单元添加属性:${section.转换成}
 可用:if 敌人有此单位数量(需标签="空对地", 超过=12) and 队伍中此单位数量(需标签="高射炮", 范围内=512, 少于=1) or not 自身属于AI控制
 [隐藏行动_sbai]
-自动触发:if 存活时间(指定时间后=120) and 自身队列量(少于=1) and 自身有资源(资金=2400) and 自身属于AI控制 and 自身有资源(AI阶段=7.5)
+自动触发:真
+需要条件:if 存活时间(指定时间后=120) and 自身队列量(少于=1) and 自身有资源(资金=2400) and 自身属于AI控制 and 自身有资源(AI阶段=7.5)
 也添加进队列:upgradeT2
 增加资源:-1200
 [攻击]

================================================================================
文件: 建筑\工程建筑\炮塔\防空T1.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\防空T1.ini
+++ 建筑\工程建筑\炮塔\防空T1.ini
@@ -4,6 +4,7 @@
 界面显示描述:-攻击空中单位
 class:CustomUnitMetadata
 价格:1800
+#800+600
 生命值:1400
 质量:9000
 覆盖单位:c_antiAirTurretT2
@@ -24,7 +25,8 @@
 额外图标颜色: #AAFFFFFF
 可用:if 自身有资源(AI阶段=20) or not 自身属于AI控制
 [隐藏行动_ai索敌]
-自动触发:if 敌人有此单位数量(超过=0, 范围内=340) and 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 敌人有此单位数量(超过=0, 范围内=340) and 队伍中此单位数量(需标签="ai", 超过=0)
 添加路径点动作类型:攻击
 添加路径点检索标签:运, 空对地
 添加路径点检索范围:340
@@ -58,6 +60,7 @@
 开火动画:small
 开火闪光: #FFEECCCC
 [炮塔_3]
+#right missile pod
 x:-7
 y:6
 复制与:2

================================================================================
文件: 建筑\工程建筑\炮塔\防空T2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\防空T2.ini
+++ 建筑\工程建筑\炮塔\防空T2.ini
@@ -4,6 +4,7 @@
 界面显示描述:-攻击空中单位\n-远距离打击
 class:CustomUnitMetadata
 价格:12800
+#800+600
 生命值:2240
 质量:9000
 建造速度:0.0006666
@@ -30,6 +31,7 @@
 后坐力速度:6
 后坐力恢复:12
 [炮塔_2]
+#left missile pod
 x:7
 y:6
 链接到:1
@@ -40,7 +42,9 @@
 开火音效大小:0.3
 开火动画:small
 开火闪光: #FFEECCCC
+#image: SHARED:debug_marker.png
 [炮塔_3]
+#right missile pod
 x:-7
 y:6
 复制与:2
@@ -53,6 +57,11 @@
 到达速度:7.2
 尾焰:真
 大的打击效果:真
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:4
+#areaDamage: 40
+#areaRadius: 35
 自动切换目标:真
 激光拦截耗能:2

================================================================================
文件: 建筑\工程建筑\炮塔\防空模版.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\工程建筑\炮塔\防空模版.ini
+++ 建筑\工程建筑\炮塔\防空模版.ini
@@ -1,5 +1,6 @@
 [核心]
 name:防空模版
+tags:无
 禁止加载:真
 价格:0
 质量:0
@@ -15,14 +16,18 @@
 是生物:假
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造
+#––「资源」––#
 [资源_对空伤害量]
 隐藏:真
 [资源_对空战力]
 显示名称:战力
+#––「设定」––#
 [隐藏行动_战力修正]
-自动触发:if 自身自定义计时器(指定时间后=1)
+自动触发:真
+需要条件:if 自身自定义计时器(指定时间后=1)
 重置自定义计时器:真
 用逻辑设置资源:对空战力=int(max(((max(${攻击.攻击距离}+(-${攻击.攻击距离}*0.45), 100)*(自身资源.对空伤害量)*0.012+(自身最大血量+(自身护盾*1.2))*1.44)*0.0128), 1))*(0.4+(自身血量/自身最大血量)*0.6)
 [全局资源_最新编号]
@@ -33,7 +38,8 @@
 自动触发事件:创建
 用逻辑设置资源:最新编号=自身资源.最新编号+1, 编号=自身资源.最新编号
 [隐藏行动_攻击空对地]
-自动触发:if 自身属于AI控制 and 敌人有此单位数量(需标签="空对地", 范围内=340, 超过=0) and 攻击中.tags(包含标签='拦截')
+自动触发:真
+需要条件:if 自身属于AI控制 and 敌人有此单位数量(需标签="空对地", 范围内=340, 超过=0) and 攻击中.tags(包含标签='拦截')
 清除所有路径点:真
 添加路径点路径可达:真
 添加路径点动作类型:攻击

================================================================================
文件: 建筑\工程建筑\炮塔\马奇诺炮塔.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工程建筑\炮塔\马奇诺防空.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\工程建筑\炮塔\高射炮T1.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\玩家单位\修复湾\修复湾.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\玩家单位\实验工厂\实验工厂.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\玩家单位\机械工厂\mechFactory.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\机械工厂\mechFactory.ini
+++ 建筑\玩家单位\机械工厂\mechFactory.ini
@@ -40,6 +40,9 @@
 image:mechFactoryTop.png
 背景图像:mechFactoryBottom.png
 死亡图像:mechFactoryDead.png
+#scaleImagesTo 20
+#scaleTurretImagesTo 9
+#AUTO
 image_shadow:无
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -51,17 +54,21 @@
 x:0
 y:5
 末端图像:mechFactoryDoor.png
+#y16
 [动画_openDoor]
 动画条件:queuedUnits
 在队列中有单位播放:0.8
 融入时间:1s
 切换融合:4s
 arm1_0:{x:0, y:16}
+#arm1_0ms {x0, y0}
+#arm1_1400ms {x10, y-8}
 [AI]
 建造优先级:0.33
 AI升级优先级:0.1
 每个基地最大数量:9
 升级自:机械工厂I
 [隐藏行动_变]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0)
 转换成:机械工厂I

================================================================================
文件: 建筑\玩家单位\机械工厂\mechFactoryT2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\机械工厂\mechFactoryT2.ini
+++ 建筑\玩家单位\机械工厂\mechFactoryT2.ini
@@ -29,5 +29,6 @@
 [AI]
 升级自:毒-机械工厂
 [隐藏行动_变]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0)
 转换成:机械工厂II

================================================================================
文件: 建筑\玩家单位\海军基地\sea_factory.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\海军基地\sea_factory.ini
+++ 建筑\玩家单位\海军基地\sea_factory.ini
@@ -56,5 +56,6 @@
 AI升级优先级:0.09
 每个基地最大数量:9
 [隐藏行动_变]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0)
 转换成:海军基地I

================================================================================
文件: 建筑\玩家单位\海军基地\sea_factory_t2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\海军基地\sea_factory_t2.ini
+++ 建筑\玩家单位\海军基地\sea_factory_t2.ini
@@ -28,5 +28,6 @@
 [AI]
 升级自:毒-海军基地
 [隐藏行动_变]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0)
 转换成:海军基地II

================================================================================
文件: 建筑\玩家单位\空军基地\air_factory.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\空军基地\air_factory.ini
+++ 建筑\玩家单位\空军基地\air_factory.ini
@@ -12,6 +12,7 @@
 科技等级:1
 建造速度:0.001
 半径:30
+#displayRadius 25
 是生物:假
 是建筑:真
 tags:建筑物, 空厂, 厂
@@ -55,7 +56,8 @@
 AI升级优先级:0.09
 每个基地最大数量:9
 [隐藏行动_变]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0)
 转换成:空军基地I
 [placementRule_禁空]
 检索标签:禁空军
@@ -65,6 +67,7 @@
 排除不完整建筑:真
 搜索距离:Infinity
 [隐藏行动_禁空]
-自动触发:if 全图中此单位数量(需标签="禁空军", 超过=0)
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="禁空军", 超过=0)
 删除自身:真
 增加资源:1000

================================================================================
文件: 建筑\玩家单位\空军基地\air_factory1.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\空军基地\air_factory1.ini
+++ 建筑\玩家单位\空军基地\air_factory1.ini
@@ -14,6 +14,7 @@
 科技等级:2
 建造速度:0.0005
 半径:30
+#displayRadius 25
 是生物:假
 是建筑:真
 tags:建筑物, 空厂, T2空厂, 厂
@@ -66,11 +67,14 @@
 最大转弯速度:0
 转弯加速度:0.1
 [AI]
+#merge count checks with this
 升级自:毒-空军基地
 [隐藏行动_变]
-自动触发:if 自身属于AI控制
+自动触发:真
+需要条件:if 自身属于AI控制
 转换成:空军基地II
 [隐藏行动_禁空]
-自动触发:if 全图中此单位数量(需标签="禁空军", 超过=0)
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="禁空军", 超过=0)
 删除自身:真
 增加资源:2500

================================================================================
文件: 建筑\玩家单位\陆军工厂\land_factory.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\陆军工厂\land_factory.ini
+++ 建筑\玩家单位\陆军工厂\land_factory.ini
@@ -55,5 +55,6 @@
 禁用:真
 升级自:陆军工厂I
 [隐藏行动_变I]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0)
 转换成:陆军工厂I

================================================================================
文件: 建筑\玩家单位\陆军工厂\land_factory_t2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\玩家单位\陆军工厂\land_factory_t2.ini
+++ 建筑\玩家单位\陆军工厂\land_factory_t2.ini
@@ -29,5 +29,6 @@
 [AI]
 升级自:毒-陆军工厂
 [隐藏行动_变]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0)
 转换成:陆军工厂II

================================================================================
文件: 建筑\资源制造仪\fabricatorT1.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\资源制造仪\fabricatorT2.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\资源制造仪\fabricatorT3.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\资源制造仪\资源制造I.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\资源制造仪\资源制造I.ini
+++ 建筑\资源制造仪\资源制造I.ini
@@ -1,7 +1,9 @@
 [核心]
 name:资源仪I
 复制与:fabricatorT1.ini
+#
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1)
 产生单位:AI辅助建造

================================================================================
文件: 建筑\资源抽取器\extractor.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\资源抽取器\extractorT2.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\资源抽取器\extractorT2.ini
+++ 建筑\资源抽取器\extractorT2.ini
@@ -11,6 +11,7 @@
 建造速度:0.0010
 [行动_upgradeT3]
 转换成:资源抽取器t3
+#price  2500 #1.13.3 (with $+18)
 价格:4000
 text:i:gui.actions.upgradeT3
 描述:i:units.extractor.upgrade.descriptionT3

================================================================================
文件: 建筑\资源抽取器\extractorT3.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\资源抽取器\extractorT3_overclocked.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\资源抽取器\extractorT3_reinforced.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建筑\资源抽取器\extractor_common.ini
================================================================================

--- scripts/元/人机的玩笑/建筑\资源抽取器\extractor_common.ini
+++ 建筑\资源抽取器\extractor_common.ini
@@ -2,7 +2,9 @@
 禁止加载:真
 质量:9000
 界面显示描述:-生产资金\n-只能建造在资源池上
+#footprint used for collisions with units (left, up, right, down)
 建筑碰撞范围:0, 0, 0, 0
+#used for placement, and placement of other buildings
 建筑覆盖范围:0, 0, 0, 0
 建筑UI调整:4
 科技等级:1
@@ -18,7 +20,8 @@
 死亡时爆炸类型:buildingNoShockwaveOrSmoke
 autoTriggerCheckWhileNotBuilt:真
 [隐藏行动_未完成]
-自动触发:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1) and 自身有资源(时间=60)
+自动触发:真
+需要条件:if 自身建造完成==false and 队伍中此单位数量(需标签="辅助建造", 范围内=25, 少于=1) and 自身有资源(时间=60)
 产生单位:AI辅助建造
 [动画_idle]
 动画条件:idle
@@ -28,6 +31,7 @@
 缩放效果:真
 [图像]
 总帧数:4
+#image        extractor.png
 背景图像:ROOT:/建筑/资源抽取器/extractor_back.png
 image_back_always_use_full_image:真
 [攻击]
@@ -44,16 +48,21 @@
 最大转弯速度:0
 转弯加速度:0.1
 [AI]
+#ai adds extra rules for placeOnlyOnResPool type units
 建造优先级:0.6
 推荐条件不满足时优先级:0.8
 推荐在每个基地的数量:2
 基地内没有时优先级:0.23
+#noneGlobalExtraPriority 0.3
 AI升级优先级:0.4
 每个基地最大数量:99
+#for the other extractors copying this
 升级自:资源抽取器t1
 [隐藏行动_野矿]
-自动触发:if 队伍中此单位数量(需标签="防御塔", 范围内=180, 少于=1) and 队伍中此单位数量(需标签="家", 范围内=280, 少于=1) and 队伍中此单位数量(需标签="对地", 范围内=300, 少于=2)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="防御塔", 范围内=180, 少于=1) and 队伍中此单位数量(需标签="家", 范围内=280, 少于=1) and 队伍中此单位数量(需标签="对地", 范围内=300, 少于=2)
 临时标签添加:野矿
 [隐藏行动_受保护矿]
-自动触发:if 队伍中此单位数量(需标签="防御塔", 范围内=180, 超过=0) or 队伍中此单位数量(需标签="家", 范围内=280, 超过=0) or 队伍中此单位数量(需标签="对地", 范围内=300, 超过=1)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="防御塔", 范围内=180, 超过=0) or 队伍中此单位数量(需标签="家", 范围内=280, 超过=0) or 队伍中此单位数量(需标签="对地", 范围内=300, 超过=1)
 临时标签删除:野矿

================================================================================
文件: 建筑\资源抽取器\人机造矿.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建造单位\all-units.template
================================================================================

--- scripts/元/人机的玩笑/建造单位\all-units.template
+++ 建造单位\all-units.template
@@ -1,5 +1,7 @@
 [核心]
 复制与:战力模块.ini
+自动触发间隔:2s
+自动触发检查率:每8帧
 [全局资源_AI阶段]
 显示名称:阶段
 显示颜色: #42F2DC
@@ -11,34 +13,33 @@
 隐藏:真
 [资源_抽取]
 隐藏:真
+#求救系统
 [隐藏行动_对地求救]
-自动触发:if (敌人有此单位数量(需标签="家", 范围内=320)+敌人有此单位数量(需标签="对地", 范围内=225)*0.5+敌人有此单位数量(需标签="地190", 范围内=255)+敌人有此单位数量(需标签="地210", 范围内=280)+敌人有此单位数量(需标签="地240", 范围内=310)+敌人有此单位数量(需标签="地310", 范围内=365)+敌人有此单位数量(需标签="地390", 范围内=420)+敌人有此单位数量(需标签="炮塔I", 范围内=180)+敌人有此单位数量(需标签="机枪塔I", 范围内=195)+敌人有此单位数量(需标签="机枪塔II", 范围内=335)+敌人有此单位数量(需标签="火炮塔I", 范围内=365)+敌人有此单位数量(需标签="火炮塔II", 范围内=475)+敌人有此单位数量(需标签="闪电塔I", 范围内=220)+敌人有此单位数量(需标签="闪电塔II", 范围内=260))>=(队伍中此单位数量(需标签="激光防御塔", 范围内=95)+队伍中此单位数量(需标签="对地", 范围内=165)*0.25+0.05) and 自身有标签(包含标签="安全")
+自动触发:真
+需要条件:if (敌人有此单位数量(需标签="家", 范围内=320)+敌人有此单位数量(需标签="对地", 范围内=225)*0.5+敌人有此单位数量(需标签="地190", 范围内=255)+敌人有此单位数量(需标签="地210", 范围内=280)+敌人有此单位数量(需标签="地240", 范围内=310)+敌人有此单位数量(需标签="地310", 范围内=365)+敌人有此单位数量(需标签="地390", 范围内=420)+敌人有此单位数量(需标签="炮塔I", 范围内=180)+敌人有此单位数量(需标签="机枪塔I", 范围内=195)+敌人有此单位数量(需标签="机枪塔II", 范围内=335)+敌人有此单位数量(需标签="火炮塔I", 范围内=365)+敌人有此单位数量(需标签="火炮塔II", 范围内=475)+敌人有此单位数量(需标签="闪电塔I", 范围内=220)+敌人有此单位数量(需标签="闪电塔II", 范围内=260))>=(队伍中此单位数量(需标签="激光防御塔", 范围内=95)+队伍中此单位数量(需标签="对地", 范围内=165)*0.25+0.05) and 自身有标签(包含标签="安全")
 临时标签删除:安全
 临时标签添加:对地求救
 [隐藏行动_对地解除]
-自动触发:if (敌人有此单位数量(需标签="家", 范围内=320)+敌人有此单位数量(需标签="对地", 范围内=225)*0.5+敌人有此单位数量(需标签="地190", 范围内=255)+敌人有此单位数量(需标签="地210", 范围内=280)+敌人有此单位数量(需标签="地240", 范围内=310)+敌人有此单位数量(需标签="地310", 范围内=380)+敌人有此单位数量(需标签="地390", 范围内=420)+敌人有此单位数量(需标签="炮塔I", 范围内=180)+敌人有此单位数量(需标签="机枪塔I", 范围内=195)+敌人有此单位数量(需标签="机枪塔II", 范围内=335)+敌人有此单位数量(需标签="火炮塔I", 范围内=365)+敌人有此单位数量(需标签="火炮塔II", 范围内=475)+敌人有此单位数量(需标签="闪电塔I", 范围内=220)+敌人有此单位数量(需标签="闪电塔II", 范围内=260))<(队伍中此单位数量(需标签="激光防御塔", 范围内=95)+队伍中此单位数量(需标签="对地", 范围内=165)*0.25+0.05) and 自身有标签(包含标签="对地求救")
+自动触发:真
+需要条件:if (敌人有此单位数量(需标签="家", 范围内=320)+敌人有此单位数量(需标签="对地", 范围内=225)*0.5+敌人有此单位数量(需标签="地190", 范围内=255)+敌人有此单位数量(需标签="地210", 范围内=280)+敌人有此单位数量(需标签="地240", 范围内=310)+敌人有此单位数量(需标签="地310", 范围内=380)+敌人有此单位数量(需标签="地390", 范围内=420)+敌人有此单位数量(需标签="炮塔I", 范围内=180)+敌人有此单位数量(需标签="机枪塔I", 范围内=195)+敌人有此单位数量(需标签="机枪塔II", 范围内=335)+敌人有此单位数量(需标签="火炮塔I", 范围内=365)+敌人有此单位数量(需标签="火炮塔II", 范围内=475)+敌人有此单位数量(需标签="闪电塔I", 范围内=220)+敌人有此单位数量(需标签="闪电塔II", 范围内=260))<(队伍中此单位数量(需标签="激光防御塔", 范围内=95)+队伍中此单位数量(需标签="对地", 范围内=165)*0.25+0.05) and 自身有标签(包含标签="对地求救")
 临时标签删除:对地求救
-[隐藏行动_对空求救]
-自动触发:if (队伍中此单位数量(需标签="拦截", 范围内=400)+队伍中此单位数量(需标签="对空", 范围内=320)+队伍中此单位数量(需标签="防空", 范围内=320))<(敌人有此单位数量(需标签="空对地", 范围内=360)) and 自身有标签(包含标签="安全")
-临时标签删除:安全
-临时标签添加:对空求救
-[隐藏行动_对空解除]
-自动触发:if (队伍中此单位数量(需标签="拦截", 范围内=400)+队伍中此单位数量(需标签="对空", 范围内=320)+队伍中此单位数量(需标签="防空", 范围内=320))>=(敌人有此单位数量(需标签="空对地", 范围内=360)) and 自身有标签(包含标签="对空求救")
-临时标签删除:对空求救
 [隐藏行动_安全]
-自动触发:if not 自身有标签(包含标签="对地求救") and not 自身有标签(包含标签="对空求救") or not 敌人有此单位数量(范围内=460, 超过=0)
+自动触发:if not 自身有标签(包含标签="对地求救") or not 敌人有此单位数量(范围内=460, 超过=0)
 需要条件:if 自身资源.逃跑冷却>=0 and not 自身有标签(包含标签="安全") and 自身属于AI控制
 清除所有路径点:真
 用逻辑设置资源:逃跑冷却:-12
 临时标签添加:安全
+#––「逃跑模块」––#
 [资源_逃跑冷却]
 显示名称:逃跑
 [隐藏行动_减少冷却]
-自动触发:if not 自身有标签(包含标签="安全") and 自身资源.逃跑冷却<0 and 自身自定义计时器(指定时间后=1) and 自身属于AI控制
+自动触发:真
+需要条件:if not 自身有标签(包含标签="安全") and 自身资源.逃跑冷却<0 and 自身自定义计时器(指定时间后=1) and 自身属于AI控制
 重置自定义计时器:if 自身自定义计时器(指定时间后=2)
 增加资源:逃跑冷却:1
 [隐藏行动_逃跑]
-自动触发:if not 自身有标签(包含标签="安全") and not 自身有标签(包含标签="已锁定") and 自身属于AI控制 and not 自身有活动的路径点(type='靠近目标')
+自动触发:真
+需要条件:if not 自身有标签(包含标签="安全") and not 自身有标签(包含标签="已锁定") and 自身属于AI控制 and not 自身有活动的路径点(type='靠近目标')
 清除所有路径点:真
 添加路径点序列位置:真
 添加路径点动作类型:靠近目标
@@ -52,9 +53,11 @@
 添加路径点检索标签:家
 添加路径点靠近队伍:己方
 [隐藏行动_无防空保护]
-自动触发:if (队伍中此单位数量(需标签="对空", 范围内=350)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=400))<=0 and not 自身有标签(包含标签="对空")
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="对空", 范围内=350)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=400))<=0 and not 自身有标签(包含标签="对空")
 临时标签添加:无防空保护, 可提取
 [隐藏行动_有防空保护]
-自动触发:if (队伍中此单位数量(需标签="对空", 范围内=350)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=400))>0
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="对空", 范围内=350)+队伍中此单位数量(需标签="家", 范围内=280)+队伍中此单位数量(需标签="防空", 范围内=400))>0
 临时标签删除:无防空保护
 临时标签添加:可提取

================================================================================
文件: 建造单位\建造\AI辅助建造.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\建造\AI辅助建造.ini
+++ 建造单位\建造\AI辅助建造.ini
@@ -5,21 +5,24 @@
 半径:25
 不可选择:真
 禁用碰撞:真
-自动触发间隔:0.2s
-自动触发检查率:everyFrame
+自动触发间隔:16
+自动触发检查率:每8帧
 [图像]
 可见性:假
+#如果 自身有标签(includes="开始建造") 和 存活时间(几秒内=1)
 [运动]
 运动类型:BUILDING
 移动速度:0
 [隐藏行动_需要辅助]
-自动触发:if 队伍中此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)+盟友有此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)>0
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)+盟友有此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)>0
 临时标签添加:辅助建造
 [隐藏行动_开始建造]
-自动触发:if (队伍中此单位数量(需标签="建造", 范围内=110)+盟友有此单位数量(需标签="建造", 范围内=110))>0 or 队伍中此单位数量(需标签="海厂", 包含未完成的=true, 范围内=25, 超过=0) and (队伍中此单位数量(需标签="建造", 范围内=200)+盟友有此单位数量(需标签="建造", 范围内=200))>0
-需要条件:if 自身有标签(包含标签="辅助建造")
+需要条件:if (队伍中此单位数量(需标签="建造", 范围内=110)+盟友有此单位数量(需标签="建造", 范围内=110))>0 or 队伍中此单位数量(需标签="海厂", 包含未完成的=true, 范围内=25, 超过=0) and (队伍中此单位数量(需标签="建造", 范围内=200)+盟友有此单位数量(需标签="建造", 范围内=200))>0
+自动触发:if 自身有标签(包含标签="辅助建造")
 临时标签添加:开始建造
 [隐藏行动_消失]
-自动触发:if 队伍中此单位数量(需标签="建筑物", 范围内=25)+盟友有此单位数量(需标签="建筑物", 范围内=25)>0 or 队伍中此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)+盟友有此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)<1
-需要条件:if 存活时间(指定时间后=1)
+#没有未修好的建筑时消失
+需要条件:if 队伍中此单位数量(需标签="建筑物", 范围内=25)+盟友有此单位数量(需标签="建筑物", 范围内=25)>0 or 队伍中此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)+盟友有此单位数量(需标签="建筑物", 范围内=25, 包含未完成的=true)<1
+自动触发:if 存活时间(指定时间后=1)
 删除自身:真

================================================================================
文件: 建造单位\建造\建造者I.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\建造\建造者I.ini
+++ 建造单位\建造\建造者I.ini
@@ -6,20 +6,21 @@
 """
 tags:建造, 地, 安全
 [隐藏行动_立厂]
-自动触发:if 队伍中此单位数量(需标签="厂", 少于=1, 包含未完成的=true) or 队伍中此单位数量(需标签="空厂", 少于=1, 包含未完成的=true) and not 有全局标签(包含标签="应变位") and 全图中此单位数量(需标签="禁空军", 少于=1) or 队伍中此单位数量(需标签="空厂", 包含未完成的=true)<int(min((自身资源.AI阶段-10)*(0.25+自身资源.AI阶段*0.01), 30)) and 全图中此单位数量(需标签="禁空军", 少于=1) or 队伍中此单位数量(需标签="陆厂", 包含未完成的=true)<int(min((自身资源.AI阶段-10)*0.5, 10)) and 全图中此单位数量(需标签="死路", 范围内=520, 少于=1)
-需要条件:if 队伍中此单位数量(需标签="立厂", 少于=1) and 队伍中此单位数量(需标签="I", 范围内=999, 超过=0) and 自身资源.究极冷却*选择(有全局标签(包含标签="后排"), 0.05, 1)>1.2 and 有全局标签(包含标签="对塔完毕") or 自身有标签(包含标签="立厂")
+需要条件:if 队伍中此单位数量(需标签="厂", 少于=1, 包含未完成的=true) or 队伍中此单位数量(需标签="空厂", 少于=1, 包含未完成的=true) and not 有全局标签(包含标签="应变位") and 全图中此单位数量(需标签="禁空军", 少于=1) or 队伍中此单位数量(需标签="空厂", 包含未完成的=true)<int(min((自身资源.AI阶段-10)*(0.25+自身资源.AI阶段*0.01), 30)) and 全图中此单位数量(需标签="禁空军", 少于=1) or 队伍中此单位数量(需标签="陆厂", 包含未完成的=true)<int(min((自身资源.AI阶段-10)*0.5, 10)) and 全图中此单位数量(需标签="死路", 范围内=520, 少于=1)
+自动触发:if 队伍中此单位数量(需标签="立厂", 少于=1) and 队伍中此单位数量(需标签="I", 范围内=999, 超过=0) and 自身资源.究极冷却*选择(有全局标签(包含标签="后排"), 0.05, 1)>1.2 and 有全局标签(包含标签="对塔完毕") or 自身有标签(包含标签="立厂")
 用逻辑设置资源:究极冷却:0
 清除所有路径点:真
 转换成:建造者I立厂
 [隐藏行动_外出建造]
-自动触发:if 队伍中此单位数量(需标签="外出")<(2+选择(队伍中此单位数量(需标签="建造", 超过=5), 1, 0)) and 队伍中此单位数量(需标签="警戒", 少于=1) or 自身有标签(包含标签="外出")
-需要条件:if 队伍中此单位数量(需标签="厂", 超过=0) or 有全局标签(包含标签="防线") and not 有全局标签(包含标签="对塔完毕")
+需要条件:if 队伍中此单位数量(需标签="外出")<(2+选择(队伍中此单位数量(需标签="建造", 超过=5), 1, 0)) and 队伍中此单位数量(需标签="警戒", 少于=1) or 自身有标签(包含标签="外出")
+自动触发:if 队伍中此单位数量(需标签="厂", 超过=0) or 有全局标签(包含标签="防线") and not 有全局标签(包含标签="对塔完毕")
 临时标签添加:外出
 转换时保留标签:真
 清除所有路径点:真
 转换成:建造者I外出
 [隐藏行动_对塔建造]
-自动触发:if 队伍中此单位数量(需标签="警戒", 超过=0) and 队伍中此单位数量(需标签="对塔", 少于=3)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="警戒", 超过=0) and 队伍中此单位数量(需标签="对塔", 少于=3)
 清除所有路径点:真
 转换成:建造者I对塔
 [隐藏行动_经济建造]
@@ -35,7 +36,8 @@
 更多锁定:if 盟友有此单位数量(需标签="家", 超过=0, 范围内=280) or 队伍中此单位数量(需标签="抽取器t1")+队伍中此单位数量(需标签="抽取器t2")>=1 or 队伍中此单位数量(需标签="抽取器t3p", 少于=1)
 更多锁定消息:不能在盟友基地附近建造该单位
 [隐藏行动_去上班]
-自动触发:if 自身有资源(上班=100) and 存活时间(指定时间后=100) and not 自身有活动的路径点(type='repair')
+自动触发:真
+需要条件:if 自身有资源(上班=100) and 存活时间(指定时间后=100) and not 自身有活动的路径点(type='repair')
 添加路径点动作类型:移动
 用逻辑设置资源:上班:0
 添加指定标签的随机单位:前线, 密集无反
@@ -48,3 +50,4 @@
 name:核弹发射井T1
 pos:10
 可见性:if 自身有资源(AI阶段=18)
+#嘻嘻

================================================================================
文件: 建造单位\建造\建造者I外出.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\建造\建造者I外出.ini
+++ 建造单位\建造\建造者I外出.ini
@@ -6,28 +6,34 @@
 """
 tags:建造, 地, 外出, 安全
 [隐藏行动_锁定]
-自动触发:if 最后转换时间(指定时间内=0.5) and not 自身有活动的路径点(type='攻击') and not 有全局标签(包含标签="对塔完毕")
+自动触发:真
+需要条件:if 最后转换时间(指定时间内=0.5) and not 自身有活动的路径点(type='攻击') and not 有全局标签(包含标签="对塔完毕")
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:建造, I
 添加路径点靠近队伍:敌方
 添加路径点路径可达:真
 [隐藏行动_寻找资源]
-自动触发:if 全图中此单位数量(需标签="资源点", 超过=0) and not 队伍中此单位数量(需标签="可达资源", 超过=1) and (自身资源.存活)%16==0
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="资源点", 超过=0) and not 队伍中此单位数量(需标签="可达资源", 超过=1) and (自身资源.存活)%16==0
 产生单位:陆地资源点
 [隐藏行动_唯一外出]
-自动触发:if 队伍中此单位数量(需标签="外出", 超过=3) and 队伍中此单位数量(需标签="炮塔I", 范围内=280, 少于=1) or 有全局标签(包含标签="对塔完毕") and not 自身有资源(时间=5)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="外出", 超过=3) and 队伍中此单位数量(需标签="炮塔I", 范围内=280, 少于=1) or 有全局标签(包含标签="对塔完毕") and not 自身有资源(时间=5)
 清除所有路径点:真
 转换成:建造者I
 [隐藏行动_唯一守塔]
-自动触发:if 队伍中此单位数量(需标签="外出", 超过=1) and 队伍中此单位数量(需标签="前线", 超过=0) and 队伍中此单位数量(需标签="守塔", 少于=1)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="外出", 超过=1) and 队伍中此单位数量(需标签="前线", 超过=0) and 队伍中此单位数量(需标签="守塔", 少于=1)
 临时标签添加:守塔
 [隐藏行动_对塔建造]
-自动触发:if 队伍中此单位数量(需标签="警戒", 超过=0) and 队伍中此单位数量(需标签="对塔", 少于=3)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="警戒", 超过=0) and 队伍中此单位数量(需标签="对塔", 少于=3)
 清除所有路径点:真
 转换成:建造者I对塔
 [隐藏行动_对塔激光]
-自动触发:if 队伍中此单位数量(需标签="需要激光", 超过=0) and not 自身有活动的路径点
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="需要激光", 超过=0) and not 自身有活动的路径点
 添加路径点动作类型:移动
 添加指定标签的随机单位:需要激光
 添加指定队伍的随机单位:己方
@@ -91,3 +97,4 @@
 spawnUnit:人机激光(跳过条件=true, 对齐网格=true), AI辅助建造(对齐网格=true)
 目标为地面:真
 爆炸效果:无
+#嘻嘻

================================================================================
文件: 建造单位\建造\建造者I立厂.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\建造\建造者I立厂.ini
+++ 建造单位\建造\建造者I立厂.ini
@@ -7,7 +7,8 @@
 @memory 空厂:unit
 @memory 陆厂:unit
 [隐藏行动_检测]
-自动触发:if 内存.家位置==空单位
+自动触发:真
+需要条件:if 内存.家位置==空单位
 清除所有路径点:真
 添加路径点检索标签:I
 添加路径点靠近队伍:己方
@@ -17,23 +18,26 @@
 需要条件:if 自身有活动的路径点(type='攻击')
 设置单位内存:家位置=活动路径点目标
 [隐藏行动_开局立陆厂]
-自动触发:if 队伍中此单位数量(需标签="坦克战", 超过=0) and not 队伍中此单位数量(需标签="厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="坦克战", 超过=0) and not 队伍中此单位数量(需标签="厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
 添加路径点动作类型:建立
 添加路径点单位类型:陆军工厂I
 添加路径点来自参考:创建标记(x=内存.家位置.x+rnd(-95, 95), y=内存.家位置.y+rnd(-95, 95))
 [隐藏行动_开局立机械厂]
-自动触发:if 队伍中此单位数量(需标签="机械战", 超过=0) and not 队伍中此单位数量(需标签="厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="机械战", 超过=0) and not 队伍中此单位数量(需标签="厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
 添加路径点动作类型:建立
 添加路径点单位类型:机械工厂I
 添加路径点来自参考:创建标记(x=内存.家位置.x+rnd(-95, 95), y=内存.家位置.y+rnd(-95, 95))
 [隐藏行动_开局立空厂]
-自动触发:if 有全局标签(包含标签="空军") and not 队伍中此单位数量(需标签="厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
+自动触发:真
+需要条件:if 有全局标签(包含标签="空军") and not 队伍中此单位数量(需标签="厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
 添加路径点动作类型:建立
 添加路径点单位类型:空军基地I
 添加路径点来自参考:创建标记(x=内存.家位置.x+rnd(-95, 95), y=内存.家位置.y+rnd(-95, 95))
 [隐藏行动_立空厂]
-自动触发:if 队伍中此单位数量(需标签="空厂", 包含未完成的=true)<int(min((自身资源.AI阶段-10)*(0.25+自身资源.AI阶段*0.01), 20)) and 队伍中此单位数量(需标签="厂", 超过=0) or 队伍中此单位数量(需标签="空厂", 少于=1, 包含未完成的=true) and 2>(队伍中此单位数量(需标签="厂", 包含未完成的=true))>0 and not 有全局标签(包含标签="应变位")
-需要条件:if 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
+需要条件:if 队伍中此单位数量(需标签="空厂", 包含未完成的=true)<int(min((自身资源.AI阶段-10)*(0.25+自身资源.AI阶段*0.01), 20)) and 队伍中此单位数量(需标签="厂", 超过=0) or 队伍中此单位数量(需标签="空厂", 少于=1, 包含未完成的=true) and 2>(队伍中此单位数量(需标签="厂", 包含未完成的=true))>0 and not 有全局标签(包含标签="应变位")
+自动触发:if 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
 添加路径点动作类型:建立
 添加路径点单位类型:空军基地I
 添加路径点来自参考:创建标记(x=内存.家位置.x+rnd(-95, 95), y=内存.家位置.y+rnd(-95, 95))
@@ -45,13 +49,15 @@
 指定攻击地面炮塔:陆厂
 指定攻击地面坐标:0, 0
 [隐藏行动_立实验厂]
-自动触发:if 自身有资源(AI阶段=15) and 队伍中此单位数量(需标签="实验工厂I", 少于=1)
+自动触发:真
+需要条件:if 自身有资源(AI阶段=15) and 队伍中此单位数量(需标签="实验工厂I", 少于=1)
 添加路径点动作类型:移动
 添加路径点随机偏移:99, 99
 指定攻击地面炮塔:实验厂
 指定攻击地面坐标:0, 0
 [隐藏行动_转]
-自动触发:if 队伍中此单位数量(需标签="厂", 超过=0) and 队伍中此单位数量(需标签="空厂", 包含未完成的=true)>=int(min((自身资源.AI阶段-10)*(0.025+自身资源.AI阶段*0.0125), 15)) and 队伍中此单位数量(需标签="陆厂", 包含未完成的=true)>=int(min((自身资源.AI阶段-10)*0.3, 10)) and 最后转换时间(指定时间后=3)
+需要条件:if 队伍中此单位数量(需标签="厂", 超过=0) and 队伍中此单位数量(需标签="空厂", 包含未完成的=true)>=int(min((自身资源.AI阶段-10)*(0.025+自身资源.AI阶段*0.0125), 15)) and 队伍中此单位数量(需标签="陆厂", 包含未完成的=true)>=int(min((自身资源.AI阶段-10)*0.3, 10)) and 最后转换时间(指定时间后=3)
+自动触发:真
 清除所有路径点:真
 转换成:建造者I
 [炮塔_陆厂]
@@ -114,3 +120,4 @@
 spawnUnit:人机实验厂(跳过条件=true, 对齐网格=true), AI辅助建造(对齐网格=true)
 目标为地面:真
 爆炸效果:无
+#

================================================================================
文件: 建造单位\建造\建造者I维修.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\建造\建造者I维修.ini
+++ 建造单位\建造\建造者I维修.ini
@@ -6,10 +6,12 @@
 可以自动修:真
 维修或建造范围:200
 [隐藏行动_去建造]
-自动触发:if not 自身有活动的路径点(type='repair') and 自身在移动
+自动触发:真
+需要条件:if not 自身有活动的路径点(type='repair') and 自身在移动
 清除所有路径点:真
 [隐藏行动_建造完毕]
-自动触发:if (队伍中此单位数量(需标签="开始建造", 范围内=200)+盟友有此单位数量(需标签="开始建造", 范围内=200))==0
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="开始建造", 范围内=200)+盟友有此单位数量(需标签="开始建造", 范围内=200))==0
 临时标签删除:已锁定, 维修, 正在对塔, 对塔
 转换时保留标签:真
 转换成:建造者I
@@ -43,3 +45,4 @@
 spawnUnit:人机激光(跳过条件=true, 对齐网格=true), AI辅助建造(对齐网格=true)
 目标为地面:真
 爆炸效果:无
+#嘻嘻

================================================================================
文件: 建造单位\建造\建造者基础.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\建造\建造者基础.ini
+++ 建造单位\建造\建造者基础.ini
@@ -1,5 +1,6 @@
 [核心]
 name:建造者基础
+tags:无
 界面显示内部调用:builder
 class:CustomUnitMetadata
 价格:500
@@ -59,6 +60,7 @@
 每个基地最大数量:5
 用作建造者:真
 [隐藏行动_变]
-自动触发:if not 自身属于AI控制
+自动触发:真
+需要条件:if not 自身属于AI控制
 清除所有路径点:真
 转换成:毒-建造者

================================================================================
文件: 建造单位\建造\建造者模版.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\建造\建造者模版.ini
+++ 建造单位\建造\建造者模版.ini
@@ -24,18 +24,23 @@
 name:陆军工厂I
 pos:21
 可见性:if 自身有资源(时间=144)
+#1.空军或海军最多放置三个 2.非坦克战法需要10阶段 3.非陆军需要空厂超过0
 更多锁定:if 队伍中此单位数量(需标签="陆厂", 超过=2) and 队伍中此单位数量(需标签="坦克战", 少于=1) or 队伍中此单位数量(需标签="坦克战", 少于=1) and not 自身有资源(AI阶段=10) or not 有全局标签(包含标签="陆军") and not 队伍中此单位数量(需标签="空厂", 超过=0) or 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 队伍中此单位数量(需标签="陆厂", 范围内=520, 超过=0)
 更多锁定消息:暂时放置上限
 [可建造_22]
 name:空军基地I
 pos:22
 可见性:if 自身有资源(时间=144)
+#如果是陆军或海军，没有厂时不可放置
 更多锁定:if not 有全局标签(包含标签="空军") and not 队伍中此单位数量(需标签="厂", 超过=0) or 自身有标签(包含标签="应变位") and not 自身有资源(AI阶段=10)
 更多锁定消息:暂时不可放置
+#陆图 开局1前期2
+#海空 开局0前期1
 [可建造_23]
 name:机械工厂I
 pos:23
 可见性:if 自身有资源(时间=144)
+#如果是空军或海军，最多2机械 1.如果不是机械战法，需要10阶段
 更多锁定:if 队伍中此单位数量(需标签="机械厂", 超过=1) and 队伍中此单位数量(需标签="机械战", 少于=1) or 队伍中此单位数量(需标签="机械战", 少于=1) and not 自身有资源(AI阶段=10) or 有全局标签(包含标签="空军") and not 队伍中此单位数量(需标签="空厂", 超过=0) or 有全局标签(包含标签="海军") and not 队伍中此单位数量(需标签="空厂", 超过=0) or 全图中此单位数量(需标签="死路", 范围内=520, 超过=0) and 队伍中此单位数量(需标签="机械厂", 范围内=520, 超过=0)
 更多锁定消息:暂时放置上限
 [可建造_24]
@@ -95,6 +100,7 @@
 spawnUnit:人机反核(跳过条件=true, 对齐网格=true), AI辅助建造(对齐网格=true)
 目标为地面:真
 爆炸效果:无
+#回收
 [资源_究极冷却]
 隐藏:真
 [资源_上班]

================================================================================
文件: 建造单位\开局模块.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\开局模块.ini
+++ 建造单位\开局模块.ini
@@ -46,8 +46,14 @@
 添加路径点单位类型:炮塔T1
 添加路径点来自参考:创建标记(x=内存.资源点.x+选择(有全局标签(包含标签="左右图"), 选择(有全局标签(包含标签="图左"), 75-(int(rnd(0, 3))*25), (int(rnd(0, 3))*25)-75), rnd(-75, 75)), y=内存.资源点.y+选择(有全局标签(包含标签="上下图"), 选择(有全局标签(包含标签="图上"), 75-(int(rnd(0, 3))*25), (int(rnd(0, 3))*25)-75), rnd(-75, 75)))
 [隐藏行动_没有在建造]
-自动触发:if not 自身有活动的路径点(type='建立') and not 自身有活动的路径点(type='repair') and 队伍中此单位数量(需标签="建筑物", 范围内=100, 包含未完成的=true)-(队伍中此单位数量(需标签="建筑物", 范围内=100))==0
+自动触发:真
+需要条件:if not 自身有活动的路径点(type='建立') and not 自身有活动的路径点(type='repair') and 队伍中此单位数量(需标签="建筑物", 范围内=100, 包含未完成的=true)-(队伍中此单位数量(需标签="建筑物", 范围内=100))==0
 临时标签删除:正在建造
+#   y-
+#x-     x+
+#   y+
+#左右图 x
+#上下图 y
 [隐藏行动_检索敌方目标]
 自动触发:真
 提取资源仅搜索:真
@@ -95,15 +101,15 @@
 需要条件:if 内存.敌方目标!=空单位 and 敌人有此单位数量(需标签="对地", 少于=1, 范围内=210, 包含未完成的=true) and (队伍中此单位数量(需标签="辅助建造", 范围内=200)+盟友有此单位数量(需标签="辅助建造", 范围内=110)+队伍中此单位数量(需标签="正在建造", 范围内=200)+盟友有此单位数量(需标签="正在建造", 范围内=200))<1 and 队伍中此单位数量(需标签="需要补充", 超过=0) and 自身有标签(包含标签="安全") and 队伍中此单位数量(需标签="炮塔I", 少于=1)
 也执行动作:放塔1, 放塔2, 放塔3
 [隐藏行动_后续对塔]
-自动触发:if 队伍中此单位数量(需标签="炮塔I", 超过=0, 范围内=120) and (队伍中此单位数量(需标签="辅助建造", 范围内=120)+盟友有此单位数量(需标签="辅助建造", 范围内=120))<1 and not 自身有资源(时间=100) and 内存.炮塔位置!=空单位 and not 自身有活动的路径点(type='建立') and 有全局标签(包含标签="防线")
-需要条件:if 队伍中此单位数量(需标签="炮塔I", 少于=3)
+需要条件:if 队伍中此单位数量(需标签="炮塔I", 超过=0, 范围内=120) and (队伍中此单位数量(需标签="辅助建造", 范围内=120)+盟友有此单位数量(需标签="辅助建造", 范围内=120))<1 and not 自身有资源(时间=100) and 内存.炮塔位置!=空单位 and not 自身有活动的路径点(type='建立') and 有全局标签(包含标签="防线")
+自动触发:if 队伍中此单位数量(需标签="炮塔I", 少于=3)
 清除所有路径点:真
 添加路径点动作类型:建立
 添加路径点单位类型:炮塔T1
 添加路径点来自参考:创建标记(x=内存.炮塔位置.x+选择(有全局标签(包含标签="左右图"), 选择(有全局标签(包含标签="图左"), 25, -25), rnd(-45, 45)), y=内存.炮塔位置.y+选择(有全局标签(包含标签="上下图"), 选择(有全局标签(包含标签="图上"), 25, -25), rnd(-45, 45)))
 [隐藏行动_后续激光]
-自动触发:if 队伍中此单位数量(需标签="炮塔I", 超过=0, 范围内=120) and (队伍中此单位数量(需标签="辅助建造", 范围内=120)+盟友有此单位数量(需标签="辅助建造", 范围内=120))<1 and not 自身有资源(时间=100) and 内存.炮塔位置!=空单位 and not 自身有活动的路径点(type='建立') and 有全局标签(包含标签="防线")
-需要条件:if 队伍中此单位数量(需标签="炮塔I", 超过=1) and 队伍中此单位数量(需标签="激光防御塔", 少于=1) and 队伍中此单位数量(需标签="请求激光", 超过=0)
+需要条件:if 队伍中此单位数量(需标签="炮塔I", 超过=0, 范围内=120) and (队伍中此单位数量(需标签="辅助建造", 范围内=120)+盟友有此单位数量(需标签="辅助建造", 范围内=120))<1 and not 自身有资源(时间=100) and 内存.炮塔位置!=空单位 and not 自身有活动的路径点(type='建立') and 有全局标签(包含标签="防线")
+自动触发:if 队伍中此单位数量(需标签="炮塔I", 超过=1) and 队伍中此单位数量(需标签="激光防御塔", 少于=1) and 队伍中此单位数量(需标签="请求激光", 超过=0)
 清除所有路径点:真
 添加路径点动作类型:建立
 添加路径点单位类型:激光防御塔

================================================================================
文件: 建造单位\战力模块.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\战力模块.ini
+++ 建造单位\战力模块.ini
@@ -1,12 +1,15 @@
 [核心]
 禁止加载:真
 @memory 战力涨幅:number[]
+#––「资源」––#
 [资源_战力]
 显示名称:战力
 [资源_对空战力]
 显示名称:对空战力
+#––「设定」––#
 [隐藏行动_战力修正]
-自动触发:if 自身自定义计时器(指定时间后=1)
+自动触发:真
+需要条件:if 自身自定义计时器(指定时间后=1)
 重置自定义计时器:真
 设置单位内存:战力涨幅[0]=1+(队伍中此单位数量(需标签="建造", 范围内=210)*0.3+盟友有此单位数量(需标签="建造", 范围内=210)*0.15+队伍中此单位数量(需标签="对地", 范围内=210)*0.05+盟友有此单位数量(需标签="对地", 范围内=210)*0.05+队伍中此单位数量(需标签="炮塔I", 范围内=210)*0.125+盟友有此单位数量(需标签="炮塔I", 范围内=210)*0.125+队伍中此单位数量(需标签="激光防御塔", 范围内=210)*0.09+盟友有此单位数量(需标签="激光防御塔", 范围内=210)*0.09)*1, 战力涨幅[1]=1+(队伍中此单位数量(需标签="建造", 范围内=210)*0.3+盟友有此单位数量(需标签="建造", 范围内=210)*0.15+队伍中此单位数量(需标签="对空", 范围内=210)*0.05+盟友有此单位数量(需标签="对空", 范围内=210)*0.05+队伍中此单位数量(需标签="防空", 范围内=210)*0.125+盟友有此单位数量(需标签="防空", 范围内=210)*0.125+队伍中此单位数量(需标签="激光防御塔", 范围内=210)*0.09+盟友有此单位数量(需标签="激光防御塔", 范围内=210)*0.09)*1
 用逻辑设置资源:战力=(选择(队伍中此单位数量(需标签="炮塔I", 范围内=210, 超过=0), 自身最大血量*0.025, 自身最大血量*0.015)*内存.战力涨幅[0])*(0.4+(自身血量/自身最大血量)*0.6), 对空战力=(选择(队伍中此单位数量(需标签="防空", 范围内=210, 超过=0), 自身最大血量*0.025, 自身最大血量*0.015)*内存.战力涨幅[0])*(0.4+(自身血量/自身最大血量)*0.6)

================================================================================
文件: 建造单位\战斗工程师\战斗工程师.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建造单位\战斗工程师\战斗工程师I.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\战斗工程师\战斗工程师I.ini
+++ 建造单位\战斗工程师\战斗工程师I.ini
@@ -5,14 +5,17 @@
 自动触发事件:创建
 需要条件:if not 自身属于AI控制
 转换成:战斗工程师T1
+#建造模块
 [隐藏行动_辅助建造]
-自动触发:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair')
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair')
 AI高优先级:真
 添加路径点动作类型:靠近目标
 添加路径点检索标签:辅助建造
 添加路径点路径可达:真
 [隐藏行动_建造中]
-自动触发:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair')
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair')
 临时标签添加:安全
 AI高优先级:真
 清除所有路径点:真

================================================================================
文件: 建造单位\机械师\机械师.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建造单位\机械师\机械师I.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\机械师\机械师I.ini
+++ 建造单位\机械师\机械师I.ini
@@ -5,11 +5,14 @@
 自动触发事件:创建
 需要条件:if not 自身属于AI控制
 转换成:机械师T1
+#建造模块
 [隐藏行动_辅助建造]
-自动触发:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair')
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair')
 添加路径点动作类型:靠近目标
 添加路径点检索标签:辅助建造
 [隐藏行动_建造中]
-自动触发:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair')
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair')
 临时标签添加:安全
 清除所有路径点:真

================================================================================
文件: 建造单位\海上建造者\海上建造者.ini
================================================================================

(内容完全相同)

================================================================================
文件: 建造单位\海上建造者\海上建造者I.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\海上建造者\海上建造者I.ini
+++ 建造单位\海上建造者\海上建造者I.ini
@@ -5,14 +5,17 @@
 自动触发事件:创建
 需要条件:if not 自身属于AI控制
 转换成:海上建造者T1
+#建造模块
 [隐藏行动_辅助建造]
-自动触发:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair')
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="辅助建造", 范围内=666)+盟友有此单位数量(需标签="辅助建造", 范围内=460))>0 and not 自身有活动的路径点(type='repair')
 AI高优先级:真
 添加路径点动作类型:follow
 添加路径点检索标签:辅助建造
 添加路径点路径可达:真
 [隐藏行动_建造中]
-自动触发:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair')
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="开始建造", 范围内=95)+盟友有此单位数量(需标签="开始建造", 范围内=95))>0 and not 自身有活动的路径点(type='repair')
 临时标签添加:安全
 AI高优先级:真
 清除所有路径点:真

================================================================================
文件: 建造单位\海厂模块.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\海厂模块.ini
+++ 建造单位\海厂模块.ini
@@ -1,9 +1,10 @@
 [核心]
 禁止加载:真
 @memory 海厂锚点:unit
+#当确定为海图时，并且自身为前排即可建造海厂，如果为陆图，需要非防线位的陆军前排建造海厂
 [隐藏行动_去造海厂]
-自动触发:if 队伍中此单位数量(需标签="海厂锚点")+盟友有此单位数量(需标签="海厂锚点")>0 and not 自身有活动的路径点(type="建立") and not 自身有活动的路径点(type="follow") and 自身有标签(包含标签="安全") and 队伍中此单位数量(需标签="海厂", 包含未完成的=true)<int(max(自身资源.AI阶段/5, 1)) and 队伍中此单位数量(需标签="建造海厂", 少于=2) and 内存.海厂锚点==空单位
-需要条件:if 有全局标签(包含标签="前排") and 有全局标签(包含标签="应变位") or 有全局标签(包含标签="前排") and 有全局标签(包含标签="对塔完毕") or 有全局标签(包含标签="海军") and 有全局标签(包含标签="前排") or 自身有资源(AI阶段=10)
+需要条件:if 队伍中此单位数量(需标签="海厂锚点")+盟友有此单位数量(需标签="海厂锚点")>0 and not 自身有活动的路径点(type="建立") and not 自身有活动的路径点(type="follow") and 自身有标签(包含标签="安全") and 队伍中此单位数量(需标签="海厂", 包含未完成的=true)<int(max(自身资源.AI阶段/5, 1)) and 队伍中此单位数量(需标签="建造海厂", 少于=2) and 内存.海厂锚点==空单位
+自动触发:if 有全局标签(包含标签="前排") and 有全局标签(包含标签="应变位") or 有全局标签(包含标签="前排") and 有全局标签(包含标签="对塔完毕") or 有全局标签(包含标签="海军") and 有全局标签(包含标签="前排") or 自身有资源(AI阶段=10)
 临时标签添加:建造海厂
 添加路径点动作类型:follow
 添加路径点检索标签:海厂锚点
@@ -11,8 +12,8 @@
 添加路径点路径可达:假
 清除所有路径点:真
 [隐藏行动_检索锚点]
-自动触发:if 队伍中此单位数量(需标签="海厂锚点", 范围内=300)+盟友有此单位数量(需标签="海厂锚点", 范围内=300)>0 or 队伍中此单位数量(需标签="海厂", 范围内=300)+盟友有此单位数量(需标签="海厂", 范围内=300)>0
-需要条件:if 自身有标签(包含标签="建造海厂")
+需要条件:if 队伍中此单位数量(需标签="海厂锚点", 范围内=300)+盟友有此单位数量(需标签="海厂锚点", 范围内=300)>0 or 队伍中此单位数量(需标签="海厂", 范围内=300)+盟友有此单位数量(需标签="海厂", 范围内=300)>0
+自动触发:if 自身有标签(包含标签="建造海厂")
 提取资源仅搜索:真
 提取资源范围:300
 提取资源队伍:盟友
@@ -23,7 +24,8 @@
 需要条件:if 队伍中此单位数量(需标签="海厂", 范围内=300, 少于=1) and 当前动作目标.tags(包含标签='海厂锚点') or 当前动作目标.tags(包含标签='海厂')
 设置单位内存:海厂锚点=当前动作目标
 [隐藏行动_不可建造]
-自动触发:if 队伍中此单位数量(需标签="海厂", 包含未完成的=true)>=int(max(自身资源.AI阶段/5, 1)) and 自身有标签(包含标签="建造海厂") or 自身有标签(包含标签="外出")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="海厂", 包含未完成的=true)>=int(max(自身资源.AI阶段/5, 1)) and 自身有标签(包含标签="建造海厂") or 自身有标签(包含标签="外出")
 临时标签删除:建造海厂
 设置单位内存:海厂锚点=空单位
 也执行动作:清除路径
@@ -31,7 +33,8 @@
 需要条件:if 自身有活动的路径点(type='follow')
 清除所有路径点:真
 [隐藏行动_造海厂]
-自动触发:if 内存.海厂锚点!=空单位 and 位距(内存.海厂锚点, self)<=280 and not 自身有活动的路径点(type="建立") and 自身有标签(包含标签="建造海厂")
+自动触发:真
+需要条件:if 内存.海厂锚点!=空单位 and 位距(内存.海厂锚点, self)<=280 and not 自身有活动的路径点(type="建立") and 自身有标签(包含标签="建造海厂")
 添加路径点动作类型:建立
 添加路径点单位类型:海军基地I
 添加路径点来自参考:创建标记(x=内存.海厂锚点.x+int(rnd(-4, 4))*30, y=内存.海厂锚点.y+int(rnd(-4, 4))*30)

================================================================================
文件: 建造单位\特殊建造\建造者I对塔.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\特殊建造\建造者I对塔.ini
+++ 建造单位\特殊建造\建造者I对塔.ini
@@ -4,7 +4,8 @@
 tags:建造, 地, 对塔, 安全
 @memory 家位置:unit
 [隐藏行动_检测]
-自动触发:if 内存.家位置==空单位
+自动触发:真
+需要条件:if 内存.家位置==空单位
 清除所有路径点:真
 添加路径点检索标签:I
 添加路径点靠近队伍:己方
@@ -19,18 +20,21 @@
 清除所有路径点:真
 转换成:建造者I
 [隐藏行动_对塔激光]
-自动触发:if 队伍中此单位数量(需标签="需要激光", 超过=0) and not 自身有活动的路径点
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="需要激光", 超过=0) and not 自身有活动的路径点
 添加路径点动作类型:移动
 添加指定标签的随机单位:需要激光
 添加指定队伍的随机单位:己方
 [隐藏行动_保护家]
-自动触发:if 队伍中此单位数量(需标签="无保护", 范围内=280, 超过=0) and 队伍中此单位数量(需标签="炮塔I", 范围内=185, 少于=2, 包含未完成的=true) and not 自身有活动的路径点(type='建立')
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="无保护", 范围内=280, 超过=0) and 队伍中此单位数量(需标签="炮塔I", 范围内=185, 少于=2, 包含未完成的=true) and not 自身有活动的路径点(type='建立')
 清除所有路径点:真
 添加路径点动作类型:建立
 添加路径点单位类型:炮塔T1
 添加路径点来自参考:创建标记(x=内存.家位置.x+选择(有全局标签(包含标签="左右图"), 选择(有全局标签(包含标签="图左"), 30, -30), rnd(-50, 50)), y=内存.家位置.y+选择(有全局标签(包含标签="上下图"), 选择(有全局标签(包含标签="图上"), 30, -30), rnd(-50, 50)))
 [隐藏行动_激光防御]
-自动触发:if 队伍中此单位数量(需标签="激光防御塔", 范围内=192, 包含未完成的=true)<max(自身资源.AI阶段/5, 1) and 队伍中此单位数量(需标签="炮塔I", 范围内=125, 超过=0, 包含未完成的=true) and 队伍中此单位数量(需标签="需要激光", 超过=0, 范围内=120) and 自身自定义计时器(指定时间后=1)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="激光防御塔", 范围内=192, 包含未完成的=true)<max(自身资源.AI阶段/5, 1) and 队伍中此单位数量(需标签="炮塔I", 范围内=125, 超过=0, 包含未完成的=true) and 队伍中此单位数量(需标签="需要激光", 超过=0, 范围内=120) and 自身自定义计时器(指定时间后=1)
 清除所有路径点:真
 用逻辑设置资源:冷却:选择(敌人有此单位数量(需标签="建造", 范围内=435)+敌人有此单位数量(需标签="对地", 范围内=435)+敌人有此单位数量(需标签="建筑物", 范围内=435, 包含未完成的=true)>0, 自身资源.AI阶段-60, 30)
 指定攻击地面炮塔:激光
@@ -96,3 +100,4 @@
 spawnUnit:人机激光(跳过条件=true, 对齐网格=true), AI辅助建造(对齐网格=true)
 目标为地面:真
 爆炸效果:无
+#嘻嘻

================================================================================
文件: 建造单位\特殊建造\建造者I小坦速攻.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\特殊建造\建造者I小坦速攻.ini
+++ 建造单位\特殊建造\建造者I小坦速攻.ini
@@ -7,10 +7,12 @@
 canBuild_1_name:reclaim
 canBuild_1_pos:-1
 [隐藏行动_检测]
-自动触发:if 内存.家位置==空单位
+自动触发:真
+需要条件:if 内存.家位置==空单位
 设置单位内存:家位置=全局检查第一个单位(relation='己方', 需标签='I')
 [隐藏行动_开局立陆厂]
-自动触发:if 队伍中此单位数量(需标签="小坦速攻", 超过=0) and not 队伍中此单位数量(需标签="厂", 超过=1, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="小坦速攻", 超过=0) and not 队伍中此单位数量(需标签="厂", 超过=1, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
 添加路径点动作类型:建立
 添加路径点单位类型:陆军工厂I
 添加路径点来自参考:创建标记(x=内存.家位置.x+int(rnd(-4, 4))*30, y=内存.家位置.y+int(rnd(-4, 4))*30)
@@ -19,6 +21,7 @@
 pos:21
 可见性:if 自身有资源(时间=144)
 [隐藏行动_转]
-自动触发:if 队伍中此单位数量(需标签="厂", 超过=1, 包含未完成的=true)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="厂", 超过=1, 包含未完成的=true)
 清除所有路径点:真
 转换成:建造者I

================================================================================
文件: 建造单位\特殊建造\建造者I抢矿.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\特殊建造\建造者I抢矿.ini
+++ 建造单位\特殊建造\建造者I抢矿.ini
@@ -6,7 +6,8 @@
 canBuild_1_name:reclaim
 canBuild_1_pos:-1
 [隐藏行动_寻找资源]
-自动触发:if 全图中此单位数量(需标签="资源点", 超过=0) and not 队伍中此单位数量(需标签="家矿点", 超过=0) and (自身资源.时间)%2==0
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="资源点", 超过=0) and not 队伍中此单位数量(需标签="家矿点", 超过=0) and (自身资源.时间)%2==0
 产生单位:抢矿中
 [隐藏行动_抢矿]
 自动触发:真
@@ -17,8 +18,10 @@
 添加路径点检索标签:家矿点
 添加路径点靠近队伍:己方
 [隐藏行动_好吃]
+#自动触发:if self.hasActiveWaypoint(type='repair') and activeWaypointTarget.tags(includes='经济') and 自身自定义计时器(几秒后=7)
 重置自定义计时器:真
 发送消息至所有:%{自身队伍id+1}号AI：好吃嘻嘻
+#嘻嘻
 [可建造_4]
 name:资源仪I
 pos:4

================================================================================
文件: 建造单位\特殊建造\建造者I甲空速攻.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\特殊建造\建造者I甲空速攻.ini
+++ 建造单位\特殊建造\建造者I甲空速攻.ini
@@ -7,16 +7,18 @@
 canBuild_1_name:reclaim
 canBuild_1_pos:-1
 [隐藏行动_检测]
-自动触发:if 内存.家位置==空单位
+自动触发:真
+需要条件:if 内存.家位置==空单位
 设置单位内存:家位置=全局检查第一个单位(relation='己方', 需标签='I')
 [隐藏行动_开局立甲厂]
-自动触发:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and not 队伍中此单位数量(需标签="机械厂", 超过=1, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
-需要条件:if not 有全局标签(包含标签="空军") or 队伍中此单位数量(需标签="机械厂", 少于=1, 包含未完成的=true)
+需要条件:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and not 队伍中此单位数量(需标签="机械厂", 超过=1, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立')
+自动触发:if not 有全局标签(包含标签="空军") or 队伍中此单位数量(需标签="机械厂", 少于=1, 包含未完成的=true)
 添加路径点动作类型:建立
 添加路径点单位类型:机械工厂I
 添加路径点来自参考:创建标记(x=内存.家位置.x+int(rnd(-4, 4))*30, y=内存.家位置.y+int(rnd(-4, 4))*30)
 [隐藏行动_开局立空厂]
-自动触发:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and not 队伍中此单位数量(需标签="空厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立') and 有全局标签(包含标签="空军")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="甲空速攻", 超过=0) and not 队伍中此单位数量(需标签="空厂", 超过=0, 包含未完成的=true) and 内存.家位置!=空单位 and not 自身有活动的路径点(type='建立') and 有全局标签(包含标签="空军")
 添加路径点动作类型:建立
 添加路径点单位类型:空军基地I
 添加路径点来自参考:创建标记(x=内存.家位置.x+int(rnd(-4, 4))*30, y=内存.家位置.y+int(rnd(-4, 4))*30)
@@ -29,6 +31,7 @@
 pos:21
 可见性:if 自身有资源(时间=144)
 [隐藏行动_转]
-自动触发:if 队伍中此单位数量(需标签="厂", 超过=1, 包含未完成的=true)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="厂", 超过=1, 包含未完成的=true)
 清除所有路径点:真
 转换成:建造者I

================================================================================
文件: 建造单位\特殊建造\建造者I经济.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\特殊建造\建造者I经济.ini
+++ 建造单位\特殊建造\建造者I经济.ini
@@ -10,11 +10,13 @@
 更多锁定2:if 盟友有此单位数量(需标签="家", 超过=0, 范围内=280)
 更多锁定消息2:不能在盟友基地附近建造该单位
 [隐藏行动_去上班]
-自动触发:if 自身有资源(上班=45) and not 自身有活动的路径点(type='repair') and 队伍中此单位数量(需标签="经济", 范围内=180, 少于=1)
+自动触发:真
+需要条件:if 自身有资源(上班=45) and not 自身有活动的路径点(type='repair') and 队伍中此单位数量(需标签="经济", 范围内=180, 少于=1)
 添加路径点动作类型:移动
 用逻辑设置资源:上班:0
 添加指定标签的随机单位:经济
 添加指定队伍的随机单位:己方
 [隐藏行动_经济建造]
-自动触发:if 队伍中此单位数量(需标签="蛋")<int((自身资源.AI阶段-10)*(1+自身资源.AI阶段*0.025)) or 队伍中此单位数量(需标签="经济建造者", 超过=1) or (队伍中此单位数量(需标签="前线", 范围内=400)+盟友有此单位数量(需标签="前线", 范围内=400))>0 or (队伍中此单位数量(需标签="家", 范围内=999)+盟友有此单位数量(需标签="家", 范围内=999))==0
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="蛋")<int((自身资源.AI阶段-10)*(1+自身资源.AI阶段*0.025)) or 队伍中此单位数量(需标签="经济建造者", 超过=1) or (队伍中此单位数量(需标签="前线", 范围内=400)+盟友有此单位数量(需标签="前线", 范围内=400))>0 or (队伍中此单位数量(需标签="家", 范围内=999)+盟友有此单位数量(需标签="家", 范围内=999))==0
 转换成:建造者I

================================================================================
文件: 建造单位\玩家单位\建造者\建造者.ini
================================================================================

--- scripts/元/人机的玩笑/建造单位\玩家单位\建造者\建造者.ini
+++ 建造单位\玩家单位\建造者\建造者.ini
@@ -5,6 +5,8 @@
 价格:500
 生命值:170
 质量:9000
+#includse-
+#shieldRegen 0.1
 tags:建造, 地
 是建造者:真
 科技等级:1
@@ -53,6 +55,9 @@
 image:builder.png
 死亡图像:builder_dead.png
 炮塔图像:无
+#scaleImagesTo 20
+#scaleTurretImagesTo 9
+#AUTO
 image_shadow:AUTO
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -73,6 +78,7 @@
 移动速度:0.8
 加速度:0.03
 减速度:0.08
+#targetHeight 2
 最大转弯速度:3.5
 转弯加速度:0.25
 移动后滑动:真
@@ -88,8 +94,10 @@
 需要条件:if 队伍中此单位数量(需标签="炮塔I", 范围内=95, 少于=1)
 临时标签添加:挨打
 [隐藏行动_结束挨打]
-自动触发:if 敌人有此单位数量(需标签="I", 范围内=888, 少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="I", 范围内=888, 少于=1)
 临时标签删除:挨打
 [隐藏行动_变]
-自动触发:if 自身属于AI控制
+自动触发:真
+需要条件:if 自身属于AI控制
 转换成:建造者I

================================================================================
文件: 机制\开局\幸运单位模式(欧皇).ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\幸运单位模式(欧皇).ini
+++ 机制\开局\幸运单位模式(欧皇).ini
@@ -59,11 +59,13 @@
 自动触发事件:创建
 产生单位:等待台, 等待开始(偏移量x=0, 偏移量y=60)
 [隐藏行动_随机]
-自动触发:if not 自身有资源(刷新时间=0.1)
+自动触发:真
+需要条件:if not 自身有资源(刷新时间=0.1)
 增加资源:刷新时间=66.66
 发送消息至玩家:单位已刷新
 播放声音至玩家:lighting_burst
 产生效果:爆炸特效
 生产单位:猛犸坦克I(产生机会=0.04348, 最大产生限制=1), 飞行机甲(产生机会=0.04545, 最大产生限制=1), 重型坦克T1(产生机会=0.04762, 最大产生限制=6), mechMinigun(产生机会=0.05, 最大产生限制=1), mechLaser(产生机会=0.05263, 最大产生限制=1), mechHeavyMissile(产生机会=0.05556, 最大产生限制=1), 战斗工程师T1(产生机会=0.05882, 最大产生限制=1), mechFlame(产生机会=0.0625, 最大产生限制=1), 猛犸坦克I(产生机会=0.06667, 最大产生限制=1), mechEngineer(产生机会=0.07143, 最大产生限制=1), 轰炸机T1(产生机会=0.07692, 最大产生限制=3), AA激光射束战机(产生机会=0.08333, 最大产生限制=1), nautilusSubmarineLand(产生机会=0.0909, 最大产生限制=1), 重型坦克T1(产生机会=0.1, 最大产生限制=7), 重型坦克T1(产生机会=0.11111, 最大产生限制=5), 重型坦克T1(产生机会=0.125, 最大产生限制=10), 飞行堡垒I(产生机会=0.14286, 最大产生限制=1), 实验坦克(产生机会=0.16667, 最大产生限制=1), fireBee(产生机会=0.2, 最大产生限制=1), experimentalHoverTank(产生机会=0.25, 最大产生限制=1), 实验蜘蛛I(产生机会=0.33333, 最大产生限制=1), 模块化蜘蛛(产生机会=0.5, 最大产生限制=1), experimentalGunship(产生机会=1, 最大产生限制=1), 
+#共23个
 [资源_刷新时间]
 隐藏:真

================================================================================
文件: 机制\开局\特殊实验+.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\特殊实验+.ini
+++ 机制\开局\特殊实验+.ini
@@ -11,8 +11,10 @@
 [运动]
 运动类型:无
 [隐藏行动_额外资金转化]
-自动触发:if 自身属于AI控制
+自动触发:真
+需要条件:if 自身属于AI控制
 用逻辑添加资源:资金=自身资源.每秒资金
+#一秒60帧，每40帧获取一次资金，即是40*3=120帧=2S
 [隐藏行动_开局]
 自动触发事件:创建
 产生单位:等待台, 等待开始(偏移量x=0, 偏移量y=60)

================================================================================
文件: 机制\开局\特殊实验模式.ini
================================================================================

(内容完全相同)

================================================================================
文件: 机制\开局\辉光\实验室\实验室.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\实验室\实验室.ini
+++ 机制\开局\辉光\实验室\实验室.ini
@@ -31,8 +31,10 @@
 失败信息:我们仅捕获到了一份原初的辉光
 最大数量:0
 搜索距离:99999
+#Infinity
 [隐藏行动_辉光]
-自动触发:if 队伍中此单位数量(需标签="文明辉光", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="文明辉光", 超过=0)
 增加资源:辉光:0.12
 [行动_显示]
 text:辉光:%{int(自身资源.辉光)}
@@ -186,6 +188,11 @@
 Y轴阴影偏移:1
 [动画_idle]
 动画条件:idle
+#body_0s:{frame:0}
+#body_1s:{frame:0}
+#body_1.4s:{frame:3}
+#body_2.7s:{frame:3}
+#body_3s:{frame:0}
 arm1_0s:{透明度:0.4}
 arm1_1.5s:{透明度:0.7}
 arm1_2.6s:{透明度:0.6}

================================================================================
文件: 机制\开局\辉光\文明辉光.ini
================================================================================

(内容完全相同)

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\baseSlot.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\baseSlot.ini
+++ 机制\开局\辉光\模块化蜘蛛\baseSlot.ini
@@ -1,7 +1,9 @@
 [核心]
 禁止加载:真
+#Both empty and used slots
 [贴花_outline]
 image:body_ui.png
+#imageScale: 1.2
 绘制图层:beforeBody
 帧宽度:41
 帧高度:38
@@ -18,6 +20,7 @@
 包含父单位选中绘制:真
 任意玩家选中时绘制:真
 使用者能够控制此单位时绘制:真
+#isVisible:false in common_slot.ini
 可见性:if 父单位.拥有标志(id=自身资源.slotid)
 [隐藏行动_changed]
 自动触发事件:completeAndActive

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\common_slot.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\common_slot.ini
+++ 机制\开局\辉光\模块化蜘蛛\common_slot.ini
@@ -1,6 +1,7 @@
 [核心]
 禁止加载:真
 class:CustomUnitMetadata
+#price: 2
 价格:1000
 @define baseTags:modularSpider_nonEmptySlot
 tags:${baseTags}
@@ -17,6 +18,7 @@
 是生物:假
 碰撞体积软化:3
 显示在小地图上:假
+#canNotBeDirectlyAttacked: true
 禁止被修复:真
 不计入单位数量统计:真
 禁用零血死亡:真
@@ -25,6 +27,7 @@
 生命恢复速度:0.2
 自动建造速度:0.001
 [贴花_selected]
+#From baseSlot.ini
 可见性:假
 [隐藏行动_convertOnDeath]
 自动触发事件:tookDamage
@@ -44,6 +47,7 @@
 也执行动作:tellChangeToParent
 [行动_cancel]
 pos:-1
+#Real logic happens in cancelAddedToQueue (as queued actions don't trigger while being built)
 tags:actionCancel
 建造速度:3s
 text:Cancel

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\common_weapon_slot.ini
================================================================================

(内容完全相同)

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\反核.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\反核.ini
+++ 机制\开局\辉光\模块化蜘蛛\反核.ini
@@ -17,6 +17,7 @@
 AI被禁用:if 自身弹药(超过=3)
 图标:SHARED:icon_build.png
 [行动_showAntiNukeCount]
+#infoOnly: true
 增加资源:ammo=1
 价格:ammo=1
 text:i:gui.actions.antiNukeCount
@@ -29,10 +30,12 @@
 可见性:if 自身弹药(超过=0) and not 自身有标志(id=1)
 图标:SHARED:icon_nuke_stockpile.png
 [行动_showAntiNukeCountEmpty]
+#infoOnly: true
 text:i:gui.actions.antiNukeCountEmpty
 描述:i:gui.actions.antiNukeCount.descriptionEmpty
 建造速度:0s
 pos:0.1
+#displayRemainingStockpile: true
 显示类型:infoOnlyStockpile
 可用:假
 可见性:if 自身弹药(少于=1) and not 自身有标志(id=1)
@@ -59,10 +62,12 @@
 可见性:if not 自身有标志(id=1)
 图标:SHARED:icon_on.png
 额外图标颜色: #FFFFFFFF
+#don't wait for nuke building
 高优先级队列:真
 AI被禁用:真
 玩家可以取消:假
 允许多个队列:假
+#No confirm needed on mobile
 总是按一次:真
 [行动_isDisabled]
 text:i:gui.actions.disabled
@@ -73,10 +78,12 @@
 图标:SHARED:icon_off.png
 额外图标颜色: #FFFFFFFF
 界面闪烁:真
+#don't wait for nuke building
 高优先级队列:真
 AI被禁用:真
 玩家可以取消:假
 允许多个队列:假
+#No confirm needed on mobile
 总是按一次:真
 [攻击]
 可攻击:假
@@ -85,14 +92,17 @@
 可攻击水下单位:假
 炮塔大小:30
 炮塔转速:2
+#maxAttackRange: 200
 攻击间隔:85
 [炮塔_silo]
+#anti-nuke turret
 x:0
 y:0
 闲置方向:0
 不可见:真
 拦截抛射体需有标签:nuke
 拦截抛射体检索范围:1000
+#interceptProjectiles_andUnderDistance: 2200
 拦截抛射体攻击范围:1500
 拦截抛射体高度:50
 开火音效:nuke_launch
@@ -103,7 +113,10 @@
 转弯速度:40
 资源需求:ammo=1, 没有标志=1
 开火动画:shockwave, smoke
+#shoot_flame:custom:nukeLaunch
+#onShoot_playAnimation: fireNuke
 [抛射体_antiNukeProjectile]
+#anti-nuke
 直接伤害:600
 效果存在时间:99999
 速度:0.2
@@ -115,6 +128,7 @@
 弹道垂直飞行高度:80
 弹道高度:110
 帧:10
+#shadowFrame:1
 作图类型:0
 目标为地面:真
 范围伤害:100

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\护盾.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\护盾.ini
+++ 机制\开局\辉光\模块化蜘蛛\护盾.ini
@@ -6,6 +6,7 @@
 价格:12000
 [隐藏行动_regen]
 自动触发:真
+#30 / 60 = 0.5 per tick
 提取资源:护盾=-60
 提取资源包括父单位或载具:真
 提取资源删除:真
@@ -16,6 +17,7 @@
 可攻击水下单位:假
 炮塔大小:30
 炮塔转速:2
+#maxAttackRange: 200
 攻击间隔:85
 [图像]
 image:shieldGen.png

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\模块化蜘蛛.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\模块化蜘蛛.ini
+++ 机制\开局\辉光\模块化蜘蛛\模块化蜘蛛.ini
@@ -2,13 +2,17 @@
 name:模块化蜘蛛
 class:CustomUnitMetadata
 tags:模块, 抽取器t3
+#Keep same display text when converted
 界面显示内部调用:modularSpider
+#price: 2
 价格:399999
 生命值:9999
 质量:12000
 科技等级:1
 实验单位标志:真
 建造速度:66.6s
+#buildSpeed: 1
+#availableInDemo: true
 半径:49
 单位选择时显示圆圈:49
 视野:19
@@ -16,9 +20,14 @@
 是生物:假
 是建造者:真
 碰撞体积软化:3
+#nanoFactorySpeed:2.5
 资金获取:30
 资金获取时间:40
 生命恢复速度:0.1
+#builtFrom_1_name: experimentalLandFactory
+#builtFrom_1_pos:  6
+#energyMax: 2
+#energyRegen: 0.0003
 可以修建筑:真
 可以修单位:真
 可以回收资源:真
@@ -30,12 +39,24 @@
 死亡核爆范围:210
 死亡核爆伤害:4444
 死亡核爆条件:真
+#maxTransportingUnits: 2
+#transportUnitsRequireTag: vehicle
+#stayNeutral: true
+#whileNeutralTransportAnyTeam: true
+#whileNeutralConvertToTransportedTeam: true
+#convertToNeutralIfNotTransporting: true
+#canNotBeDirectlyAttacked: true
 护盾值:21000
 护盾恢复速度:0.36
+#Replaced with setUnitStats action
+#[hiddenAction_filledSlots]
+#autoTrigger: if self.numberOfAttachedUnits(withTag="modularSpider_weaponSlot", greaterThan=0)
+#convertTo: modularSpider_nonEmpty
 [隐藏行动_attachmentChange]
 @define newMoveSpeed:0.4 + 选择( 自身有子单位(需标签='modularSpider_speedSlot')>0, 0.3, 选择( 自身有子单位(需标签='modularSpider_weaponSlot')==0, 0.2, 0) )
 自动触发事件:newMessage(需标签='attachmentChange'), 创建
 设置单位状态:移动速度= ${newMoveSpeed}
+#debugMessage: Updated: moveSpeed = %{ debug( ${newMoveSpeed} ) }
 [隐藏行动_blinkRequest]
 自动触发事件:newMessage(需标签='blink')
 需要条件:if 自身队列量(withActionTag='blink')==0
@@ -48,6 +69,8 @@
 text:Blink
 指定攻击地面炮塔:blink
 指定攻击地面抛射体:blink
+#fireTurretXAtGround_onlyOverPassableTileOf: HOVER
+#fireTurretXAtGround_withTarget: eventData('blinkTarget', type='unit')
 建造时播放动画:blink
 高优先级队列:真
 建造时无法移动:真
@@ -107,6 +130,7 @@
 透明度:0.2
 绘制在单位下方:假
 [效果_blinkChargeIn_displacement]
+#displacement type ignored if postprocessing is not enabled
 作图类型:displacement
 image:SHARED:cone_inverted_normal_128.png
 效果存在时间:23
@@ -118,8 +142,12 @@
 结束缩放倍数:1.0
 透明度:1.0
 绘制在单位下方:假
+#dirOffsetRandom: 180
+#dirSpeed: 1
+#delayedStartTimer: 0
 朝向总是零度:真
 [效果_blinkChargeOut_displacement]
+#displacement type ignored if postprocessing is not enabled
 作图类型:displacement
 image:SHARED:shockwave_normal_128.png
 效果存在时间:80
@@ -133,6 +161,7 @@
 绘制在单位下方:假
 朝向总是零度:真
 [效果_blinkEnter_displacement]
+#displacement type ignored if postprocessing is not enabled
 作图类型:displacement
 image:SHARED:shockwave_normal_128.png
 效果存在时间:40
@@ -144,6 +173,9 @@
 结束缩放倍数:0.5
 透明度:0.7
 绘制在单位下方:假
+#dirOffsetRandom: 180
+#dirSpeed: 1
+#delayedStartTimer: 0
 朝向总是零度:真
 [效果_blinkSpark]
 优先级:high
@@ -157,6 +189,8 @@
 结束缩放倍数:0.7
 透明度:0.8
 绘制在单位下方:假
+#xOffsetAbsoluteRandom:205
+#yOffsetAbsoluteRandom:205
 X相对随机偏移量:50
 Y相对随机偏移量:50
 X随机绝对速度:1.7
@@ -175,9 +209,11 @@
 effect_2.5s:{x:0, y:0, name:CUSTOM|blinkSpark*16}
 effect_2.9s:{x:0, y:0, name:CUSTOM|blinkSpark*16}
 effect_3.2s:{x:0, y:0, name:CUSTOM|blinkChargeIn_displacement}
+#effect_3.5s: {x:0, y:0, name:CUSTOM|blinkSpark*16}
 [行动_selectSlot1]
 @define slotId:1
 建造速度:0s
+#text: Slot ${slotId}
 text:[
 从单元添加名称:unitRef self.附件(slot="unitSlot${slotId}")
 文本动态更改:]
@@ -192,7 +228,11 @@
 pos:1
 玩家可以取消:假
 允许多个队列:假
+#No confirm needed on mobile
 总是按一次:真
+#Makes the 'flags' for this unit appear to update instantly in the UI without waiting for
+#confirmation from the server. Removes sluggish feeling when switching tabs.
+#Note: If unit flags were also updated from non-ui sources this option might have visual side effects.
 extraLagHidingInUI:真
 [行动_selectSlot2]
 复制节:action_selectSlot1
@@ -220,6 +260,7 @@
 从单元添加属性:
 UI中显示的单位:
 图标:SHARED:icon_build.png
+#iconExtraImage: SHARED:icon_build.png
 [隐藏行动_onCreate]
 自动触发事件:创建
 增加资源:设置标志=10
@@ -227,6 +268,7 @@
 @define slotId:1
 x:-11
 y:32
+#idleDir:-60
 闲置方向:0
 闲置方向反转:0
 创建时生成单位:modularSpider_emptySlot(增加资源=slotid:${slotId})
@@ -236,6 +278,7 @@
 可被攻击或损坏:真
 不可选择:假
 显示所有操作来源:if 自身有标志(id=${slotId})
+#resetRotationWhenNotAttacking:true
 锁定旋转:真
 创建随父单位:假
 重定向伤害到父单位:真
@@ -245,6 +288,7 @@
 @define slotId:2
 x:11
 y:32
+#idleDir:60
 闲置方向:0
 闲置方向反转:0
 [附属_unitSlot3]
@@ -266,6 +310,7 @@
 @define slotId:5
 x:-10
 y:-20
+#idleDir:-120
 闲置方向:180
 闲置方向反转:180
 [附属_unitSlot6]
@@ -273,6 +318,7 @@
 @define slotId:6
 x:11
 y:-20
+#idleDir:120
 闲置方向:180
 闲置方向反转:180
 [可建造_1]
@@ -280,6 +326,7 @@
 pos:30
 建造方式:真
 可见性:if 自身有标志(id=10)
+#Allow even not visible
 锁定:假
 extraLagHidingInUI:真
 [可建造_showReclaimAction]
@@ -291,6 +338,9 @@
 image:body.png
 死亡图像:body_dead.png
 炮塔图像:SHARED:nano_turret.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
+#teamColorsOnTurret: true
 image_shadow:AUTO
 X轴阴影偏移:3
 Y轴阴影偏移:3
@@ -305,6 +355,7 @@
 攻击间隔:85
 每个炮塔向不同目标射击:真
 [炮塔_nanoTurret]
+#invisible: true
 x:0
 y:18
 闲置方向:0
@@ -332,6 +383,7 @@
 腿图像:leg.png
 脚图像:CORE:experimental_spider/foot.png
 脚图像阴影:SHADOW:CORE:experimental_spider/foot.png
+#drawUnderAllUnits:true
 偏向于临近一侧:真
 缩小时绘制腿:真
 缩小时绘制脚:真
@@ -372,14 +424,29 @@
 x轴链接位置:-15
 Y轴链接位置:-35
 复制与:1
+#heightSpeed:1
+#moveWarmUp:1
+#moveSpeed: 3.6
+#holdDisMin: 5
+#holdDisMax: 15
+#hold_moveOnlyIfFurthest: false
 [leg_8]
 x:35
 y:-60
 x轴链接位置:15
 Y轴链接位置:-35
 复制与:1
+#heightSpeed:1
+#moveWarmUp:1
+#moveSpeed: 3.6
+#holdDisMin: 5
+#holdDisMax: 15
+#hold_moveOnlyIfFurthest: false
 [运动]
 运动类型:跨悬崖和水面
+#filled slots speed
+#moveSpeed: 0.4
+#empty speed
 移动速度:0.9
 加速度:0.015
 减速度:0.015

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\激光.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\激光.ini
+++ 机制\开局\辉光\模块化蜘蛛\激光.ini
@@ -13,6 +13,7 @@
 可攻击水下单位:假
 炮塔大小:30
 炮塔转速:2
+#maxAttackRange: 200
 攻击间隔:85
 [炮塔_laserDefence]
 x:0

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\火炮.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\火炮.ini
+++ 机制\开局\辉光\模块化蜘蛛\火炮.ini
@@ -22,13 +22,21 @@
 炮塔转速:2
 攻击距离:480
 攻击间隔:72
+#turretMultiTargeting: true
 [炮塔_mainCannon]
 x:-0.5
 y:20
+#projectile: cannonShot
 抛射体:plasma
 链接到:mainCannonBase
 隶属:真
+#image: SHARED:experimental_tank_turret.png
+#image: SHARED:turret_artillery_large.png
 image:CORE:experimental_spider/experimental_tank_turret2.png
+#canAttackFlyingUnits: false
+#canAttackLandUnits:   true
+#canAttackUnderwaterUnits: false
+#delay: 190
 开火间隔:105
 预热:20
 闲置方向:0
@@ -36,35 +44,45 @@
 开火音效大小:0.3
 开火动画:large, CUSTOM:lightSlowFade
 开火闪光: #EEEECCCC
+#warmupStartEffect:CUSTOM:lightSlowFadeBase
 size:16
 炮塔旋转加速度:0.1
 转弯速度:0
 后坐力大小:-5
 后坐力速度:3
 后坐力恢复:38
+#chargeEffectImage: SHARED:lighting_charge.png
 [炮塔_mainCannonBase]
 x:0
 y:0
+#image: SHARED:experimental_tank_turret.png
+#image: SHARED:turret_artillery_large.png
 image:CORE:experimental_spider/spider_turret_base.png
 图像应用队伍颜色:真
 可攻击空中单位:假
 可攻击表面单位:真
 可攻击水下单位:假
 可以开火:假
+#delay: 190
 开火间隔:100
 预热:20
 闲置方向:0
 开火音效:large_gun_fire2
 开火音效大小:0.3
+#shoot_flame:large
 开火闪光: #EEEECCCC
 开火动画:CUSTOM:lightSlowFade
+#warmupStartEffect:CUSTOM:lightSlowFadeBase
 size:40
 炮塔旋转加速度:0.1
 转弯速度:2
 后坐力大小:-1
 后坐力速度:3
 后坐力恢复:38
+#chargeEffectImage: SHARED:lighting_charge.png
 [抛射体_cannonShot]
+#main turret projectile
+#directDamage: 0 #no directDamage with targetGround
 效果存在时间:150
 速度:5
 大的打击效果:真
@@ -81,8 +99,12 @@
 作图类型:2
 帧:4
 绘制大小:1
+#trailEffect: CUSTOM:projectileTrail
 尾焰频率:2
+#trailEffectRate: true
+#lightColor:#ffffff
 爆炸效果:smallExplosion, CUSTOM:hitLightFlash, CUSTOM:projectilePassThough
+#explodeEffectOnShield: CUSTOM:hitLightFlash
 创建时效果:CUSTOM:projectileLight
 [效果_warmup]
 优先级:high
@@ -105,6 +127,7 @@
 初始缩放倍数:0.4
 结束缩放倍数:0.4
 透明度:0.5
+#drawUnderUnits:true
 [效果_lightSlowFadeBase]
 image:SHARED:light_50.png
 效果存在时间:30
@@ -114,6 +137,7 @@
 初始缩放倍数:0.2
 结束缩放倍数:0.6
 透明度:0.7
+#drawUnderUnits:true
 Y轴相对偏移:-41
 Y相对速度:0.3
 [效果_projectileTrail]
@@ -127,6 +151,7 @@
 结束缩放倍数:0.4
 透明度:0.6
 绘制在单位下方:真
+#ySpeedRelative:-1
 [效果_projectileLight]
 优先级:veryhigh
 image:SHARED:light_50.png

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\炮塔.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\炮塔.ini
+++ 机制\开局\辉光\模块化蜘蛛\炮塔.ini
@@ -1,5 +1,6 @@
 [核心]
 name:modularSpider_gunturretI
+tags:无
 界面显示内部调用:modularSpider_gunturret
 覆盖单位:modularSpider_gunturret
 复制与:common_weapon_slot.ini
@@ -44,4 +45,9 @@
 直接伤害:44
 效果存在时间:60
 速度:6
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:5
+#areaDamage: 40
+#areaRadius: 35

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\炮塔T2.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\炮塔T2.ini
+++ 机制\开局\辉光\模块化蜘蛛\炮塔T2.ini
@@ -4,6 +4,7 @@
 界面显示内部调用:modularSpider_gunturretT2
 复制与:common_weapon_slot.ini
 价格:18000
+#maxHp: 2000
 [攻击]
 可攻击:真
 可攻击空中单位:假
@@ -22,6 +23,7 @@
 开火音效大小:0.15
 开火动画:small
 开火闪光: #FFEECCCC
+#idleSpin: 0.8
 后坐力大小:-0.5
 后坐力速度:6
 后坐力恢复:12
@@ -33,4 +35,10 @@
 直接伤害:52
 效果存在时间:60
 速度:9
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:5
+#areaDamage: 40
+#areaRadius: 35
+#T3: b41e1e

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\电击.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\电击.ini
+++ 机制\开局\辉光\模块化蜘蛛\电击.ini
@@ -1,5 +1,6 @@
 [核心]
 name:modularSpider_lightningI
+tags:无
 覆盖单位:modularSpider_lightning
 界面显示内部调用:modularSpider_lightning
 复制与:common_weapon_slot.ini
@@ -19,6 +20,7 @@
 size:20
 image:CORE:turrets/turret_top_lightning.png
 图像绘制偏移y:9
+#idleSpin: 0.8
 开火音效:lighting_burst
 开火音效大小:0.3
 开火动画:CUSTOM:sparks2*3
@@ -29,7 +31,9 @@
 后坐力大小:-1.5
 后坐力速度:3
 后坐力恢复:17
+#energyUsage: 1
 [抛射体_1]
+#directDamage: 310
 直接伤害:1248
 效果存在时间:25
 瞬间命中:真

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\瞬移.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\瞬移.ini
+++ 机制\开局\辉光\模块化蜘蛛\瞬移.ini
@@ -4,15 +4,19 @@
 界面显示内部调用:modularSpider_blink
 复制与:common_slot.ini
 价格:16000
+#### Blink ####
 [行动_blink]
+#isVisible: if self.hasFlag(id=1)
 指定攻击地面炮塔:dummyBlink
 指定攻击地面抛射体:dummyBlink
 指定攻击地面类型:两栖
 建造时无法移动:真
 text:Blink
+#description:i:gui.actions.launchNuke.description
 显示类型:action
 建造速度:0s
 pos:0.1
+#whenBuilding_playAnimation: blink
 高优先级队列:真
 一次只有一个单位:真
 图标:SHARED:icon_attack_point.png
@@ -30,12 +34,14 @@
 转弯速度:40
 限制范围:1000
 [抛射体_dummyBlink]
+#teleportSource: true
 瞬间命中:真
 直接伤害:0
 效果存在时间:99999
 速度:1
 目标为地面:真
 激光拦截耗能:-1
+#shouldRevealFog:true
 爆炸效果:无
 [攻击]
 可攻击:假
@@ -44,6 +50,7 @@
 可攻击水下单位:假
 炮塔大小:30
 炮塔转速:2
+#maxAttackRange: 200
 攻击间隔:25
 [图像]
 image:blink.png

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\等离子t1.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\等离子t1.ini
+++ 机制\开局\辉光\模块化蜘蛛\等离子t1.ini
@@ -1,5 +1,6 @@
 [核心]
 name:modularSpider_smallgunturretI
+tags:无
 覆盖单位:modularSpider_smallgunturret
 界面显示内部调用:modularSpider_smallgunturret
 复制与:common_weapon_slot.ini
@@ -23,6 +24,7 @@
 可攻击水下单位:假
 炮塔大小:30
 炮塔转速:2
+#maxAttackRange: 200
 攻击间隔:80
 [炮塔_smallLaser1]
 x:0

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\等离子t2.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\等离子t2.ini
+++ 机制\开局\辉光\模块化蜘蛛\等离子t2.ini
@@ -1,5 +1,6 @@
 [核心]
 name:modularSpider_smallgunturretII
+tags:无
 覆盖单位:modularSpider_smallgunturretT2
 界面显示内部调用:modularSpider_smallgunturretT2
 复制与:common_weapon_slot.ini
@@ -12,6 +13,7 @@
 可攻击水下单位:假
 炮塔大小:30
 炮塔转速:2
+#maxAttackRange: 200
 攻击间隔:40
 [炮塔_smallLaser1]
 x:0

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\装载模块.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\装载模块.ini
+++ 机制\开局\辉光\模块化蜘蛛\装载模块.ini
@@ -2,11 +2,13 @@
 name:modularSpider_emptySlot
 覆盖单位:modularSpider_emptySlot
 class:CustomUnitMetadata
+#price: 2
 价格:1000
 tags:modularSpider_emptySlot
 复制与:baseSlot.ini
 显示在沙盒中:假
 生命值:9999
+#don't keep damage
 生命恢复速度:3000
 质量:90000
 科技等级:1
@@ -32,52 +34,67 @@
 也执行动作:tellChangeToParent
 [行动_等离子]
 复制节:template_buildTurret
+#buildSpeed: 6s
 转换成:modularSpider_smallgunturret
 价格:3000
 [行动_机枪]
 复制节:template_buildTurret
+#buildSpeed: 6s
 转换成:modularSpider_gunturret
 价格:3000
 [行动_电击]
 复制节:template_buildTurret
+#buildSpeed: 6s
 转换成:modularSpider_lightning
 价格:16600
 [行动_火炮]
 复制节:template_buildTurret
+#buildSpeed: 8s
 转换成:modularSpider_artillery
 价格:16600
 [comment_action_buildNano]
 复制节:template_buildTurret
+#buildSpeed: 6s
 转换成:modularSpider_nano
 价格:1000
 [行动_防空]
 复制节:template_buildTurret
+#buildSpeed: 6s
 转换成:modularSpider_antiair
 价格:3000
 [行动_资源]
 复制节:template_buildTurret
+#buildSpeed: 10s
 转换成:modularSpider_fabricator
 价格:5000
 [行动_激光]
 复制节:template_buildTurret
+#buildSpeed: 12s
 转换成:modularSpider_laserdefense
 价格:13500
 [行动_护盾]
 复制节:template_buildTurret
+#buildSpeed: 12s
 转换成:modularSpider_shieldGen
 价格:12000
 [行动_速度]
 复制节:template_buildTurret
+#buildSpeed: 12s
 转换成:modularSpider_speedIncomplete
 价格:4500
 [行动_反核]
 复制节:template_buildTurret
+#buildSpeed: 12s
 转换成:modularSpider_antinuke
 价格:6000
 [行动_瞬移]
 复制节:template_buildTurret
+#buildSpeed: 12s
 转换成:modularSpider_blink
 价格:14500
+#[action_debug]
+#text: %{debug(parent.hasFlag(id=self.resource.slotid))}
+#addEnergy:0
 [图像]
 drawLayer:experimentals
 总帧数:1

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\资源.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\资源.ini
+++ 机制\开局\辉光\模块化蜘蛛\资源.ini
@@ -25,6 +25,7 @@
 可攻击水下单位:假
 炮塔大小:30
 炮塔转速:2
+#maxAttackRange: 200
 攻击间隔:85
 [图像]
 image:fabricatorT1.png

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\资源t2.ini
================================================================================

(内容完全相同)

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\防空.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\防空.ini
+++ 机制\开局\辉光\模块化蜘蛛\防空.ini
@@ -1,5 +1,6 @@
 [核心]
 name:modularSpider_antiairI
+tags:无
 覆盖单位:modularSpider_antiair
 复制与:common_weapon_slot.ini
 界面显示内部调用:modularSpider_antiair
@@ -35,6 +36,7 @@
 炮塔大小:18
 炮塔转速:2
 攻击间隔:80
+#maxAttackRange: 310
 [炮塔_1]
 x:0
 y:0
@@ -46,6 +48,8 @@
 后坐力大小:-3
 后坐力速度:6
 后坐力恢复:12
+#idleSpin: 0.8
+#shouldResetTurret: false
 空闲扫描角度:45
 空闲扫描延迟:110
 空闲扫描速度:0.6
@@ -56,5 +60,10 @@
 到达速度:6
 尾焰:真
 大的打击效果:真
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:4
+#areaDamage: 40
+#areaRadius: 35
 自动切换目标:真

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\防空2.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\防空2.ini
+++ 机制\开局\辉光\模块化蜘蛛\防空2.ini
@@ -11,9 +11,12 @@
 可攻击水下单位:假
 炮塔大小:6
 炮塔转速:6
+#non upgraded 250
 攻击距离:400
+#non upgraded 80
 攻击间隔:60
 [炮塔_1]
+#pivot point
 x:0
 y:0
 可以开火:假
@@ -21,10 +24,13 @@
 后坐力速度:6
 后坐力恢复:12
 image:CORE:turrets/anti_air_top_l3.png
+#shouldResetTurret: false
+#idleSpin: 0.8
 空闲扫描角度:45
 空闲扫描延迟:110
 空闲扫描速度:0.2
 [炮塔_2]
+#left missile pod
 x:7
 y:6
 链接到:1
@@ -35,7 +41,9 @@
 开火音效大小:0.3
 开火动画:small
 开火闪光: #FFEECCCC
+#image: SHARED:debug_marker.png
 [炮塔_3]
+#right missile pod
 x:-7
 y:6
 复制与:2
@@ -48,6 +56,11 @@
 到达速度:8
 尾焰:真
 大的打击效果:真
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:10
+#areaDamage: 40
+#areaRadius: 35
 自动切换目标:真
 绘制大小:1

================================================================================
文件: 机制\开局\辉光\模块化蜘蛛\高射炮.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\模块化蜘蛛\高射炮.ini
+++ 机制\开局\辉光\模块化蜘蛛\高射炮.ini
@@ -1,5 +1,6 @@
 [核心]
 name:modularSpider_antiairFlakI
+tags:无
 覆盖单位:modularSpider_antiairFlak
 界面显示内部调用:modularSpider_antiairFlak
 复制与:common_weapon_slot.ini
@@ -11,9 +12,12 @@
 可攻击水下单位:假
 炮塔大小:27
 炮塔转速:6
+#non upgraded 250
 攻击距离:210
+#non upgraded 80
 攻击间隔:150
 [炮塔_1]
+#pivot point
 x:0
 y:0
 可以开火:假
@@ -21,10 +25,13 @@
 后坐力速度:6
 后坐力恢复:12
 image:CORE:turrets/anti_air_top_flakgun.png
+#shouldResetTurret: false
+#idleSpin: 0.5
 空闲扫描角度:45
 空闲扫描延迟:90
 空闲扫描速度:0.3
 [炮塔_2]
+#left missile pod
 x:7
 y:14
 size:0
@@ -36,17 +43,24 @@
 开火音效大小:0.3
 开火动画:small
 开火闪光: #FFEECCCC
+#image: SHARED:debug_marker.png
 [炮塔_3]
+#right missile pod
 x:-7
 y:14
 复制与:2
 链接间隔:2
 预热:55
 [抛射体_1]
+#directDamage: 60
 效果存在时间:240
 速度:20
+#targetSpeed: 6
 尾焰:真
 大的打击效果:真
+#ballistic: true
+#ballistic_delaymove_height:0
+#ballistic_height: 4
 帧:0
 范围伤害:144
 范围半径:72

================================================================================
文件: 机制\开局\辉光\移动基地\移动作战基地.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\移动基地\移动作战基地.ini
+++ 机制\开局\辉光\移动基地\移动作战基地.ini
@@ -1,16 +1,29 @@
 [核心]
 显示在沙盒中:假
 name:experimentalGunshipLanded
+tags:无
 class:CustomUnitMetadata
 复制与:移动基地.ini
+#Undo from copy
 为可选初始单位:假
 质量:180000
+#isBuilding:true
+#footprint: -1, -1, 1, 1
+#nanoBuildSpeed: 2
+#nanoFactorySpeed:3.5
 护盾值:5000
 护盾恢复速度:1
 护盾初始为0:真
 维修或建造范围:285
 维修速度:0.4
 nanoBuildSpeed:8
+#[canBuild_3]
+#name: builder, builderShip, combatEngineer, heavyTank, hovercraft, heavyHoverTank, artillery, scout, turret, turret_artillery, antiAirTurret, extractor, fabricatorT1, landFactory, mechFactory, airFactory, seaFactory, laserDefence, repairBay, bomber
+#pos:  2.1
+#[canBuild_13]
+#name: experimentalHoverTank
+#pos:  3.2
+#forceNano: true
 [行动_1]
 转换成:experimentalGunship
 价格:0

================================================================================
文件: 机制\开局\辉光\移动基地\移动基地.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\移动基地\移动基地.ini
+++ 机制\开局\辉光\移动基地\移动基地.ini
@@ -1,5 +1,6 @@
 [核心]
 name:experimentalGunship
+tags:无
 为可选初始单位:真
 class:CustomUnitMetadata
 价格:140000
@@ -9,9 +10,12 @@
 实验单位标志:真
 视野:20
 建造速度:0.0002
+#availableInDemo: true
 资金获取:30
 资金获取时间:40
+#generation_active: true
 半径:45
+#displayRadius: 11
 是生物:假
 碰撞体积软化:24
 离开x轴:0
@@ -19,6 +23,11 @@
 离开旋转角度:0
 离开距离:140
 离开高度:5
+#selfRegenRate:0.6
+#builtFrom_1_name: experimentalLandFactory
+#builtFrom_1_pos:  6
+#energyMax: 1
+#energyRegen: 0.0002
 载具可以卸载单位:if not 自身在液体上()
 运输槽位数量:5
 可以自动修:真
@@ -60,12 +69,16 @@
 text:i:gui.actions.buildAntiNuke
 描述:i:gui.actions.buildAntiNuke.描述
 显示类型:无
+#buildSpeed: 30s
+#don't want a speed up from nanoFactorySpeed
 建造速度:${ 0.0007 / core.工厂速度乘数 }
 pos:0.3
 可用:if 自身弹药包括队列(少于=12)
 增加资源:ammo=1
 AI被禁用:if 自身弹药(超过=3)
 图标:SHARED:icon_build.png
+#isLockedAlt: true
+#isLockedAltMessage: Must be deployed
 [行动_showAntiNukeCount]
 增加资源:ammo=1
 价格:ammo=1
@@ -83,21 +96,28 @@
 描述:i:gui.actions.antiNukeCount.descriptionEmpty
 建造速度:0s
 pos:0.2
+#displayRemainingStockpile: true
 显示类型:infoOnlyStockpile
 可用:假
 可见性:if 自身弹药(少于=1)
 图标:SHARED:icon_nuke_stockpile.png
+#isGuiBlinking: true
 [行动_addBlink]
 价格:10000
 text:Add blink
 描述:Add blink module. Allows teleporting short distances.
+#displayType: NONE
+#nanoFactorySpeed changes this
 建造速度:50s
 pos:0.3
 可见性:if not 自身有标志(id=1)
 可用:if not 自身有标志(id=1)
 增加资源:设置标志=1
 图标:SHARED:icon_build.png
+#isLockedAlt: true
+#isLockedAltMessage: Must be deployed
 允许多个队列:假
+#### Blink ####
 [行动_blink]
 可见性:if 自身有标志(id=1)
 指定攻击地面炮塔:blink
@@ -105,6 +125,7 @@
 指定攻击地面类型:两栖
 建造时无法移动:真
 text:Blink
+#description:i:gui.actions.launchNuke.description
 显示类型:action
 建造速度:3.5s
 pos:0.1
@@ -156,6 +177,7 @@
 透明度:0.5
 绘制在单位下方:假
 [效果_blinkChargeIn_displacement]
+#displacement type ignored if postprocessing is not enabled
 作图类型:displacement
 image:SHARED:cone_inverted_normal_128.png
 效果存在时间:23
@@ -167,8 +189,12 @@
 结束缩放倍数:1.0
 透明度:1.0
 绘制在单位下方:假
+#dirOffsetRandom: 180
+#dirSpeed: 1
+#delayedStartTimer: 0
 朝向总是零度:真
 [效果_blinkChargeOut_displacement]
+#displacement type ignored if postprocessing is not enabled
 作图类型:displacement
 image:SHARED:shockwave_normal_128.png
 效果存在时间:80
@@ -182,6 +208,7 @@
 绘制在单位下方:假
 朝向总是零度:真
 [效果_blinkEnter_displacement]
+#displacement type ignored if postprocessing is not enabled
 作图类型:displacement
 image:SHARED:shockwave_normal_128.png
 效果存在时间:40
@@ -193,6 +220,9 @@
 结束缩放倍数:0.5
 透明度:0.7
 绘制在单位下方:假
+#dirOffsetRandom: 180
+#dirSpeed: 1
+#delayedStartTimer: 0
 朝向总是零度:真
 [效果_blinkSpark]
 优先级:high
@@ -206,6 +236,8 @@
 结束缩放倍数:0.5
 透明度:0.8
 绘制在单位下方:假
+#xOffsetAbsoluteRandom:205
+#yOffsetAbsoluteRandom:205
 X相对随机偏移量:30
 Y相对随机偏移量:30
 X随机绝对速度:1.4
@@ -214,17 +246,24 @@
 延迟创建随机时间:30
 物理效果:真
 物理重力:-0.4
+#hSpeed:1
 [动画_blink]
 effect_0.1s:{x:0, y:0, name:CUSTOM|blinkSpark*3}
 effect_0.5s:{x:0, y:0, name:CUSTOM|blinkSpark*5}
 effect_1.0s:{x:0, y:0, name:CUSTOM|blinkSpark*10}
 effect_1.05s:{x:0, y:0, name:CUSTOM|blinkChargeIn_displacement}
 effect_1.5s:{x:0, y:0, name:CUSTOM|blinkSpark*16}
+#effect_2.0s: {x:0, y:0, name:CUSTOM|blinkSpark*6}
+#effect_2.5s: {x:0, y:0, name:CUSTOM|blinkSpark*6}
 [图像]
 总帧数:1
 image:body.png
 死亡图像:body_dead.png
+#image_turret: SHARED:mega_tank_turret.png
+#image_turret: SHARED:experimental_tank_turret.png
 炮塔图像:SHARED:mega_tank_turret2.png
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
 image_shadow:AUTO
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -239,14 +278,17 @@
 攻击间隔:25
 每个炮塔向不同目标射击:真
 [炮塔_nano]
+#nano
 x:18
 y:-4
+#idleDir:-90
 预热:30
 转弯速度:4
 size:8
 image:SHARED:nano_turret.png
 可以开火:假
 是主构建炮塔:真
+#idleDir:-180
 [炮塔_2]
 x:-13
 y:30
@@ -273,11 +315,17 @@
 [炮塔_main]
 x:0
 y:6
+#projectile: cannonShot
 抛射体:main
+#image: SHARED:experimental_tank_turret.png
+#image: SHARED:turret_artillery_large.png
 image:SHARED:experimental_tank_turret3.png
+#image: experimental_tank_turret2.png
 图像绘制偏移y:12
 可攻击空中单位:假
 可攻击表面单位:真
+#canAttackUnderwaterUnits: false
+#delay: 190
 开火间隔:110
 预热:20
 闲置方向:0
@@ -285,6 +333,7 @@
 开火音效大小:0.3
 开火动画:large, CUSTOM:lightSlowFade
 开火闪光: #EEEECCCC
+#warmupStartEffect:CUSTOM:lightSlowFadeBase
 chargeEffectImage:SHARED:lighting_charge.png
 size:32
 炮塔旋转加速度:0.1
@@ -293,6 +342,7 @@
 后坐力速度:3
 后坐力恢复:38
 [炮塔_antiNuke]
+#anti-nuke turret
 x:0
 y:-20
 可以开火:假
@@ -310,12 +360,15 @@
 转弯速度:40
 资源需求:ammo=1
 开火动画:shockwave, smoke
+#shoot_flame:custom:nukeLaunch
+#onShoot_playAnimation: fireNuke
 [抛射体_1]
 直接伤害:35
 效果存在时间:70
 速度:7
 帧:11
 [抛射体_2]
+#missile
 直接伤害:90
 范围伤害:70
 范围半径:45
@@ -341,7 +394,10 @@
 绘制大小:1.5
 尾焰:CUSTOM:projectileTrail
 尾焰频率:2
+#trailEffectRate: true
+#lightColor:#ffffff
 爆炸效果:smallExplosion, CUSTOM:hitLightFlash, CUSTOM:projectilePassThough
+#explodeEffectOnShield: CUSTOM:hitLightFlash
 创建时效果:CUSTOM:projectileLight
 [效果_warmup]
 优先级:high
@@ -364,6 +420,7 @@
 初始缩放倍数:0.4
 结束缩放倍数:0.4
 透明度:0.5
+#drawUnderUnits:true
 [效果_lightSlowFadeBase]
 image:SHARED:light_50.png
 效果存在时间:30
@@ -373,6 +430,7 @@
 初始缩放倍数:0.2
 结束缩放倍数:0.6
 透明度:0.7
+#drawUnderUnits:true
 Y轴相对偏移:-41
 Y相对速度:0.3
 [效果_projectileTrail]
@@ -386,6 +444,7 @@
 结束缩放倍数:0.4
 透明度:0.6
 绘制在单位下方:真
+#ySpeedRelative:-1
 [效果_projectileLight]
 优先级:veryhigh
 image:SHARED:light_50.png
@@ -425,6 +484,7 @@
 Y相对速度:2
 空气效果:真
 [抛射体_antiNukeMissile]
+#anti-nuke
 直接伤害:600
 效果存在时间:99999
 速度:0.2
@@ -436,6 +496,7 @@
 弹道垂直飞行高度:80
 弹道高度:110
 帧:10
+#shadowFrame:1
 作图类型:0
 目标为地面:真
 范围伤害:100
@@ -469,8 +530,10 @@
 y:-17
 移动速度:0.2
 末端图像:door.png
+#drawOverBody:true
 [动画_deploy]
 融入时间:2s
+#blendOut: 2s
 arm1_0:{x:20, y:0}
 arm2_0:{x:20, y:0}
 arm3_0:{x:-20, y:0}

================================================================================
文件: 机制\开局\辉光\飞行机甲\mech_med_common.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\飞行机甲\mech_med_common.ini
+++ 机制\开局\辉光\飞行机甲\mech_med_common.ini
@@ -1,6 +1,7 @@
 [核心]
 name:NULL
 class:CustomUnitMetadata
+#template only
 禁止加载:真
 是生物:假
 碰撞体积软化:0
@@ -29,6 +30,8 @@
 复位角度:25
 腿图像:leg.png
 脚图像:foot_med.png
+#draw_foot_on_top: true
+#dust_effect: false
 最小移动距离:21
 最大移动距离:36
 [leg_2]

================================================================================
文件: 机制\开局\辉光\飞行机甲\飞行机甲.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\飞行机甲\飞行机甲.ini
+++ 机制\开局\辉光\飞行机甲\飞行机甲.ini
@@ -10,14 +10,18 @@
 生命恢复速度:0.05
 科技等级:2
 建造速度:18s
-tags:防空, 地, 拦截, 对地310
+#availableInDemo: true
+tags:防空, 地, 拦截, 对地310, C4
 半径:25
+#displayRadius: 11
 是生物:假
 碰撞体积软化:0
 能量值:4
 能量恢复速度:0.010
 能量需要充满:真
 自动触发间隔:0.5s
+#builtFrom_1_name: mechFactoryT2
+#builtFrom_1_pos: 8
 [行动_飞行]
 转换成:飞行机甲飞行
 显示类型:action
@@ -36,6 +40,10 @@
 image_shadow:SHADOW:topFlying.png
 X轴阴影偏移:2
 Y轴阴影偏移:2
+#animation_moving_start: 0
+#animation_moving_end: 7
+#animation_moving_speed: 6
+#lock_shadow_rotation_with_main_turret: true
 锁定主体旋转随主炮塔:真
 [攻击]
 可攻击:真
@@ -107,7 +115,8 @@
 添加路径点序列位置:真
 添加路径点路径可达:真
 [隐藏行动_ai追击]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0) and 敌人有此单位数量(少于=1, 范围内=285) and 敌人有此单位数量(超过=0, 范围内=800) and 自身血量>500
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0) and 敌人有此单位数量(少于=1, 范围内=285) and 敌人有此单位数量(超过=0, 范围内=800) and 自身血量>500
 添加路径点动作类型:移动攻击
 添加路径点路径可达:真
 添加路径点检索标签:地, 空对地, 拦截, 建筑物
@@ -115,7 +124,8 @@
 添加路径点序列位置:真
 添加路径点靠近队伍:敌方
 [隐藏行动_ai回血]
-自动触发:if 队伍中此单位数量(需标签="ai", 超过=0) and 敌人有此单位数量(少于=1, 范围内=800) and 自身血量<500
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="ai", 超过=0) and 敌人有此单位数量(少于=1, 范围内=800) and 自身血量<500
 添加路径点动作类型:移动
 添加路径点路径可达:真
 添加路径点检索标签:修复

================================================================================
文件: 机制\开局\辉光\飞行机甲\飞行模式.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\辉光\飞行机甲\飞行模式.ini
+++ 机制\开局\辉光\飞行机甲\飞行模式.ini
@@ -16,6 +16,10 @@
 可用:if 自身在开阔地带()
 [图像]
 总帧数:1
+#animation_moving_start: 0
+#animation_moving_end: 7
+#animation_moving_speed: 6
+#lock_shadow_rotation_with_main_turret: true
 锁定主体旋转随主炮塔:真
 锁定腿脚旋转随主炮塔:真
 [攻击]
@@ -53,4 +57,5 @@
 移动忽略转向:假
 倒车速度比率:0
 [隐藏行动_ai拉扯]
-自动触发:if 敌人有此单位数量(需标签="防空", 超过=0, 范围内=280) or 敌人有此单位数量(需标签="飞机", 超过=0, 范围内=280)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="防空", 超过=0, 范围内=280) or 敌人有此单位数量(需标签="飞机", 超过=0, 范围内=280)

================================================================================
文件: 机制\开局\难度++.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\难度++.ini
+++ 机制\开局\难度++.ini
@@ -13,8 +13,10 @@
 [运动]
 运动类型:无
 [隐藏行动_额外资金转化]
-自动触发:if 自身属于AI控制
+自动触发:真
+需要条件:if 自身属于AI控制
 用逻辑添加资源:资金=自身资源.每秒资金*1.5
+#一秒60帧，每40帧获取一次资金，即是40*3=120帧=2S
 [隐藏行动_开局]
 自动触发事件:创建
 产生单位:等待台, 等待开始(偏移量x=0, 偏移量y=60)

================================================================================
文件: 机制\开局\难度+.ini
================================================================================

--- scripts/元/人机的玩笑/机制\开局\难度+.ini
+++ 机制\开局\难度+.ini
@@ -13,8 +13,10 @@
 [运动]
 运动类型:无
 [隐藏行动_额外资金转化]
-自动触发:if 自身属于AI控制
+自动触发:真
+需要条件:if 自身属于AI控制
 用逻辑添加资源:资金=自身资源.每秒资金
+#一秒60帧，每40帧获取一次资金，即是40*3=120帧=2S
 [隐藏行动_开局]
 自动触发事件:创建
 产生单位:等待台, 等待开始(偏移量x=0, 偏移量y=60)

================================================================================
文件: 机制\指挥中心\判断模块.ini
================================================================================

(内容完全相同)

================================================================================
文件: 机制\指挥中心\基础模版.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥中心\基础模版.ini
+++ 机制\指挥中心\基础模版.ini
@@ -47,7 +47,8 @@
 pos:10
 锁定:if 自身属于AI控制
 [隐藏行动_开局]
-自动触发:if 自身属于AI控制 and not 自身有标签(包含标签="开局侦查") and 自身有资源(时间=16.6) and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 自身属于AI控制 and not 自身有标签(包含标签="开局侦查") and 自身有资源(时间=16.6) and 自身队列量(少于=1)
 也添加进队列:生产侦查
 允许多个队列:假
 临时标签添加:开局侦查
@@ -69,7 +70,8 @@
 生产单位:毒-建造者
 建造速度:8.3s
 [隐藏行动_弱智AI]
-自动触发:if 队伍中此单位数量(需标签="建造", 少于=3) and 自身属于AI控制 and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建造", 少于=3) and 自身属于AI控制 and 自身队列量(少于=1)
 增加资源:-500
 也添加进队列:开局建造
 [隐藏行动_开局建造]

================================================================================
文件: 机制\指挥中心\投票系统.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥中心\投票系统.ini
+++ 机制\指挥中心\投票系统.ini
@@ -77,7 +77,8 @@
 需要条件:if 自身有标签(包含标签="开始投票") and not 自身有资源(投票等待时长=10)
 增加资源:投票等待时长:0.2
 [隐藏行动_禁空投票结算]
-自动触发:if 自身有标签(包含标签="开始投票") and 自身有标签(包含标签="同意禁空") and 自身有资源(投票等待时长=10)
+自动触发:真
+需要条件:if 自身有标签(包含标签="开始投票") and 自身有标签(包含标签="同意禁空") and 自身有资源(投票等待时长=10)
 用逻辑设置资源:投票等待时长:0
 临时标签删除:开始投票
 也执行动作:同意禁空, 拒绝禁空

================================================================================
文件: 机制\指挥中心\指挥中心I.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥中心\指挥中心I.ini
+++ 机制\指挥中心\指挥中心I.ini
@@ -2,6 +2,7 @@
 name:指挥中心I
 复制与:基础模版.ini
 tags:建筑物, 家, 指挥中心I, 对地, 对空
+#––「资源」––#
 [资源_伤害量]
 隐藏:真
 [资源_战力]
@@ -10,8 +11,10 @@
 隐藏:真
 [资源_对空战力]
 显示名称:战力
+#––「设定」––#
 [隐藏行动_战力修正]
-自动触发:if 自身自定义计时器(指定时间后=2)
+自动触发:真
+需要条件:if 自身自定义计时器(指定时间后=2)
 重置自定义计时器:真
 用逻辑设置资源:战力=int(max(((max(${攻击.攻击距离}+(-${攻击.攻击距离}*0.45), 100)*(自身资源.伤害量)*0.012+(自身最大血量+(自身护盾*1.2))*1.44)*0.0128), 1))*(0.4+(自身血量/自身最大血量)*0.6), 对空战力=int(max(((max(${攻击.攻击距离}+(-${攻击.攻击距离}*0.45), 100)*(自身资源.对空伤害量)*0.012+(自身最大血量+(自身护盾*1.2))*1.44)*0.0128), 1))*(0.4+(自身血量/自身最大血量)*0.6)
 [全局资源_最新编号]
@@ -23,19 +26,24 @@
 用逻辑设置资源:最新编号=自身资源.最新编号+1, 编号=自身资源.最新编号, 压力值=1
 临时标签添加:显示信息
 [隐藏行动_无保护]
-自动触发:if (队伍中此单位数量(需标签="对地", 范围内=280)+队伍中此单位数量(需标签="炮塔I", 范围内=280)*2+队伍中此单位数量(需标签="机枪塔I", 范围内=280)*3)<=4
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="对地", 范围内=280)+队伍中此单位数量(需标签="炮塔I", 范围内=280)*2+队伍中此单位数量(需标签="机枪塔I", 范围内=280)*3)<=4
 临时标签添加:无保护
 [隐藏行动_有保护]
-自动触发:if (队伍中此单位数量(需标签="对地", 范围内=280)+队伍中此单位数量(需标签="炮塔I", 范围内=280)*2+队伍中此单位数量(需标签="机枪塔I", 范围内=280)*3)>4
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="对地", 范围内=280)+队伍中此单位数量(需标签="炮塔I", 范围内=280)*2+队伍中此单位数量(需标签="机枪塔I", 范围内=280)*3)>4
 临时标签删除:无保护
 [隐藏行动_无防空保护]
-自动触发:if (队伍中此单位数量(需标签="防空", 范围内=500)+队伍中此单位数量(需标签="对空", 范围内=500)+队伍中此单位数量(需标签="拦截", 范围内=500)+盟友有此单位数量(需标签="防空", 范围内=500)+盟友有此单位数量(需标签="对空", 范围内=500)+盟友有此单位数量(需标签="拦截", 范围内=500))<=1 and not 自身属于AI控制
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="防空", 范围内=500)+队伍中此单位数量(需标签="对空", 范围内=500)+队伍中此单位数量(需标签="拦截", 范围内=500)+盟友有此单位数量(需标签="防空", 范围内=500)+盟友有此单位数量(需标签="对空", 范围内=500)+盟友有此单位数量(需标签="拦截", 范围内=500))<=1 and not 自身属于AI控制
 临时标签添加:无防空家
 [隐藏行动_有防空保护]
-自动触发:if (队伍中此单位数量(需标签="防空", 范围内=500)+队伍中此单位数量(需标签="对空", 范围内=500)+队伍中此单位数量(需标签="拦截", 范围内=500)+盟友有此单位数量(需标签="防空", 范围内=500)+盟友有此单位数量(需标签="对空", 范围内=500)+盟友有此单位数量(需标签="拦截", 范围内=500))>1
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="防空", 范围内=500)+队伍中此单位数量(需标签="对空", 范围内=500)+队伍中此单位数量(需标签="拦截", 范围内=500)+盟友有此单位数量(需标签="防空", 范围内=500)+盟友有此单位数量(需标签="对空", 范围内=500)+盟友有此单位数量(需标签="拦截", 范围内=500))>1
 临时标签删除:无防空家
 [隐藏行动_攻击建造]
-自动触发:if 敌人有此单位数量(需标签="建造", 范围内=280, 超过=0) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 范围内=280, 超过=0) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方

================================================================================
文件: 机制\指挥中心\指挥信息模块.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥中心\指挥信息模块.ini
+++ 机制\指挥中心\指挥信息模块.ini
@@ -5,6 +5,7 @@
 @memory 遍历次数:number
 [资源_信息]
 隐藏:真
+#––「记忆系统」––#
 [隐藏行动_判断战力]
 自动触发:真
 提取资源仅搜索:真
@@ -16,8 +17,10 @@
 [隐藏行动_编号]
 需要条件:if 内存.编号[当前动作目标.resource.编号]==0 and 当前动作目标.resource.总战力>=81
 设置单位内存:编号[当前动作目标.resource.编号]=内存.遍历次数, 遍历次数=内存.遍历次数+1, 目标[内存.编号[当前动作目标.resource.编号]]=当前动作目标
+#––「计算模块」––#
 [隐藏行动_战力重新计算]
-自动触发:if 自身资源.时间%15==5
+自动触发:真
+需要条件:if 自身资源.时间%15==5
 设置单位内存:遍历次数=1, 编号=null
 shrinkArrays:目标
 [行动_指挥信息]

================================================================================
文件: 机制\指挥中心\智控中心.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥中心\智控中心.ini
+++ 机制\指挥中心\智控中心.ini
@@ -22,7 +22,8 @@
 需要条件:if not 自身属于AI控制
 增加资源:AI难度=1
 [隐藏行动_时间]
-自动触发:if 队伍中此单位数量(需标签="等待台", 少于=1)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="等待台", 少于=1)
 增加资源:时间:0.2
 也执行动作:投票时长增加
 [图像]
@@ -30,20 +31,25 @@
 图像缩放:2.4
 可见性:if 存活时间(指定时间后=1.5) and not 队伍中此单位数量(需标签="家", 超过=0)
 [隐藏行动_检测地形]
-自动触发:if 存活时间(指定时间后=0.2) and not 自身有标签(包含标签="检测完毕")
+自动触发:真
+需要条件:if 存活时间(指定时间后=0.2) and not 自身有标签(包含标签="检测完毕")
 产生单位:检测陆地, 检测海图, 检测团战, 对局检测, 战术分配, 位置检测, 陆地资源点, 陆军中控
 临时标签添加:检测完毕
 [隐藏行动_完善]
-自动触发:if 队伍中此单位数量(需标签="炮塔I", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="炮塔I", 超过=0)
 临时标签删除:需要补充
 [隐藏行动_补充]
-自动触发:if not 队伍中此单位数量(需标签="炮塔I", 超过=0)
+自动触发:真
+需要条件:if not 队伍中此单位数量(需标签="炮塔I", 超过=0)
 临时标签添加:需要补充
 [隐藏行动_警戒]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=666)+敌人有此单位数量(需标签="建造", 范围内=720)>=1 and ((队伍中此单位数量(需标签="炮塔I", 包含未完成的=true)+盟友有此单位数量(需标签="炮塔I", 包含未完成的=true))/自身资源.队伍)<(敌人有此单位数量(需标签="炮塔I", 包含未完成的=true)+3) and not 自身有资源(时间=280)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=666)+敌人有此单位数量(需标签="建造", 范围内=720)>=1 and ((队伍中此单位数量(需标签="炮塔I", 包含未完成的=true)+盟友有此单位数量(需标签="炮塔I", 包含未完成的=true))/自身资源.队伍)<(敌人有此单位数量(需标签="炮塔I", 包含未完成的=true)+3) and not 自身有资源(时间=280)
 临时标签添加:警戒
 [隐藏行动_警戒解除]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=666)+敌人有此单位数量(需标签="建造", 范围内=720)<1 or ((队伍中此单位数量(需标签="炮塔I", 包含未完成的=true)+盟友有此单位数量(需标签="炮塔I", 包含未完成的=true))/自身资源.队伍)>=(敌人有此单位数量(需标签="炮塔I", 包含未完成的=true)+3) or 自身有资源(时间=280)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=666)+敌人有此单位数量(需标签="建造", 范围内=720)<1 or ((队伍中此单位数量(需标签="炮塔I", 包含未完成的=true)+盟友有此单位数量(需标签="炮塔I", 包含未完成的=true))/自身资源.队伍)>=(敌人有此单位数量(需标签="炮塔I", 包含未完成的=true)+3) or 自身有资源(时间=280)
 临时标签删除:警戒
 [资源_编号]
 隐藏:真

================================================================================
文件: 机制\指挥中心\智控指挥模块.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥中心\智控指挥模块.ini
+++ 机制\指挥中心\智控指挥模块.ini
@@ -5,6 +5,7 @@
 @memory 遍历次数:number
 [资源_总战力]
 隐藏:真
+#––「记忆系统」––#
 [隐藏行动_判断战力]
 自动触发:真
 添加路径点动作类型:攻击
@@ -19,5 +20,6 @@
 需要条件:if 自身资源.最高战力<活动路径点目标.resource.总战力
 用逻辑设置资源:最高战力=活动路径点目标.resource.总战力
 [隐藏行动_重置]
-自动触发:if int(自身资源.时间)%30==0
+自动触发:真
+需要条件:if int(自身资源.时间)%30==0
 用逻辑设置资源:最高战力=0, 军队战力=0

================================================================================
文件: 机制\指挥中心\通用模块.ini
================================================================================

(内容完全相同)

================================================================================
文件: 机制\指挥中心\难度模块.ini
================================================================================

(内容完全相同)

================================================================================
文件: 机制\指挥系统\作战区块.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\作战区块.ini
+++ 机制\指挥系统\作战区块.ini
@@ -39,20 +39,22 @@
 添加路径点失败触发:陆军中控
 [隐藏行动_陆军中控]
 产生单位:陆军中控
+#––「战力模块」––#
 [隐藏行动_检索战力]
 提取资源标签:建筑物, 陆军, 海军, 建造
 提取资源触发行为:军队战力, 阵地战力
+#––「战力链接」––#
 [隐藏行动_检索盟友]
 提取资源标签:作战区块
 提取资源触发行为:盟友战力
+#––「失败模块」––#
 [隐藏行动_失败冷却]
-自动触发:真
-需要条件:if 队伍中此单位数量(需标签="地", 范围内=300, 少于=1)
+需要条件:if 队伍中此单位数量(需标签="地", 范围内=300, 少于=1) and 内存.对地总战力==0
 临时标签删除:作战区块
 [隐藏行动_重置]
-自动触发:真
-需要条件:if not 队伍中此单位数量(需标签="地", 范围内=300, 少于=1)
+需要条件:if not 队伍中此单位数量(需标签="地", 范围内=300, 少于=1) and 内存.对地总战力>0
 临时标签添加:作战区块
+#––「唯一设定」––#
 [隐藏行动_作战中控]
 自动触发:真
 需要条件:if 队伍中此单位数量(需标签="作战区块", 范围内=690)>1

================================================================================
文件: 机制\指挥系统\作战通用模块.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\作战通用模块.ini
+++ 机制\指挥系统\作战通用模块.ini
@@ -1,3 +1,4 @@
+#源文件 作战通用模块
 [核心]
 禁止加载:真
 自动触发间隔:1
@@ -55,8 +56,11 @@
 [隐藏行动_创建]
 自动触发事件:创建
 设置单位内存:遍历次数=1, 遍历次数X=1
+#length str substring
+#––「资源」––#
 [资源_冷却]
 隐藏:真
+#––「战力」––#
 [资源_战力]
 隐藏:真
 [资源_总战力]
@@ -66,6 +70,7 @@
 隐藏:真
 [资源_对空总战力]
 显示名称:防空战力
+#––「战力模块」––#
 [隐藏行动_检索战力]
 自动触发:真
 需要条件:if max(队伍中此单位数量(需标签="地", 范围内=460)+队伍中此单位数量(需标签="建筑物", 范围内=460)*0.01, 0.2)>自身资源.时间%15>0
@@ -77,6 +82,7 @@
 [隐藏行动_军队战力]
 需要条件:if 内存.编号[当前动作目标.resource.编号]==0 and not 当前动作目标.tags(包含标签="建筑物")
 设置单位内存:编号[当前动作目标.resource.编号]=内存.遍历次数, 遍历次数=内存.遍历次数+1, 对地总战力=内存.对地总战力+当前动作目标.resource.战力, 对空总战力=内存.对空总战力+当前动作目标.resource.对空战力
+#––「计算模块」––#
 [隐藏行动_战力重新计算]
 自动触发:真
 需要条件:if 自身资源.时间%15==0
@@ -86,6 +92,7 @@
 自动触发:真
 需要条件:if 自身资源.时间%15==3
 用逻辑设置资源:总战力=内存.对地总战力+内存.对地战力X, 对空总战力=内存.对空总战力+内存.对空战力X
+#––「战力链接」––#
 [隐藏行动_检索盟友]
 自动触发:真
 需要条件:if 3>自身资源.时间%15>2
@@ -98,16 +105,16 @@
 [隐藏行动_盟友战力]
 需要条件:if 内存.编号X[当前动作目标.resource.编号]==0
 设置单位内存:编号X[当前动作目标.resource.编号]=内存.遍历次数X, 遍历次数X=内存.遍历次数X+1, 对地战力X=内存.对地战力X+当前动作目标.读取单位内存('对地总战力', type='float')*(int(460-位距(self.当前动作目标, self))*0.002), 对空总战力=内存.对空战力X+当前动作目标.读取单位内存('对空总战力', type='float')*(int(460-位距(self.当前动作目标, self))*0.002)
+#––「失败模块」––#
 [隐藏行动_失败冷却]
 自动触发:真
-需要条件:if 内存.对地总战力==0
 增加资源:冷却:0.02
 [隐藏行动_重置]
 自动触发:真
-需要条件:if 内存.对地总战力>0
 用逻辑设置资源:冷却:0
 [隐藏行动_区块消失]
 删除自身:真
+#––「属性设定」––#
 [资源_编号]
 隐藏:真
 [隐藏行动_编号设定]

================================================================================
文件: 机制\指挥系统\区块通用模块.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\区块通用模块.ini
+++ 机制\指挥系统\区块通用模块.ini
@@ -1,3 +1,4 @@
+#读取 作战通用模块
 [核心]
 禁止加载:真
 复制与:作战通用模块.ini
@@ -8,9 +9,11 @@
 [隐藏行动_阵地战力]
 需要条件:if 内存.编号[当前动作目标.resource.编号]==0 and 当前动作目标.tags(包含标签="建筑物")
 设置单位内存:编号[当前动作目标.resource.编号]=内存.遍历次数, 遍历次数=内存.遍历次数+1, 阵地对地战力=内存.阵地对地战力+当前动作目标.resource.战力, 阵地对空战力=内存.阵地对空战力+当前动作目标.resource.对空战力
+#––「计算模块」––#
 [隐藏行动_战力重新计算]
 设置单位内存:遍历次数=1, 遍历次数X=1, 对地总战力=0, 对空总战力=0, 阵地对地战力=0, 阵地对空战力=0, 编号=null, 编号X=null, 对地战力X=0, 对空战力X=0, 阵地对地战力X=0, 阵地对空战力X=0
 [隐藏行动_重新计算完毕]
 用逻辑设置资源:总战力=内存.对地总战力+内存.阵地对地战力+内存.对地战力X+内存.阵地对地战力X, 对空总战力=内存.对空总战力+内存.阵地对空战力+内存.对空战力X+内存.阵地对空战力X
+#––「战力链接」––#
 [隐藏行动_盟友战力]
 设置单位内存:编号X[当前动作目标.resource.编号]=内存.遍历次数X, 遍历次数X=内存.遍历次数X+1, 对地战力X=内存.对地战力X+当前动作目标.读取单位内存('对地总战力', type='float')*(int(460-位距(self.当前动作目标, self))*0.002), 对空总战力=内存.对空战力X+当前动作目标.读取单位内存('对空总战力', type='float')*(int(460-位距(self.当前动作目标, self))*0.002), 阵地对地战力X=内存.阵地对地战力X+当前动作目标.读取单位内存('阵地对地战力', type='float')*(int(460-位距(self.当前动作目标, self))*0.002), 阵地对空战力X=内存.阵地对空战力X+当前动作目标.读取单位内存('阵地对空战力', type='float')*(int(460-位距(self.当前动作目标, self))*0.002)

================================================================================
文件: 机制\指挥系统\海军作战中控.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\海军作战中控.ini
+++ 机制\指挥系统\海军作战中控.ini
@@ -24,7 +24,9 @@
 显示给敌人:真
 界面闪烁:真
 pos:0
+#––「记忆系统」––#
 [隐藏行动_检索敌人]
+#1
 自动触发:if not 自身有活动的路径点(type='靠近目标')
 需要条件:if 敌人有此单位数量(需标签="海", 范围内=300, 超过=0) or 敌人有此单位数量(需标签="海", 范围内=540, 超过=0) and not 自身有标签(包含标签="开始进攻")
 清除所有路径点:真
@@ -47,14 +49,18 @@
 需要条件:if 自身资源.海军最高战力<活动路径点目标.resource.总战力
 用逻辑设置资源:海军最高战力=活动路径点目标.resource.总战力
 设置单位内存:目标[1]=活动路径点目标
+#––「战力模块」––#
 [隐藏行动_检索战力]
 提取资源标签:海军
 提取资源触发行为:军队战力
+#––「战力链接」––#
 [隐藏行动_检索盟友]
 提取资源标签:海军作战中控
 提取资源触发行为:盟友战力
+#––「计算模块」––#
 [隐藏行动_战力重新计算]
 用逻辑设置资源:海军最高战力=选择(自身有标签(包含标签="开始进攻"), 自身资源.海军最高战力, 0), 海军战力=选择(自身有标签(包含标签="开始进攻"), 自身资源.海军战力, 0)
+#––「唯一设定」––#
 [隐藏行动_唯一]
 自动触发:真
 需要条件:if not 自身有标签(包含标签="发起进攻") and 自身资源.时间%15==2 and not 自身有活动的路径点(type='靠近目标')
@@ -70,6 +76,7 @@
 [隐藏行动_区块消失]
 自动触发:真
 需要条件:if 自身有资源(冷却=30)
+#––「兵力聚集」––#
 [隐藏行动_判断分散]
 自动触发:真
 需要条件:if 队伍中此单位数量(需标签="海军", 范围内=460)>(队伍中此单位数量(需标签="海军", 范围内=300)*(1+队伍中此单位数量(需标签="海军", 范围内=460)*0.0036)) and 自身资源.时间%5==3 and 自身资源.总战力<自身资源.海军最高战力*1.275 and not 自身有标签(包含标签="开始进攻") and 自身资源.时间%15>=3
@@ -79,6 +86,7 @@
 自动触发:真
 需要条件:if 队伍中此单位数量(需标签="海军", 范围内=460)<=(队伍中此单位数量(需标签="海军", 范围内=300)*(1+队伍中此单位数量(需标签="海军", 范围内=460)*0.0036)) or 自身资源.总战力>=自身资源.海军最高战力*1.275 and 队伍中此单位数量(需标签="海军", 范围内=250, 超过=0)
 临时标签添加:聚集
+#––「作战模块」––#
 [隐藏行动_判断进攻]
 自动触发:if 敌人有此单位数量(需标签="海", 范围内=300, 少于=1) and 自身有标签(包含标签="开始进攻") or 敌人有此单位数量(需标签="海", 范围内=540, 少于=1)
 需要条件:if 自身有资源(总战力=52) and 自身有标签(包含标签="聚集") and 自身资源.时间%15>=3 and not 自身有活动的路径点(type='follow') or 自身有标签(包含标签="开始进攻") and not 自身有活动的路径点(type='follow')
@@ -100,6 +108,7 @@
 添加路径点靠近队伍:敌方
 添加路径点失败触发:区块消失
 [隐藏行动_存储战力]
+#需要条件:if self.hasActiveWaypoint(type='follow') and activeWaypointTarget.tags(includes="海军区块")
 设置单位内存:攻击目标=活动路径点目标
 也执行动作:更换目标
 [隐藏行动_更换目标]

================================================================================
文件: 机制\指挥系统\海军区块.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\海军区块.ini
+++ 机制\指挥系统\海军区块.ini
@@ -1,3 +1,4 @@
+#读取 区块通用模块
 [核心]
 name:海军区块
 tags:海军区块
@@ -9,6 +10,7 @@
 运动类型:水面
 移动速度:0
 [隐藏行动_海军作战中控]
+#1
 自动触发:真
 需要条件:if 自身在水中 and (自身资源.时间+自身资源.编号)%30==0
 清除所有路径点:真
@@ -18,24 +20,31 @@
 添加路径点失败触发:海军中控
 [隐藏行动_海军中控]
 产生单位:海军作战中控
+#––「战力模块」––#
 [隐藏行动_检索战力]
+#2
 提取资源标签:建筑物, 陆军, 海军
 提取资源触发行为:军队战力, 阵地战力
+#––「战力链接」––#
 [隐藏行动_检索盟友]
+#2
 提取资源标签:海军区块
 提取资源触发行为:盟友战力
+#––「唯一设定」––#
 [隐藏行动_作战中控]
+#1
 自动触发:真
 需要条件:if 队伍中此单位数量(需标签="海军区块", 范围内=690)>1
 删除自身:真
+#––「失败模块」––#
 [隐藏行动_失败冷却]
-自动触发:真
-需要条件:if 队伍中此单位数量(需标签="海", 范围内=390, 少于=1) and 队伍中此单位数量(需标签="海厂", 范围内=390, 少于=1)
+#3
+需要条件:if 队伍中此单位数量(需标签="海", 范围内=390, 少于=1) and 队伍中此单位数量(需标签="海厂", 范围内=390, 少于=1) and 内存.对地总战力==0
 增加资源:冷却:0.01
 临时标签删除:海军区块
 [隐藏行动_重置]
-自动触发:真
-需要条件:if not 队伍中此单位数量(需标签="海", 范围内=390, 少于=1) or not 队伍中此单位数量(需标签="海厂", 范围内=390, 少于=1)
+#3
+需要条件:if not 队伍中此单位数量(需标签="海", 范围内=390, 少于=1) or not 队伍中此单位数量(需标签="海厂", 范围内=390, 少于=1) and 内存.对地总战力>0
 用逻辑设置资源:冷却:0
 临时标签添加:海军区块
 [隐藏行动_区块消失]

================================================================================
文件: 机制\指挥系统\附属检测系统\协防指挥.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\附属检测系统\协防指挥.ini
+++ 机制\指挥系统\附属检测系统\协防指挥.ini
@@ -1,3 +1,4 @@
+#附属单位 负责检测基地是否需要回防
 [核心]
 name:协防指挥
 tags:协防指挥
@@ -11,17 +12,20 @@
 运动类型:空中
 移动速度:0.8
 [隐藏行动_协防]
-自动触发:if 队伍中此单位数量(需标签="需要回防", 超过=0) and not 自身有活动的路径点
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="需要回防", 超过=0) and not 自身有活动的路径点
 清除所有路径点:真
 添加路径点动作类型:移动
 添加路径点检索标签:需要回防
 添加路径点靠近队伍:己方
 临时标签添加:正在协防
 [隐藏行动_协防完毕]
-自动触发:if 队伍中此单位数量(需标签="需要回防", 少于=1)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="需要回防", 少于=1)
 临时标签删除:正在协防
 [隐藏行动_协防中]
-自动触发:if 队伍中此单位数量(需标签="需要回防", 范围内=400, 超过=0) and not 自身有活动的路径点(type='靠近目标') and 队伍中此单位数量(需标签="对地", 范围内=360)>=队伍中此单位数量(需标签="对地", 范围内=460)*0.9
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="需要回防", 范围内=400, 超过=0) and not 自身有活动的路径点(type='靠近目标') and 队伍中此单位数量(需标签="对地", 范围内=360)>=队伍中此单位数量(需标签="对地", 范围内=460)*0.9
 清除所有路径点:真
 添加路径点动作类型:靠近目标
 添加路径点检索标签:对地

================================================================================
文件: 机制\指挥系统\附属检测系统\距离检测.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\附属检测系统\距离检测.ini
+++ 机制\指挥系统\附属检测系统\距离检测.ini
@@ -1,3 +1,4 @@
+#距离检测单位 负责检测可达路径距离返回中控
 [核心]
 name:距离检测
 tags:距离检测
@@ -15,6 +16,7 @@
 禁止加载:真
 [图像]
 可见性:真
+图像缩放:1
 [运动]
 运动类型:跨悬崖
 移动速度:16.67
@@ -29,21 +31,26 @@
 [隐藏行动_链接中控]
 设置单位内存:作战中控=当前动作目标
 [隐藏行动_添加路径]
-自动触发:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)<=144 and not 自身有活动的路径点(type='移动') and 内存.作战中控.hasActiveWaypoint(type='follow')
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)<=144 and not 自身有活动的路径点(type='移动') and 内存.作战中控.hasActiveWaypoint(type='follow')
 清除所有路径点:真
 添加路径点动作类型:移动
 添加路径点来自参考:创建标记(x=内存.作战中控.活动路径点目标.x, y=内存.作战中控.活动路径点目标.y)
 [隐藏行动_清除路径]
-自动触发:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)>999
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)>999
 清除所有路径点:真
 [隐藏行动_过远折返]
-自动触发:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)>=999 and not 自身有活动的路径点(type='靠近目标')
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)>=999 and not 自身有活动的路径点(type='靠近目标')
 清除所有路径点:真
 添加路径点动作类型:靠近目标
 添加路径点检索标签:作战中控
 添加路径点靠近队伍:己方
 [隐藏行动_获取距离]
-自动触发:if 位距(内存.作战中控, self)>999 or 内存.计时>10
+自动触发:真
+需要条件:if 位距(内存.作战中控, self)>999 or 内存.计时>10
 [隐藏行动_中控消失]
-自动触发:if 内存.作战中控!=空单位 and 内存.作战中控.hp<1
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 内存.作战中控.hp<1
 删除自身:真

================================================================================
文件: 机制\指挥系统\附属检测系统\陆军中控-检测.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\附属检测系统\陆军中控-检测.ini
+++ 机制\指挥系统\附属检测系统\陆军中控-检测.ini
@@ -1,3 +1,4 @@
+#转换媒介 负责生成附属单位并且转换为中控
 [核心]
 name:陆军中控
 tags:作战中控, 陆军中控
@@ -12,7 +13,8 @@
 自动触发事件:创建
 产生单位:集结检测
 [隐藏行动_链接检测]
-自动触发:if 队伍中此单位数量(需标签="集结检测", 范围内=999, 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="集结检测", 范围内=999, 超过=0)
 提取资源仅搜索:真
 提取资源范围:999
 提取资源队伍:己方
@@ -22,6 +24,7 @@
 [隐藏行动_链接附属]
 设置单位内存:附属检测=当前动作目标
 也执行动作:唯一
+#––「唯一设定」––#
 [隐藏行动_唯一]
 添加路径点动作类型:攻击
 添加路径点检索标签:陆军作战中控
@@ -35,5 +38,6 @@
 [隐藏行动_转换]
 转换成:陆军作战中控
 [隐藏行动_重新获取]
-自动触发:if 存活时间(指定时间后=3)
+自动触发:真
+需要条件:if 存活时间(指定时间后=3)
 删除自身:真

================================================================================
文件: 机制\指挥系统\附属检测系统\集结检测.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\附属检测系统\集结检测.ini
+++ 机制\指挥系统\附属检测系统\集结检测.ini
@@ -1,3 +1,4 @@
+#附属单位 负责检测集结程度
 [核心]
 name:集结检测
 tags:集结检测
@@ -28,22 +29,27 @@
 [隐藏行动_链接中控]
 设置单位内存:作战中控=当前动作目标
 [隐藏行动_添加路径]
-自动触发:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)<=144 and not 自身有活动的路径点(type='移动') and 内存.作战中控.hasActiveWaypoint(type='follow')
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)<=144 and not 自身有活动的路径点(type='移动') and 内存.作战中控.hasActiveWaypoint(type='follow')
 清除所有路径点:真
 添加路径点动作类型:移动
 添加路径点来自参考:创建标记(x=内存.作战中控.活动路径点目标.x, y=内存.作战中控.活动路径点目标.y)
 [隐藏行动_清除路径]
-自动触发:if 内存.作战中控!=空单位 and 149>位距(内存.作战中控, self)>144
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 149>位距(内存.作战中控, self)>144
 清除所有路径点:真
 [隐藏行动_过远折返]
-自动触发:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)>=149 and not 自身有活动的路径点(type='靠近目标')
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 位距(内存.作战中控, self)>=149 and not 自身有活动的路径点(type='靠近目标')
 清除所有路径点:真
 添加路径点动作类型:靠近目标
 添加路径点检索标签:作战中控
 添加路径点靠近队伍:己方
 [隐藏行动_获取数量]
-自动触发:if 149>位距(内存.作战中控, self)>144
+自动触发:真
+需要条件:if 149>位距(内存.作战中控, self)>144
 用逻辑设置资源:陆军=队伍中此单位数量(需标签="陆军", 范围内=280)
 [隐藏行动_中控消失]
-自动触发:if 内存.作战中控!=空单位 and 内存.作战中控.hp<1
+自动触发:真
+需要条件:if 内存.作战中控!=空单位 and 内存.作战中控.hp<1
 删除自身:真

================================================================================
文件: 机制\指挥系统\陆军作战中控.ini
================================================================================

--- scripts/元/人机的玩笑/机制\指挥系统\陆军作战中控.ini
+++ 机制\指挥系统\陆军作战中控.ini
@@ -15,7 +15,7 @@
 [资源_陆军]
 隐藏:真
 [图像]
-可见性:假
+可见性:真
 [运动]
 运动类型:跨悬崖
 移动速度:0.8
@@ -29,29 +29,44 @@
 显示给敌人:真
 界面闪烁:真
 pos:0
+[行动_信息1]
+可见性:真
+text:聚集:%{自身有标签(包含标签='聚集')}\n开始进攻:%{自身有标签(包含标签='开始进攻')}\n未下达指令:%{自身有标签(包含标签='未下达指令')}\n总战力:%{自身资源.总战力}\n最高战力:%{自身资源.最高战力}\n附属陆军:%{内存.附属检测.resource.陆军}
+建造速度:0s
+显示类型:infoOnly
+显示给盟友:真
+显示给敌人:真
+界面闪烁:真
+pos:10
+#––「记忆系统」––#
 [隐藏行动_检索敌人]
 自动触发:if not 自身有活动的路径点(type='靠近目标')
 需要条件:if 敌人有此单位数量(需标签="地", 范围内=300, 超过=0) or 敌人有此单位数量(需标签="地", 范围内=520, 超过=0) and not 自身有标签(包含标签="发起进攻")
 清除所有路径点:真
 添加路径点动作类型:靠近目标
-添加路径点检索标签:修复, 家
-添加路径点靠近队伍:己方
+添加路径点检索标签:前线
+添加路径点靠近队伍:盟友
 [隐藏行动_压力值]
 自动触发:真
 需要条件:if 自身资源.时间%15>=3 and 自身资源.军队战力>=1 and 存活时间(指定时间后=5) and 自身资源.总战力>=1 and 自身自定义计时器(指定时间后=1)
 重置自定义计时器:真
 用逻辑设置资源:压力值=0.4+((自身资源.军队战力+0.01)/(自身资源.总战力+0.01))*0.6
+#––「战力模块」––#
 [隐藏行动_检索战力]
 提取资源标签:陆军
 提取资源触发行为:军队战力
+#––「战力链接」––#
 [隐藏行动_检索盟友]
 提取资源标签:陆军作战中控
 提取资源触发行为:盟友战力
+#––「唯一设定」––#
 [隐藏行动_区块消失]
 自动触发:if 敌人有此单位数量(需标签="作战区块", 超过=0)
 需要条件:if 自身有资源(冷却=30) and 自身有资源(时间=240) or 队伍中此单位数量(需标签="陆军作战中控", 范围内=250, 超过=1)
+#––「兵力聚集」––#
 [隐藏行动_判断分散]
 自动触发:真
+# 移除对时间片的依赖，减少因时间模运算导致的不同步卡死
 需要条件:if 队伍中此单位数量(需标签="陆军", 范围内=460)>(内存.附属检测.resource.陆军*(1+队伍中此单位数量(需标签="陆军", 范围内=460)*0.0036)) and 自身资源.时间%5==3 and 自身资源.总战力<自身资源.最高战力*1.44 and not 自身有标签(包含标签="开始进攻") and 自身资源.时间%15>=3
 临时标签删除:聚集, 开始进攻, 发起进攻
 临时标签添加:未下达指令
@@ -59,6 +74,7 @@
 自动触发:真
 需要条件:if 队伍中此单位数量(需标签="陆军", 范围内=460)<=(内存.附属检测.resource.陆军*(1+队伍中此单位数量(需标签="陆军", 范围内=460)*0.0036)) or 自身资源.总战力>自身资源.最高战力*1.44>0 and 队伍中此单位数量(需标签="陆军", 范围内=250, 超过=0)
 临时标签添加:聚集
+#––「作战模块」––#
 [隐藏行动_判断进攻]
 自动触发:if 敌人有此单位数量(需标签="地", 范围内=300, 少于=1) and 自身有标签(包含标签="发起进攻") or 敌人有此单位数量(需标签="地", 范围内=520, 少于=1)
 需要条件:if 自身有资源(总战力=52) and 自身有标签(包含标签="聚集") and 自身资源.时间%15>=3 and not 自身有活动的路径点(type='follow') or 自身有标签(包含标签="开始进攻") and not 自身有活动的路径点(type='follow')
@@ -73,6 +89,12 @@
 需要条件:if 自身有活动的路径点(type='follow') and 活动路径点目标.tags(包含标签="作战区块")
 设置单位内存:攻击目标=活动路径点目标
 也执行动作:更换目标
+[隐藏行动_clear_invalid_follow]
+自动触发:真
+# 清理失效的 follow waypoint，防止目标被删除后卡住
+需要条件:if 自身有活动的路径点(type='follow') and (活动路径点目标==空单位 or 活动路径点目标.hp<1)
+清除所有路径点:真
+临时标签添加:未下达指令
 [隐藏行动_更换目标]
 需要条件:if 活动路径点目标.resource.总战力==0 or 自身资源.总战力<(活动路径点目标.读取单位内存('阵地对地战力', type='float')+活动路径点目标.读取单位内存('阵地对地战力X', type='float'))*1.2 and 活动路径点目标.tags(包含标签="作战区块") and 自身资源.时间%15>=3
 清除所有路径点:真
@@ -80,6 +102,12 @@
 添加指定标签的随机单位:作战区块
 添加指定队伍的随机单位:敌方
 添加路径点匹配触发:存储战力
+[隐藏行动_heartbeat]
+自动触发:真
+# 温和心跳：若长时间无跟随且无聚集，恢复聚集状态并清理 waypoint，防止整把停滞
+需要条件:if not 自身有活动的路径点(type='follow') and not 自身有标签(包含标签='聚集') and 存活时间(指定时间后=25)
+临时标签添加:聚集
+清除所有路径点:真
 [隐藏行动_开始进攻]
 自动触发:真
 需要条件:if 自身有标签(包含标签="聚集") and 自身资源.总战力>=内存.攻击目标.resource.总战力*1.144
@@ -91,5 +119,5 @@
 临时标签添加:发起进攻
 [隐藏行动_取消进攻]
 自动触发:真
-需要条件:if 自身资源.总战力<内存.攻击目标.resource.总战力*1.144 and 自身资源.时间%15>=3
+需要条件:if 自身资源.总战力<内存.攻击目标.resource.总战力*1.144 and 自身资源.时间%15>=12
 临时标签删除:开始进攻, 发起进攻

================================================================================
文件: 机制\检测\位置检测.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\位置检测.ini
+++ 机制\检测\位置检测.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:位置检测
 半径:15
-禁用碰撞:真
 不可选择:真
 自动触发间隔:0.2s
 自动触发检查率:everyFrame
@@ -28,7 +27,8 @@
 添加路径点路径可达:假
 添加路径点检索标签:I
 [隐藏行动_获取无保护]
-自动触发:if 自身属于AI控制 and 自身资源.存活%18==0 and not 有全局标签(包含标签="禁止偷家")
+自动触发:真
+需要条件:if 自身属于AI控制 and 自身资源.存活%18==0 and not 有全局标签(包含标签="禁止偷家")
 添加路径点动作类型:攻击
 添加路径点靠近队伍:敌方
 添加路径点路径可达:假
@@ -42,9 +42,15 @@
 清除所有路径点:真
 添加全局标签:禁止偷家
 [隐藏行动_获取敌方坐标]
-自动触发:if 自身属于AI控制 and 自身有活动的路径点(type='攻击') and not 自身有标签(包含标签="判断完毕")
+自动触发:真
+需要条件:if 自身属于AI控制 and 自身有活动的路径点(type='攻击') and not 自身有标签(包含标签="判断完毕")
 设置单位内存:敌人=敌人有此单位数量(需标签="I"), 目标=活动路径点目标, 中间值[0]=(活动路径点目标.x-self.x)*0.32, 中间值[1]=(活动路径点目标.y-self.y)*0.32
 也执行动作:判断左右图, 判断上下图
+#高game.mapHeight()
+#宽game.mapWidth()
+#   y-
+#x-     x+
+#   y+
 [隐藏行动_判断左右图]
 需要条件:if 距离(self.x, 0, 内存.目标.x, 0)>=1024 and not 自身有标签(包含标签="判断完毕")
 清除所有路径点:真

================================================================================
文件: 机制\检测\对局检测.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\对局检测.ini
+++ 机制\检测\对局检测.ini
@@ -7,11 +7,11 @@
 复制与:ROOT:/机制/通用模版.ini
 半径:0
 不可选择:真
-禁用碰撞:真
 [图像]
 可见性:假
 [运动]
 运动类型:无
+#
 [全局资源_空优]
 隐藏:真
 [资源_资金阶级]
@@ -27,9 +27,11 @@
 用逻辑设置资源:每秒资金=(队伍中此单位数量(需标签="指挥中心I")*18+队伍中此单位数量(需标签="抽取器t1")*8+队伍中此单位数量(需标签="抽取器t2")*12+队伍中此单位数量(需标签="抽取器t3")*20+队伍中此单位数量(需标签="抽取器t3p")*30+队伍中此单位数量(需标签="蛋t1")*2+队伍中此单位数量(需标签="蛋t2")*7+队伍中此单位数量(需标签="蛋t3")*14), 冷却=自身资源.冷却+1, 空优=(队伍中此单位数量(需标签="拦截", 包含队列中的=true)+盟友有此单位数量(需标签="拦截")+队伍中此单位数量(需标签="重拦", 包含队列中的=true)+盟友有此单位数量(需标签="重拦"))/((敌人有此单位数量(需标签="拦截", 包含队列中的=true)+敌人有此单位数量(需标签="重拦", 包含队列中的=true))/自身资源.队伍)
 也执行动作:空优, 空劣
 [隐藏行动_信用]
-自动触发:if (自身资源.冷却+自身队伍id)%18==0
+自动触发:真
+需要条件:if (自身资源.冷却+自身队伍id)%18==0
 用逻辑添加资源:信用=max(min(((自身资源.资金-2000)*0.00001), 0.2), -0.1), 资金=选择(自身属于AI控制, (((自身资源.AI阶段)*24)+96)*(1.8/自身资源.AI难度), 0), 资金阶级=(-自身资源.资金阶级)+((-min(自身资源.资金, 170000)*0.00001)*0.0001+0.00037)*(自身资源.资金-2000)
 也执行动作:逻辑设置, AI阶段, 寻找资源, 自杀, 前期, 中期, 后期, 大后期, 禁空
+#发送消息至玩家:额外资金%{select(self.isControlledByAI,(((self.resource.AI阶段)*24)+96)*(1.8/self.resource.AI难度),0)/18/3*2} 倍率%{(1.8/self.resource.AI难度)}
 [隐藏行动_逻辑设置]
 用逻辑设置资源:失信=选择(自身资源.信用<=0, -自身资源.信用, 0), 概率=int(rnd(0, 100)), 获取阶级=自身资源.每秒资金*自身资源.AI难度*选择(自身资源.倍率>0 and 自身资源.倍率%0.5==0, 自身资源.倍率, 1)*0.85
 [隐藏行动_寻找资源]
@@ -40,27 +42,34 @@
 删除自身:真
 [隐藏行动_AI阶段]
 用逻辑设置资源:AI阶段=min(自身资源.获取阶级*((-min(自身资源.获取阶级, 365)*0.0001275)+0.1)+(自身资源.资金阶级)+(0.5+自身资源.失信)*-(队伍中此单位数量(需标签="厂")*0.2+队伍中此单位数量(需标签="T2厂")*0.8), 50)
+#––「阶段」––#
 [隐藏行动_前期]
 需要条件:if not 自身有资源(AI阶段=12)
 临时标签添加:前期
 临时标签删除:中期, 后期, 大后期
+#双厂可升T2
 [隐藏行动_中期]
 需要条件:if 自身有资源(AI阶段=15) and not 自身有资源(AI阶段=25)
 临时标签添加:中期
 临时标签删除:前期, 后期, 大后期
+#五厂T2 15升T3塔
 [隐藏行动_后期]
 需要条件:if 自身有资源(AI阶段=25) and not 自身有资源(AI阶段=35)
 临时标签添加:后期, 天界
 临时标签删除:前期, 中期, 大后期
+#出后期单位 导弹飞艇/重导
 [隐藏行动_大后期]
 需要条件:if 自身有资源(AI阶段=35)
 临时标签添加:大后期
 临时标签删除:前期, 中期, 后期
+#核弹洗地
+#––「禁空」––#
 [隐藏行动_禁空]
 需要条件:if 全图中此单位数量(需标签="禁空军", 超过=0)
 移除全局标签:空军
 添加全局标签:陆军, 海军
 产生单位:坦克战法
+#––「局势」––#
 [隐藏行动_空优]
 需要条件:if 自身资源.空优>1.2 or 自身资源.空优>0.6 and (敌人有此单位数量(需标签="I")-(敌人有此单位数量(需标签="ai")))<=0
 临时标签添加:空优

================================================================================
文件: 机制\检测\建立点\最终检测.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\建立点\最终检测.ini
+++ 机制\检测\建立点\最终检测.ini
@@ -2,7 +2,6 @@
 name:最终检测
 复制与:ROOT:/机制/通用模版.ini
 半径:10
-禁用碰撞:真
 不可选择:真
 地图位置产生指定单位:spawnPoint_eachActiveTeam
 [图像]
@@ -17,5 +16,6 @@
 自动触发事件:创建
 产生单位:海点选择(偏移角度=0), 海点选择(偏移角度=45), 海点选择(偏移角度=90), 海点选择(偏移角度=135), 海点选择(偏移角度=180), 海点选择(偏移角度=225), 海点选择(偏移角度=270), 海点选择(偏移角度=315)
 [隐藏行动_已沦陷]
-自动触发:if 队伍中此单位数量(需标签="建筑物", 少于=1, 范围内=500, 包含未完成的=true)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建筑物", 少于=1, 范围内=500, 包含未完成的=true)
 删除自身:真

================================================================================
文件: 机制\检测\建立点\水域检测.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\建立点\水域检测.ini
+++ 机制\检测\建立点\水域检测.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:水域检测
 半径:10
-禁用碰撞:真
 不可选择:真
 是建筑:真
 建筑覆盖范围:-2, -1, 2, 4
@@ -11,10 +10,12 @@
 [图像]
 image:海厂.png
 可见性:真
+图像缩放:1
 [运动]
 运动类型:水面
 移动速度:0
 移动忽略转向:真
 [隐藏行动_消失]
-自动触发:if 存活时间(指定时间后=10) or 队伍中此单位数量(需标签="海域锚点", 范围内=100)>0
+自动触发:真
+需要条件:if 存活时间(指定时间后=10) or 队伍中此单位数量(需标签="海域锚点", 范围内=100)>0
 删除自身:真

================================================================================
文件: 机制\检测\建立点\海岛检测点.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\建立点\海岛检测点.ini
+++ 机制\检测\建立点\海岛检测点.ini
@@ -22,9 +22,11 @@
 添加路径点靠近队伍:所有
 添加路径点路径可达:真
 [隐藏行动_靠近]
-自动触发:if 自身在水中
+自动触发:真
+需要条件:if 自身在水中
 清除所有路径点:真
 建造时无法移动:真
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=52)
+自动触发:真
+需要条件:if 存活时间(指定时间后=52)
 删除自身:真

================================================================================
文件: 机制\检测\建立点\海点判断.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\建立点\海点判断.ini
+++ 机制\检测\建立点\海点判断.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:海点判断
 半径:10
-禁用碰撞:真
 不可选择:真
 自动触发间隔:0.01s
 自动触发检查率:everyFrame
@@ -23,20 +22,23 @@
 添加路径点匹配触发:返回锚点
 添加路径点失败触发:寻找敌人
 [隐藏行动_寻找海岛点]
-自动触发:if 全图中此单位数量(需标签="海岛检测点", 超过=0) and not 自身有标签(包含标签="海点判断完毕")
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="海岛检测点", 超过=0) and not 自身有标签(包含标签="海点判断完毕")
 添加路径点动作类型:移动
 添加路径点检索标签:海岛检测点
 添加路径点靠近队伍:所有
 添加路径点路径可达:真
 添加路径点匹配触发:返回锚点
 [隐藏行动_寻找敌人]
-自动触发:if 全图中此单位数量(需标签="海岛检测点", 少于=1) and not 自身有标签(包含标签="海点判断完毕")
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="海岛检测点", 少于=1) and not 自身有标签(包含标签="海点判断完毕")
 添加路径点动作类型:移动
 添加路径点检索标签:建造
 添加路径点靠近队伍:敌方
 添加路径点路径可达:假
 [隐藏行动_发现敌人]
-自动触发:if 敌人有此单位数量(需标签="建造", 范围内=240)+敌人有此单位数量(需标签="建筑物", 范围内=240)+中立有此单位数量(需标签="资源点", 范围内=240)>0 and 存活时间(指定时间后=1) and not 自身有标签(包含标签="海点判断成功")
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="建造", 范围内=240)+敌人有此单位数量(需标签="建筑物", 范围内=240)+中立有此单位数量(需标签="资源点", 范围内=240)>0 and 存活时间(指定时间后=1) and not 自身有标签(包含标签="海点判断成功")
 也执行动作:返回锚点
 [隐藏行动_返回锚点]
 临时标签添加:海点判断成功
@@ -45,5 +47,6 @@
 添加路径点检索标签:海点
 添加路径点靠近队伍:己方
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=10) and not 自身在移动 or 队伍中此单位数量(需标签="海域锚点", 范围内=100)>0
+自动触发:真
+需要条件:if 存活时间(指定时间后=10) and not 自身在移动 or 队伍中此单位数量(需标签="海域锚点", 范围内=100)>0
 删除自身:真

================================================================================
文件: 机制\检测\建立点\海点选择.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\建立点\海点选择.ini
+++ 机制\检测\建立点\海点选择.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:海点选择
 半径:10
-禁用碰撞:真
 不可选择:真
 自动触发间隔:0.01s
 自动触发检查率:everyFrame
@@ -20,13 +19,16 @@
 添加路径点相对偏移:0, 2000
 添加路径点路径可达:假
 [隐藏行动_生成锚点]
-自动触发:if 自身在地块类型上(type="WATER") and 队伍中此单位数量(需标签="海点", 范围内=20)<1
+自动触发:真
+需要条件:if 自身在地块类型上(type="WATER") and 队伍中此单位数量(需标签="海点", 范围内=20)<1
 产生单位:海厂锚点, 海点判断
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=2) or 自身在悬崖上 or 自身有资源(海上时间=4)
+自动触发:真
+需要条件:if 存活时间(指定时间后=2) or 自身在悬崖上 or 自身有资源(海上时间=4)
 删除自身:真
 [隐藏行动_在海上]
-自动触发:if 自身在地块类型上(type="WATER")
+自动触发:真
+需要条件:if 自身在地块类型上(type="WATER")
 增加资源:海上时间=1
 [资源_海上时间]
 隐藏:真

================================================================================
文件: 机制\检测\建立点\海点锚点.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\建立点\海点锚点.ini
+++ 机制\检测\建立点\海点锚点.ini
@@ -3,11 +3,11 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:海点
 半径:10
-禁用碰撞:真
 不可选择:真
 自动触发间隔:0.1s
 [图像]
 可见性:if 自身有标签(包含标签="海厂锚点") and 存活时间(指定时间内=10)
+图像缩放:1
 [炮塔_1]
 x:0
 y:0
@@ -25,19 +25,24 @@
 移动速度:0
 移动忽略转向:真
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=10) and not 自身有标签(包含标签="海域锚点")
+自动触发:真
+需要条件:if 存活时间(指定时间后=10) and not 自身有标签(包含标签="海域锚点")
 删除自身:真
 [隐藏行动_锚点]
-自动触发:if 队伍中此单位数量(需标签="水域检测", 范围内=100)>0
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="水域检测", 范围内=100)>0
 临时标签添加:海域锚点
 [隐藏行动_海点判断成功]
-自动触发:if 队伍中此单位数量(需标签="海点判断成功", 范围内=40)>0 and not 自身有标签(包含标签="海域锚点")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="海点判断成功", 范围内=40)>0 and not 自身有标签(包含标签="海域锚点")
 指定攻击地面炮塔:1
 指定攻击地面数量:1
 指定攻击地面坐标:0, 0
 [隐藏行动_无敌人]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=320)+敌人有此单位数量(需标签="空对地", 范围内=320)==0 and 自身有标签(包含标签="海域锚点")
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=320)+敌人有此单位数量(需标签="空对地", 范围内=320)==0 and 自身有标签(包含标签="海域锚点")
 临时标签添加:海厂锚点
 [隐藏行动_有敌人]
-自动触发:if 敌人有此单位数量(需标签="对地", 范围内=320)+敌人有此单位数量(需标签="空对地", 范围内=320)>0
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="对地", 范围内=320)+敌人有此单位数量(需标签="空对地", 范围内=320)>0
 临时标签删除:海厂锚点

================================================================================
文件: 机制\检测\建立点\陆地检测点.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\建立点\陆地检测点.ini
+++ 机制\检测\建立点\陆地检测点.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:陆地检测点
 半径:1
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
@@ -12,7 +11,8 @@
 移动速度:0.1
 移动忽略转向:真
 [隐藏行动_检测地形]
-自动触发:if 自身自定义计时器(指定时间后=5)
+自动触发:真
+需要条件:if 自身自定义计时器(指定时间后=5)
 重置自定义计时器:真
 添加路径点动作类型:移动
 添加路径点检索标签:建筑物, 建造, I

================================================================================
文件: 机制\检测\战术分配.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配.ini
+++ 机制\检测\战术分配.ini
@@ -12,21 +12,26 @@
 [运动]
 运动类型:无
 移动速度:0
+#局势判断
 [资源_敌人]
 隐藏:真
 [资源_队友]
 隐藏:真
 [隐藏行动_判断局势]
-自动触发:if 存活时间(指定时间后=0.1) and 存活时间(指定时间内=0.2)
+自动触发:真
+需要条件:if 存活时间(指定时间后=0.1) and 存活时间(指定时间内=0.2)
 用逻辑设置资源:敌人=(敌人有此单位数量(需标签="I")), 队友=(队伍中此单位数量(需标签="I")+盟友有此单位数量(需标签="I")), 队伍=1
 [隐藏行动_混战]
-自动触发:if 存活时间(指定时间后=0.2) and 自身资源.敌人!=自身资源.队友 and not 有全局标签(包含标签="混战")
+自动触发:真
+需要条件:if 存活时间(指定时间后=0.2) and 自身资源.敌人!=自身资源.队友 and not 有全局标签(包含标签="混战")
 用逻辑设置资源:队伍=(自身资源.敌人/自身资源.队友)
 设置单位内存:局势='混战'
 添加全局标签:混战, 对塔完毕
 [隐藏行动_团战]
-自动触发:if 存活时间(指定时间后=0.2) and 自身资源.敌人==自身资源.队友 and not 有全局标签(包含标签="混战")
+自动触发:真
+需要条件:if 存活时间(指定时间后=0.2) and 自身资源.敌人==自身资源.队友 and not 有全局标签(包含标签="混战")
 设置单位内存:局势='团战'
+#战术分配
 [隐藏行动_进攻位]
 自动触发:if 存活时间(指定时间后=1) and 队伍中此单位数量(需标签="后排", 少于=1) and not 自身有标签(包含标签="筛选完毕")
 需要条件:if not 有全局标签(包含标签="后排") and not 有全局标签(包含标签="前排")
@@ -66,10 +71,12 @@
 需要条件:if not 有全局标签(包含标签="海军") and not 有全局标签(包含标签="陆军") and not 有全局标签(包含标签="空军")
 添加全局标签:陆军
 [隐藏行动_团队]
-自动触发:if 存活时间(指定时间后=1.8) and not 自身有标签(包含标签="筛选完毕")
+自动触发:真
+需要条件:if 存活时间(指定时间后=1.8) and not 自身有标签(包含标签="筛选完毕")
 临时标签添加:筛选完毕
 发送消息至玩家:团队初步筛选完成
 [隐藏行动_结束]
-自动触发:if 存活时间(指定时间后=2)
+自动触发:真
+需要条件:if 存活时间(指定时间后=2)
 删除自身:真
 发送消息至玩家:已完成战术分配，当前局势可能为%{内存.局势}，应该有%{自身资源.队伍}支敌对队伍, 请注意

================================================================================
文件: 机制\检测\战术分配\偷家战术.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\偷家战术.ini
+++ 机制\检测\战术分配\偷家战术.ini
@@ -3,12 +3,13 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:偷家战术, 坦克战
 半径:15
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
 [运动]
 运动类型:无
 [隐藏行动_结束]
-自动触发:if 有全局标签(包含标签="偷家完毕") or 有全局标签(包含标签="禁止偷家")
+自动触发:真
+需要条件:if 有全局标签(包含标签="偷家完毕") or 有全局标签(包含标签="禁止偷家")
 删除自身:真
+#发送消息至所有:%{self.teamId+1}

================================================================================
文件: 机制\检测\战术分配\前排.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\前排.ini
+++ 机制\检测\战术分配\前排.ini
@@ -3,7 +3,6 @@
 tags:前排
 复制与:ROOT:/机制/通用模版.ini
 半径:15
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假

================================================================================
文件: 机制\检测\战术分配\发育位.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\发育位.ini
+++ 机制\检测\战术分配\发育位.ini
@@ -3,14 +3,14 @@
 复制与:ROOT:/机制/通用模版.ini
 半径:15
 tags:发育位
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
 [运动]
 运动类型:无
 [隐藏行动_转换]
-自动触发:if not 盟友有此单位数量(需标签="前排", 超过=3) and 存活时间(指定时间后=10)
+自动触发:真
+需要条件:if not 盟友有此单位数量(需标签="前排", 超过=3) and 存活时间(指定时间后=10)
 添加全局标签:前排
 移除全局标签:后排
 转换成:前排

================================================================================
文件: 机制\检测\战术分配\坦克战法.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\坦克战法.ini
+++ 机制\检测\战术分配\坦克战法.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:坦克战
 半径:15
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假

================================================================================
文件: 机制\检测\战术分配\机械战法.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\机械战法.ini
+++ 机制\检测\战术分配\机械战法.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:机械战
 半径:15
-禁用碰撞:真
 不可选择:真
 @memory 战术:string
 [图像]

================================================================================
文件: 机制\检测\战术分配\检测陆地.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\检测陆地.ini
+++ 机制\检测\战术分配\检测陆地.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:检测陆地
 半径:15
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
@@ -22,5 +21,6 @@
 [隐藏行动_死路]
 添加全局标签:ai死路
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=10)
+自动触发:真
+需要条件:if 存活时间(指定时间后=10)
 删除自身:真

================================================================================
文件: 机制\检测\战术分配\禁空.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\禁空.ini
+++ 机制\检测\战术分配\禁空.ini
@@ -7,6 +7,7 @@
 创建为敌对中立:真
 [图像]
 可见性:真
+图像缩放:1
 [攻击]
 可攻击:真
 可攻击空中单位:真

================================================================================
文件: 机制\检测\战术分配\空军战术.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\战术分配\空军战术.ini
+++ 机制\检测\战术分配\空军战术.ini
@@ -10,5 +10,7 @@
 [运动]
 运动类型:无
 [隐藏行动_结束]
-自动触发:if 有全局标签(包含标签="空军完毕") or 有全局标签(包含标签="禁止偷家")
+自动触发:真
+需要条件:if 有全局标签(包含标签="空军完毕") or 有全局标签(包含标签="禁止偷家")
 删除自身:真
+#发送消息至所有:%{self.teamId+1}

================================================================================
文件: 机制\检测\检测团战.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\检测团战.ini
+++ 机制\检测\检测团战.ini
@@ -8,7 +8,6 @@
 复制与:ROOT:/机制/通用模版.ini
 半径:1
 不可选择:真
-禁用碰撞:真
 [图像]
 可见性:假
 [运动]
@@ -24,8 +23,8 @@
 添加路径点检索标签:建筑物, 建造
 添加路径点靠近队伍:敌方
 [隐藏行动_防线位]
-自动触发:if 自身有标签(包含标签="前排")
-需要条件:if 盟友有此单位数量(需标签="前排", 少于=1) and 盟友有此单位数量(需标签="I", 超过=0) and not 有全局标签(包含标签="防线")
+自动触发:真
+需要条件:if 盟友有此单位数量(需标签="前排", 少于=1) and 盟友有此单位数量(需标签="I", 超过=0) and not 有全局标签(包含标签="防线") and 自身有标签(包含标签="前排")
 临时标签添加:防线
 添加全局标签:防线
 也执行动作:机械战法
@@ -38,12 +37,12 @@
 移除全局标签:陆军
 产生单位:发育位
 [隐藏行动_发现盟友]
-自动触发:if 盟友有此单位数量(需标签="I", 范围内=500, 超过=0) and 盟友有此单位数量(需标签="后排")<int(盟友有此单位数量(需标签="I")*0.25)
-需要条件:if not 自身有标签(包含标签="后排") and not 自身有标签(包含标签="前排")
+自动触发:真
+需要条件:if not 自身有标签(包含标签="后排") and not 自身有标签(包含标签="前排") and 盟友有此单位数量(需标签="I", 范围内=500, 超过=0) and 盟友有此单位数量(需标签="后排")<int(盟友有此单位数量(需标签="I")*0.25)
 临时标签添加:后排
 [隐藏行动_发现敌人]
-自动触发:if 敌人有此单位数量(需标签="检测团战", 超过=0, 范围内=500) and 盟友有此单位数量(需标签="前排")<int(盟友有此单位数量(需标签="I")*0.75) or 盟友有此单位数量(需标签="后排")>=int(盟友有此单位数量(需标签="I")*0.5)
-需要条件:if not 自身有标签(包含标签="前排") and not 自身有标签(包含标签="后排")
+需要条件:if 敌人有此单位数量(需标签="检测团战", 超过=0, 范围内=500) and 盟友有此单位数量(需标签="前排")<int(盟友有此单位数量(需标签="I")*0.75) or 盟友有此单位数量(需标签="后排")>=int(盟友有此单位数量(需标签="I")*0.5)
+自动触发:if not 自身有标签(包含标签="前排") and not 自身有标签(包含标签="后排")
 也执行动作:防线位
 临时标签添加:前排
 [隐藏行动_结算]
@@ -52,5 +51,6 @@
 临时标签添加:后排
 也执行动作:发育位
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=3)
+自动触发:真
+需要条件:if 存活时间(指定时间后=3)
 删除自身:真

================================================================================
文件: 机制\检测\检测海图.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\检测海图.ini
+++ 机制\检测\检测海图.ini
@@ -2,7 +2,6 @@
 name:检测海图
 复制与:ROOT:/机制/通用模版.ini
 半径:10
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
@@ -44,5 +43,6 @@
 [隐藏行动_不通]
 添加全局标签:ai出空军, 对塔完毕
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=30)
+自动触发:真
+需要条件:if 存活时间(指定时间后=30)
 删除自身:真

================================================================================
文件: 机制\检测\检测点\检测岩浆.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\检测点\检测岩浆.ini
+++ 机制\检测\检测点\检测岩浆.ini
@@ -6,7 +6,6 @@
 tags:检测岩浆
 半径:25
 不可选择:真
-禁用碰撞:真
 自动触发间隔:0.4s
 [图像]
 可见性:假
@@ -15,7 +14,8 @@
 移动速度:0.1
 移动忽略转向:真
 [隐藏行动_检测地形]
-自动触发:if not 自身有标签(包含标签="岩浆点") and 存活时间(指定时间后=0.4)
+自动触发:真
+需要条件:if not 自身有标签(包含标签="岩浆点") and 存活时间(指定时间后=0.4)
 添加路径点动作类型:移动
 添加路径点靠近队伍:所有
 添加路径点检索标签:建筑物, 建造, I
@@ -28,7 +28,8 @@
 [隐藏行动_死亡]
 删除自身:真
 [隐藏行动_检测建造]
-自动触发:if 自身有标签(包含标签="岩浆点")
+自动触发:真
+需要条件:if 自身有标签(包含标签="岩浆点")
 添加路径点动作类型:移动
 添加路径点靠近队伍:所有
 添加路径点检索标签:建造

================================================================================
文件: 机制\检测\检测点\检测悬崖.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\检测点\检测悬崖.ini
+++ 机制\检测\检测点\检测悬崖.ini
@@ -6,7 +6,6 @@
 tags:检测悬崖
 半径:25
 不可选择:真
-禁用碰撞:真
 自动触发间隔:0.4s
 [图像]
 可见性:假
@@ -15,7 +14,8 @@
 移动速度:0.1
 移动忽略转向:真
 [隐藏行动_检测地形]
-自动触发:if not 自身有标签(包含标签="悬崖点") and 存活时间(指定时间后=0.4)
+自动触发:真
+需要条件:if not 自身有标签(包含标签="悬崖点") and 存活时间(指定时间后=0.4)
 添加路径点动作类型:移动
 添加路径点靠近队伍:所有
 添加路径点检索标签:建筑物, 建造, I
@@ -28,7 +28,8 @@
 [隐藏行动_死亡]
 删除自身:真
 [隐藏行动_检测建造]
-自动触发:if 自身有标签(包含标签="悬崖点")
+自动触发:真
+需要条件:if 自身有标签(包含标签="悬崖点")
 添加路径点动作类型:移动
 添加路径点靠近队伍:所有
 添加路径点检索标签:建造

================================================================================
文件: 机制\检测\检测点\检测海岛.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\检测点\检测海岛.ini
+++ 机制\检测\检测点\检测海岛.ini
@@ -6,7 +6,6 @@
 tags:检测海岛
 半径:25
 不可选择:真
-禁用碰撞:真
 自动触发间隔:0.5s
 [图像]
 可见性:假
@@ -15,7 +14,8 @@
 移动速度:0.1
 移动忽略转向:真
 [隐藏行动_检测地形]
-自动触发:if 存活时间(指定时间后=0.5) and not 自身有标签(包含标签="海岛点") and 中立有此单位数量(需标签="岩浆点", 范围内=50, 少于=1)
+自动触发:真
+需要条件:if 存活时间(指定时间后=0.5) and not 自身有标签(包含标签="海岛点") and 中立有此单位数量(需标签="岩浆点", 范围内=50, 少于=1)
 添加路径点动作类型:移动
 添加路径点靠近队伍:所有
 添加路径点检索标签:建筑物, 建造, I
@@ -27,10 +27,12 @@
 临时标签添加:海岛点
 产生单位:海岛检测点
 [隐藏行动_死亡]
-自动触发:if 中立有此单位数量(需标签="岩浆点", 范围内=50, 超过=0)
+自动触发:真
+需要条件:if 中立有此单位数量(需标签="岩浆点", 范围内=50, 超过=0)
 删除自身:真
 [隐藏行动_检测建造]
-自动触发:if 自身有标签(包含标签="海岛点")
+自动触发:真
+需要条件:if 自身有标签(包含标签="海岛点")
 添加路径点动作类型:移动
 添加路径点靠近队伍:所有
 添加路径点检索标签:建造

================================================================================
文件: 机制\检测\检测陆地.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\检测陆地.ini
+++ 机制\检测\检测陆地.ini
@@ -3,7 +3,6 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:检测陆地
 半径:15
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
@@ -22,5 +21,6 @@
 [隐藏行动_死路]
 添加全局标签:ai死路, 对塔完毕
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=10)
+自动触发:真
+需要条件:if 存活时间(指定时间后=10)
 删除自身:真

================================================================================
文件: 机制\检测\特殊开局\小坦速攻.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\特殊开局\小坦速攻.ini
+++ 机制\检测\特殊开局\小坦速攻.ini
@@ -3,12 +3,12 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:小坦速攻, 特殊开局
 半径:15
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
 [运动]
 运动类型:无
 [隐藏行动_速攻结束]
-自动触发:if 存活时间(指定时间后=180)
+自动触发:真
+需要条件:if 存活时间(指定时间后=180)
 删除自身:真

================================================================================
文件: 机制\检测\特殊开局\甲空速攻.ini
================================================================================

--- scripts/元/人机的玩笑/机制\检测\特殊开局\甲空速攻.ini
+++ 机制\检测\特殊开局\甲空速攻.ini
@@ -3,12 +3,12 @@
 复制与:ROOT:/机制/通用模版.ini
 tags:甲空速攻, 特殊开局
 半径:15
-禁用碰撞:真
 不可选择:真
 [图像]
 可见性:假
 [运动]
 运动类型:无
 [隐藏行动_速攻结束]
-自动触发:if 存活时间(指定时间后=180)
+自动触发:真
+需要条件:if 存活时间(指定时间后=180)
 删除自身:真

================================================================================
文件: 机制\测试\伤害计算-空.ini
================================================================================

--- scripts/元/人机的玩笑/机制\测试\伤害计算-空.ini
+++ 机制\测试\伤害计算-空.ini
@@ -31,10 +31,12 @@
 限制范围:160
 size:1
 [隐藏行动_开始]
-自动触发:if 最后转换时间(指定时间内=0)
+自动触发:真
+需要条件:if 最后转换时间(指定时间内=0)
 临时标签添加:计算
 [隐藏行动_开始计时]
-自动触发:if 队伍中此单位数量(需标签="计算", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="计算", 超过=0)
 增加资源:计算:1
 [全局资源_附加分]
 显示名称:附加分
@@ -43,10 +45,12 @@
 显示颜色: #EEE8AA
 隐藏:真
 [隐藏行动_附属]
-自动触发:if 自身资源.计算==5
+自动触发:真
+需要条件:if 自身资源.计算==5
 产生单位:空-附属*4
 [隐藏行动_计算]
-自动触发:if 自身有资源(计算=30)
+自动触发:真
+需要条件:if 自身有资源(计算=30)
 指定攻击地面炮塔:1
 临时标签删除:计算
 临时标签添加:结算
@@ -64,6 +68,11 @@
 图像缩放:9
 [动画_idle]
 动画条件:idle
+#body_0s:{frame:0}
+#body_1s:{frame:0}
+#body_1.4s:{frame:3}
+#body_2.7s:{frame:3}
+#body_3s:{frame:0}
 arm1_0s:{透明度:0.4}
 arm1_1.5s:{透明度:0.7}
 arm1_2.6s:{透明度:0.6}

================================================================================
文件: 机制\测试\伤害计算-陆.ini
================================================================================

--- scripts/元/人机的玩笑/机制\测试\伤害计算-陆.ini
+++ 机制\测试\伤害计算-陆.ini
@@ -31,10 +31,12 @@
 限制范围:160
 size:1
 [隐藏行动_开始]
-自动触发:if 最后转换时间(指定时间内=0)
+自动触发:真
+需要条件:if 最后转换时间(指定时间内=0)
 临时标签添加:计算
 [隐藏行动_开始计时]
-自动触发:if 队伍中此单位数量(需标签="计算", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="计算", 超过=0)
 增加资源:计算:1
 [全局资源_附加分]
 显示名称:附加分
@@ -43,10 +45,12 @@
 显示颜色: #EEE8AA
 隐藏:真
 [隐藏行动_附属]
-自动触发:if 自身资源.计算==5
+自动触发:真
+需要条件:if 自身资源.计算==5
 产生单位:陆-附属*4
 [隐藏行动_计算]
-自动触发:if 自身有资源(计算=30)
+自动触发:真
+需要条件:if 自身有资源(计算=30)
 指定攻击地面炮塔:1
 临时标签删除:计算
 发送消息至所有:本次伤害评分:%{int(自身最大血量 - 自身血量)+选择(自身血量<自身最大血量, 500, 选择(自身护盾<200, 500-自身护盾, 0))+自身资源.附加分} 群伤附加分：%{自身资源.附加分} 破盾附加分：%{选择(自身血量<自身最大血量, 500, 选择(自身护盾<200, 500-自身护盾, 0))}
@@ -63,6 +67,11 @@
 图像缩放:9
 [动画_idle]
 动画条件:idle
+#body_0s:{frame:0}
+#body_1s:{frame:0}
+#body_1.4s:{frame:3}
+#body_2.7s:{frame:3}
+#body_3s:{frame:0}
 arm1_0s:{透明度:0.4}
 arm1_1.5s:{透明度:0.7}
 arm1_2.6s:{透明度:0.6}

================================================================================
文件: 机制\测试\伤害计算.ini
================================================================================

--- scripts/元/人机的玩笑/机制\测试\伤害计算.ini
+++ 机制\测试\伤害计算.ini
@@ -50,6 +50,11 @@
 图像缩放:9
 [动画_idle]
 动画条件:idle
+#body_0s:{frame:0}
+#body_1s:{frame:0}
+#body_1.4s:{frame:3}
+#body_2.7s:{frame:3}
+#body_3s:{frame:0}
 arm1_0s:{透明度:0.4}
 arm1_1.5s:{透明度:0.7}
 arm1_2.6s:{透明度:0.6}

================================================================================
文件: 机制\测试\空-附属.ini
================================================================================

--- scripts/元/人机的玩笑/机制\测试\空-附属.ini
+++ 机制\测试\空-附属.ini
@@ -29,7 +29,8 @@
 自动触发事件:tookDamage
 用逻辑添加资源:附加分=((自身资源.生命)-(自身血量))*0.25, 生命=(-自身资源.生命)+自身血量
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=10)
+自动触发:真
+需要条件:if 存活时间(指定时间后=10)
 删除自身:真
 [图像]
 总帧数:1

================================================================================
文件: 机制\测试\重拦生成器.ini
================================================================================

--- scripts/元/人机的玩笑/机制\测试\重拦生成器.ini
+++ 机制\测试\重拦生成器.ini
@@ -73,50 +73,62 @@
 临时标签添加:64重拦
 也添加进队列:1, 64
 [隐藏行动_003]
-自动触发:if 敌人有此单位数量(需标签="3重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="3重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 2, 3
 [隐藏行动_005]
-自动触发:if 敌人有此单位数量(需标签="5重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="5重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 2, 3, 4, 5
 [隐藏行动_007]
-自动触发:if 敌人有此单位数量(需标签="7重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="7重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 2, 3, 4, 5, 6, 7
 [隐藏行动_0010]
-自动触发:if 敌人有此单位数量(需标签="10重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="10重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 2, 3, 4, 5, 6, 7, 8, 9, 10
 [隐藏行动_0014]
-自动触发:if 敌人有此单位数量(需标签="14重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="14重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14
 [隐藏行动_0024]
-自动触发:if 敌人有此单位数量(需标签="24重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="24重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 24
 [隐藏行动_0032]
-自动触发:if 敌人有此单位数量(需标签="32重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="32重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 32
 [隐藏行动_0048]
-自动触发:if 敌人有此单位数量(需标签="48重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="48重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 48
 [隐藏行动_0064]
-自动触发:if 敌人有此单位数量(需标签="64重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="64重拦", 超过=0) and not 自身有标签(包含标签="结束") and 自身队列量(少于=1)
 临时标签添加:结束
 也添加进队列:1, 64
 [隐藏行动_00]
-自动触发:if 敌人有此单位数量(需标签="结束", 超过=0)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="结束", 超过=0)
 临时标签删除:3重拦, 5重拦, 7重拦, 10重拦, 14重拦, 24重拦, 32重拦, 48重拦, 64重拦
 临时标签添加:继续
 [隐藏行动_000]
-自动触发:if 敌人有此单位数量(需标签="继续", 超过=0)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="继续", 超过=0)
 临时标签删除:结束
 [隐藏行动_0000]
-自动触发:if not 敌人有此单位数量(需标签="结束", 超过=0)
+自动触发:真
+需要条件:if not 敌人有此单位数量(需标签="结束", 超过=0)
 临时标签删除:继续
 [隐藏行动_1]
 临时标签添加:计算
@@ -183,14 +195,16 @@
 也添加进队列:64
 也执行队列或需执行条件:if 队伍中此单位数量(需标签="重拦", 少于=64, 包含队列中的=true)
 [隐藏行动_开始计时]
-自动触发:if 队伍中此单位数量(需标签="计算", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="计算", 超过=0)
 增加资源:计算:0.1
 [资源_计算]
 显示名称:计算
 显示颜色: #EEE8AA
 隐藏:真
 [隐藏行动_计算]
-自动触发:if 自身有资源(计算=15) and 敌人有此单位数量(需标签="重拦", 少于=1) or 自身有资源(计算=45)
+自动触发:真
+需要条件:if 自身有资源(计算=15) and 敌人有此单位数量(需标签="重拦", 少于=1) or 自身有资源(计算=45)
 指定攻击地面炮塔:1
 用逻辑设置资源:计算:0
 临时标签删除:计算
@@ -205,6 +219,11 @@
 图像缩放:9
 [动画_idle]
 动画条件:idle
+#body_0s:{frame:0}
+#body_1s:{frame:0}
+#body_1.4s:{frame:3}
+#body_2.7s:{frame:3}
+#body_3s:{frame:0}
 arm1_0s:{透明度:0.4}
 arm1_1.5s:{透明度:0.7}
 arm1_2.6s:{透明度:0.6}

================================================================================
文件: 机制\测试\陆-附属.ini
================================================================================

--- scripts/元/人机的玩笑/机制\测试\陆-附属.ini
+++ 机制\测试\陆-附属.ini
@@ -30,7 +30,8 @@
 用逻辑添加资源:附加分=((自身资源.生命)-(自身血量))*0.25, 生命=(-自身资源.生命)+自身血量
 发送消息至所有:附加分%{自身资源.附加分}
 [隐藏行动_死亡]
-自动触发:if 存活时间(指定时间后=10)
+自动触发:真
+需要条件:if 存活时间(指定时间后=10)
 删除自身:真
 [图像]
 总帧数:1

================================================================================
文件: 机制\等待台.ini
================================================================================

--- scripts/元/人机的玩笑/机制\等待台.ini
+++ 机制\等待台.ini
@@ -1,3 +1,4 @@
+#读取 通用模版
 [核心]
 name:等待台
 复制与:通用模版.ini
@@ -5,10 +6,8 @@
 半径:25
 tags:等待台, 指挥中心I, 家, 建筑物
 资金获取:18
-禁用碰撞:真
 自动触发间隔:1
 允许超高频触发:真
-禁止接受指令:真
 @memory 倍率:number[]
 [图像]
 image:ROOT:/机制/指挥系统/等待台.png
@@ -26,11 +25,13 @@
 发送消息至玩家:对局将在两秒后开始，请耐心等待
 设置单位内存:倍率[0]=自身资源.资金
 [隐藏行动_检查倍率]
-自动触发:if 自身资源.计时==40
+自动触发:真
+需要条件:if 自身资源.计时==40
 设置单位内存:倍率[1]=(自身资源.资金-内存.倍率[0])/自身资源.每秒资金/自身资源.AI难度
 用逻辑设置资源:倍率=内存.倍率[1]
 [隐藏行动_开始对局]
-自动触发:if 自身资源.计时>=120 and 队伍中此单位数量(需标签="等待台", 超过=0)
+自动触发:真
+需要条件:if 自身资源.计时>=120 and 队伍中此单位数量(需标签="等待台", 超过=0)
 删除自身:真
 产生单位:指挥中心I
 用逻辑设置资源:资金=内存.倍率[0]

================================================================================
文件: 机制\等待开始.ini
================================================================================

--- scripts/元/人机的玩笑/机制\等待开始.ini
+++ 机制\等待开始.ini
@@ -1,3 +1,4 @@
+#读取 通用模版
 [核心]
 name:等待开始
 覆盖单位:builder
@@ -9,9 +10,6 @@
 是建造者:真
 tags:建造, 地, 等待开始
 禁止直接攻击:假
-禁止接受指令:真
-[图像]
-可见性:假
 [攻击]
 可攻击:假
 [运动]
@@ -20,10 +18,12 @@
 [资源_变化概率]
 隐藏:真
 [隐藏行动_变化概率]
-自动触发:if 1>存活时间>0.8
+自动触发:真
+需要条件:if 1>存活时间>0.8
 用逻辑设置资源:变化概率=rnd(0, 10000)*0.01
 [隐藏行动_变]
-自动触发:if 队伍中此单位数量(需标签="等待台", 少于=1) and 队伍中此单位数量(需标签="等待开始", 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="等待台", 少于=1) and 队伍中此单位数量(需标签="等待开始", 超过=0)
 也执行动作:有真人, 纯人机
 [隐藏行动_常态]
 需要条件:if 队伍中此单位数量(需标签="特殊开局", 少于=1)

================================================================================
文件: 机制\资源\天空资源点.ini
================================================================================

--- scripts/元/人机的玩笑/机制\资源\天空资源点.ini
+++ 机制\资源\天空资源点.ini
@@ -16,7 +16,8 @@
 加速度:10
 移动忽略转向:真
 [隐藏行动_抵达]
-自动触发:if 中立有此单位数量(需标签="资源点", 范围内=10, 少于=1) and not 自身有标签(包含标签="造抽取") and not 自身在移动
+自动触发:真
+需要条件:if 中立有此单位数量(需标签="资源点", 范围内=10, 少于=1) and not 自身有标签(包含标签="造抽取") and not 自身在移动
 清除所有路径点:真
 添加指定标签的随机单位:建造不可达
 添加路径点动作类型:移动
@@ -28,17 +29,21 @@
 添加路径点动作类型:移动
 添加路径点靠近队伍:所有
 [隐藏行动_造抽取]
-自动触发:if 中立有此单位数量(需标签="资源点", 超过=0, 范围内=10)
+自动触发:真
+需要条件:if 中立有此单位数量(需标签="资源点", 超过=0, 范围内=10)
 临时标签添加:造抽取
 [隐藏行动_辅助建造]
-自动触发:if 队伍中此单位数量(需标签="建造", 范围内=280)>0 and not 自身有标签(包含标签="辅助建造") and 自身有标签(包含标签="造抽取") and 有全局标签(包含标签="对塔完毕")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建造", 范围内=280)>0 and not 自身有标签(包含标签="辅助建造") and 自身有标签(包含标签="造抽取") and 有全局标签(包含标签="对塔完毕")
 临时标签添加:辅助建造
 [隐藏行动_建造]
-自动触发:if 队伍中此单位数量(需标签="建造", 范围内=110)>0 and 自身有标签(包含标签="辅助建造")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建造", 范围内=110)>0 and 自身有标签(包含标签="辅助建造")
 指定攻击地面炮塔:1
 临时标签添加:开始建造
 [隐藏行动_消失]
-自动触发:if 全图中此单位数量(需标签="经济", 超过=0, 范围内=25, 包含未完成的=true) or 敌人有此单位数量(需标签="对地", 超过=0, 范围内=310) and 存活时间(指定时间后=3) or not 自身属于AI控制
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="经济", 超过=0, 范围内=25, 包含未完成的=true) or 敌人有此单位数量(需标签="对地", 超过=0, 范围内=310) and 存活时间(指定时间后=3) or not 自身属于AI控制
 删除自身:真
 [炮塔_1]
 x:0

================================================================================
文件: 机制\资源\抢矿中.ini
================================================================================

--- scripts/元/人机的玩笑/机制\资源\抢矿中.ini
+++ 机制\资源\抢矿中.ini
@@ -43,18 +43,22 @@
 添加路径点靠近队伍:所有
 添加路径点失败触发:消失
 [隐藏行动_造抽取]
-自动触发:if 中立有此单位数量(需标签="资源点", 超过=0, 范围内=10) and 全图中此单位数量(需标签="建造不可达", 范围内=25, 少于=1) and 队伍中此单位数量(需标签="I", 范围内=280, 少于=1)
+自动触发:真
+需要条件:if 中立有此单位数量(需标签="资源点", 超过=0, 范围内=10) and 全图中此单位数量(需标签="建造不可达", 范围内=25, 少于=1) and 队伍中此单位数量(需标签="I", 范围内=280, 少于=1)
 清除所有路径点:真
 临时标签添加:家矿点
 [隐藏行动_辅助建造]
-自动触发:if 队伍中此单位数量(需标签="建造", 范围内=280)>0 and not 自身有标签(包含标签="辅助建造") and 自身有标签(包含标签="家矿点")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建造", 范围内=280)>0 and not 自身有标签(包含标签="辅助建造") and 自身有标签(包含标签="家矿点")
 临时标签添加:辅助建造
 [隐藏行动_建造]
-自动触发:if 队伍中此单位数量(需标签="建造", 范围内=110)>0 and 自身有标签(包含标签="辅助建造")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建造", 范围内=110)>0 and 自身有标签(包含标签="辅助建造")
 指定攻击地面炮塔:1
 临时标签添加:开始建造
 [隐藏行动_消失]
-自动触发:if 全图中此单位数量(需标签="经济", 超过=0, 范围内=25) or 敌人有此单位数量(需标签="对地", 范围内=310)>(队伍中此单位数量(需标签="激光防御塔", 范围内=160)) or 全图中此单位数量(需标签="建造不可达", 范围内=25, 超过=0) and 存活时间(指定时间后=2) or not 自身属于AI控制
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="经济", 超过=0, 范围内=25) or 敌人有此单位数量(需标签="对地", 范围内=310)>(队伍中此单位数量(需标签="激光防御塔", 范围内=160)) or 全图中此单位数量(需标签="建造不可达", 范围内=25, 超过=0) and 存活时间(指定时间后=2) or not 自身属于AI控制
 删除自身:真
 [炮塔_1]
 x:0

================================================================================
文件: 机制\资源\资源点.ini
================================================================================

--- scripts/元/人机的玩笑/机制\资源\资源点.ini
+++ 机制\资源\资源点.ini
@@ -24,11 +24,14 @@
 临时标签添加:外矿
 [图像]
 可见性:假
+#如果 自身有标签(includes="中矿") and 存活时间(几秒内=10) 或 自身有标签(includes="外矿") and 存活时间(几秒内=5)
 [运动]
 运动类型:无
 [隐藏行动_发现抽取器]
-自动触发:if 全图中此单位数量(需标签="经济", 范围内=20, 包含未完成的=true)>0
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="经济", 范围内=20, 包含未完成的=true)>0
 临时标签删除:资源点, 中矿, 外矿, 家矿
 [隐藏行动_未发现抽取器]
-自动触发:if 全图中此单位数量(需标签="经济", 范围内=20, 包含未完成的=true)<1
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="经济", 范围内=20, 包含未完成的=true)<1
 临时标签添加:资源点

================================================================================
文件: 机制\资源\陆地资源点.ini
================================================================================

--- scripts/元/人机的玩笑/机制\资源\陆地资源点.ini
+++ 机制\资源\陆地资源点.ini
@@ -48,14 +48,17 @@
 清除所有路径点:真
 临时标签添加:可达资源
 [隐藏行动_辅助建造]
-自动触发:if 队伍中此单位数量(需标签="建造", 范围内=280)>0 and not 自身有标签(包含标签="辅助建造") and 自身有标签(包含标签="可达资源") and 有全局标签(包含标签="对塔完毕")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建造", 范围内=280)>0 and not 自身有标签(包含标签="辅助建造") and 自身有标签(包含标签="可达资源") and 有全局标签(包含标签="对塔完毕")
 临时标签添加:辅助建造
 [隐藏行动_建造]
-自动触发:if 队伍中此单位数量(需标签="建造", 范围内=110)>0 and 自身有标签(包含标签="辅助建造") and 有全局标签(包含标签="对塔完毕")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="建造", 范围内=110)>0 and 自身有标签(包含标签="辅助建造") and 有全局标签(包含标签="对塔完毕")
 指定攻击地面炮塔:1
 临时标签添加:开始建造
 [隐藏行动_消失]
-自动触发:if 全图中此单位数量(需标签="经济", 超过=0, 范围内=25) or 敌人有此单位数量(需标签="对地", 范围内=310)>(队伍中此单位数量(需标签="激光防御塔", 范围内=160)) or 全图中此单位数量(需标签="建造不可达", 范围内=25, 超过=0) and 存活时间(指定时间后=2) or not 自身属于AI控制
+自动触发:真
+需要条件:if 全图中此单位数量(需标签="经济", 超过=0, 范围内=25) or 敌人有此单位数量(需标签="对地", 范围内=310)>(队伍中此单位数量(需标签="激光防御塔", 范围内=160)) or 全图中此单位数量(需标签="建造不可达", 范围内=25, 超过=0) and 存活时间(指定时间后=2) or not 自身属于AI控制
 删除自身:真
 [炮塔_1]
 x:0

================================================================================
文件: 机制\通用模版.ini
================================================================================

--- scripts/元/人机的玩笑/机制\通用模版.ini
+++ 机制\通用模版.ini
@@ -1,3 +1,4 @@
+#源文件 通用模版
 [核心]
 禁止加载:真
 价格:999
@@ -7,6 +8,7 @@
 建造速度:0
 availableInDemo:真
 视野:0
+禁用碰撞:真
 禁止受到伤害:真
 禁止接受指令:真
 禁止直接攻击:真
@@ -15,8 +17,9 @@
 自动触发间隔:2s
 自动触发检查率:每8帧
 [图像]
+可见性:假
 image:ROOT:/白光.png
-图像缩放:1
+图像缩放:0
 缩放图标永不显示:真
 [攻击]
 可攻击:假

================================================================================
文件: 空中单位\all-units.template
================================================================================

--- scripts/元/人机的玩笑/空中单位\all-units.template
+++ 空中单位\all-units.template
@@ -1,4 +1,7 @@
 [核心]
+自动触发间隔:2s
+自动触发检查率:每8帧
+#空军通用模块
 [全局资源_AI阶段]
 显示名称:阶段
 显示颜色: #E8FFE8
@@ -10,26 +13,31 @@
 显示颜色: #FFFFFF
 [全局资源_概率]
 隐藏:真
+#––「攻击范围」––#
 [资源_攻击范围]
 隐藏:真
 [隐藏行动_攻击范围]
 自动触发事件:创建
 用逻辑设置资源:攻击范围=${攻击.攻击距离}
 临时标签添加:安全
+#––「空危模块」––#
 [隐藏行动_空危]
-自动触发:if (队伍中此单位数量(需标签="空对地", 范围内=180)+队伍中此单位数量(需标签="对地", 范围内=120)*2.8)<(敌人有此单位数量(需标签="家", 范围内=350)*3+敌人有此单位数量(需标签="对空", 范围内=280)*1.2+敌人有此单位数量(需标签="防空", 范围内=310)*3+敌人有此单位数量(需标签="中防空", 范围内=390)*5+敌人有此单位数量(需标签="大防空", 范围内=465)*9) or 队伍中此单位数量(需标签="拦截", 范围内=500, 少于=1) or (队伍中此单位数量(需标签="拦截", 范围内=500))<(敌人有此单位数量(需标签="拦截", 范围内=810)) and 敌人有此单位数量(需标签="拦截", 范围内=500, 少于=1)
-需要条件:if 自身有标签(包含标签="安全")
+#1.防止重拦被地面防空单位白嫖的同时判断我方对地单位能否对对方产生威胁 2.防止空对地单位被拦截白嫖
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="空对地", 范围内=180)+队伍中此单位数量(需标签="对地", 范围内=120)*2.8)<(敌人有此单位数量(需标签="家", 范围内=350)*3+敌人有此单位数量(需标签="对空", 范围内=280)*1.2+敌人有此单位数量(需标签="防空", 范围内=310)*3+敌人有此单位数量(需标签="中防空", 范围内=390)*5+敌人有此单位数量(需标签="大防空", 范围内=465)*9) or 队伍中此单位数量(需标签="拦截", 范围内=500, 少于=1) or (队伍中此单位数量(需标签="拦截", 范围内=500))<(敌人有此单位数量(需标签="拦截", 范围内=810)) and 敌人有此单位数量(需标签="拦截", 范围内=500, 少于=1) and 自身有标签(包含标签="安全")
 临时标签删除:安全
 [隐藏行动_空危解除]
-自动触发:if (队伍中此单位数量(需标签="空对地", 范围内=180)+队伍中此单位数量(需标签="对地", 范围内=120)*2.8)>=(敌人有此单位数量(需标签="家", 范围内=350)*3+敌人有此单位数量(需标签="对空", 范围内=280)*1.2+敌人有此单位数量(需标签="防空", 范围内=310)*3+敌人有此单位数量(需标签="中防空", 范围内=390)*5+敌人有此单位数量(需标签="大防空", 范围内=465)*9) or (队伍中此单位数量(需标签="拦截", 范围内=500))>(敌人有此单位数量(需标签="拦截", 范围内=810))
-需要条件:if not 自身有标签(包含标签="安全") and 自身资源.逃跑冷却>=0
+自动触发:真
+需要条件:if (队伍中此单位数量(需标签="空对地", 范围内=180)+队伍中此单位数量(需标签="对地", 范围内=120)*2.8)>=(敌人有此单位数量(需标签="家", 范围内=350)*3+敌人有此单位数量(需标签="对空", 范围内=280)*1.2+敌人有此单位数量(需标签="防空", 范围内=310)*3+敌人有此单位数量(需标签="中防空", 范围内=390)*5+敌人有此单位数量(需标签="大防空", 范围内=465)*9) or (队伍中此单位数量(需标签="拦截", 范围内=500))>(敌人有此单位数量(需标签="拦截", 范围内=810)) and not 自身有标签(包含标签="安全") and 自身资源.逃跑冷却>=0
 用逻辑设置资源:逃跑冷却:-4
 临时标签添加:安全
 重置自定义计时器:真
+#––「逃跑模块」––#
 [资源_逃跑冷却]
 显示名称:逃跑
 [隐藏行动_逃跑]
-自动触发:if not 自身有标签(包含标签="安全") and not 自身有标签(包含标签="已锁定") and 自身属于AI控制 and 自身自定义计时器(指定时间后=1) and not 自身有活动的路径点(type='靠近目标')
+自动触发:真
+需要条件:if not 自身有标签(包含标签="安全") and not 自身有标签(包含标签="已锁定") and 自身属于AI控制 and 自身自定义计时器(指定时间后=1) and not 自身有活动的路径点(type='靠近目标')
 重置自定义计时器:if 自身自定义计时器(指定时间后=1.2)
 增加资源:逃跑冷却:1
 添加路径点动作类型:靠近目标
@@ -42,6 +50,7 @@
 添加路径点动作类型:靠近目标
 添加路径点检索标签:家
 添加路径点靠近队伍:己方
+#––「攻击模块」––#
 [隐藏行动_攻击优先级]
 自动触发:if 自身有标签(包含标签="安全") and 自身有标签(包含标签="空对地") and not 自身有标签(包含标签="已定制") and 自身在攻击 and 自身属于AI控制 and 自身自定义计时器(指定时间后=1)
 重置自定义计时器:真

================================================================================
文件: 空中单位\拦截\AA激光射束战机\AA战机-加速.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\拦截\AA激光射束战机\AA战机-加速.ini
+++ 空中单位\拦截\AA激光射束战机\AA战机-加速.ini
@@ -7,7 +7,8 @@
 builtFrom_1_name:IGNORE
 builtFrom_1_pos:IGNORE
 [隐藏行动_autoSwitchBack]
-自动触发:if 自身能量(空的=true)
+自动触发:真
+需要条件:if 自身能量(空的=true)
 转换成:AA激光射束战机
 资源类型:能量
 资源类型设置数值:6

================================================================================
文件: 空中单位\拦截\AA激光射束战机\AA战机.ini
================================================================================

(内容完全相同)

================================================================================
文件: 空中单位\拦截\拦截机\轻拦截.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\拦截\拦截机\轻拦截.ini
+++ 空中单位\拦截\拦截机\轻拦截.ini
@@ -8,6 +8,7 @@
 质量:3000
 科技等级:1
 建造速度:0.002
+#availableInDemo: true
 覆盖单位:airship, c_interceptor
 半径:11
 是生物:假
@@ -16,7 +17,8 @@
 builtFrom_1_pos:2
 tags:拦截
 [隐藏行动_进攻]
-自动触发:if 自身属于AI控制 and 自身有标签(包含标签="安全") and 敌人有此单位数量(需标签="空对地", 超过=0)
+自动触发:真
+需要条件:if 自身属于AI控制 and 自身有标签(包含标签="安全") and 敌人有此单位数量(需标签="空对地", 超过=0)
 添加路径点动作类型:攻击
 添加路径点检索标签:空对地
 添加路径点靠近队伍:敌方

================================================================================
文件: 空中单位\拦截\重型拦截机\护送堡垒重拦.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\拦截\重型拦截机\护送堡垒重拦.ini
+++ 空中单位\拦截\重型拦截机\护送堡垒重拦.ini
@@ -5,18 +5,21 @@
 自动触发检查率:每8帧
 tags:拦截, 重拦, 护送重拦, 已锁定
 [隐藏行动_掩护]
-自动触发:if 队伍中此单位数量(需标签="运输堡垒", 范围内=210, 超过=0) and 敌人有此单位数量(范围内=520, 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="运输堡垒", 范围内=210, 超过=0) and 敌人有此单位数量(范围内=520, 超过=0)
 添加路径点动作类型:guard
 添加路径点检索标签:防空, 对空, 拦截
 添加路径点检索范围:520
 添加路径点靠近队伍:敌方
 [隐藏行动_跟随]
-自动触发:if 队伍中此单位数量(需标签="运输堡垒", 范围内=210, 少于=1) and 队伍中此单位数量(需标签="护送重拦", 范围内=210, 少于=25)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="运输堡垒", 范围内=210, 少于=1) and 队伍中此单位数量(需标签="护送重拦", 范围内=210, 少于=25)
 添加路径点动作类型:guard
 添加路径点检索标签:运输堡垒
 添加路径点靠近队伍:己方
 [隐藏行动_护送结束]
-自动触发:if 队伍中此单位数量(需标签="护送重拦")>=(选择(队伍中此单位数量(需标签="运输堡垒")>0, 队伍中此单位数量(需标签="运输堡垒")*25, 0))
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="护送重拦")>=(选择(队伍中此单位数量(需标签="运输堡垒")>0, 队伍中此单位数量(需标签="运输堡垒")*25, 0))
 清除所有路径点:真
 添加路径点动作类型:follow
 添加路径点检索标签:修复

================================================================================
文件: 空中单位\拦截\重型拦截机\护送运输重拦.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\拦截\重型拦截机\护送运输重拦.ini
+++ 空中单位\拦截\重型拦截机\护送运输重拦.ini
@@ -3,17 +3,20 @@
 复制与:重拦模版.ini
 tags:拦截, 重拦, 护送运输, 已锁定
 [隐藏行动_掩护]
-自动触发:if 队伍中此单位数量(需标签="请求重拦", 范围内=210)>0 and 敌人有此单位数量(范围内=520, 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="请求重拦", 范围内=210)>0 and 敌人有此单位数量(范围内=520, 超过=0)
 添加路径点动作类型:移动
 添加路径点检索标签:防空, 对空, 拦截
 添加路径点靠近队伍:敌方
 添加路径点检索范围:520
 [隐藏行动_跟随]
-自动触发:if 队伍中此单位数量(需标签="请求重拦", 范围内=210)<=0 and not 自身有活动的路径点(type='靠近目标')
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="请求重拦", 范围内=210)<=0 and not 自身有活动的路径点(type='靠近目标')
 清除所有路径点:真
 添加路径点动作类型:靠近目标
 添加路径点检索标签:请求重拦
 添加路径点靠近队伍:己方
 [隐藏行动_正常]
-自动触发:if 队伍中此单位数量(需标签="护送运输")>=(选择(队伍中此单位数量(需标签="请求重拦")>0, 队伍中此单位数量(需标签="重拦")*0.2, 0)) or 队伍中此单位数量(需标签="重拦")+盟友有此单位数量(需标签="重拦")<(敌人有此单位数量(需标签="重拦", 包含队列中的=true)*1.25)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="护送运输")>=(选择(队伍中此单位数量(需标签="请求重拦")>0, 队伍中此单位数量(需标签="重拦")*0.2, 0)) or 队伍中此单位数量(需标签="重拦")+盟友有此单位数量(需标签="重拦")<(敌人有此单位数量(需标签="重拦", 包含队列中的=true)*1.25)
 转换成:重型拦截机I

================================================================================
文件: 空中单位\拦截\重型拦截机\重型拦截机.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\拦截\重型拦截机\重型拦截机.ini
+++ 空中单位\拦截\重型拦截机\重型拦截机.ini
@@ -4,7 +4,8 @@
 自动触发间隔:0.2s
 覆盖单位:heavyInterceptor
 [隐藏行动_进攻]
-自动触发:if 自身有标签(包含标签="安全") and not 自身在攻击 and 自身属于AI控制 and 队伍中此单位数量(需标签="集结完毕", 范围内=500, 超过=0)
+自动触发:真
+需要条件:if 自身有标签(包含标签="安全") and not 自身在攻击 and 自身属于AI控制 and 队伍中此单位数量(需标签="集结完毕", 范围内=500, 超过=0)
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:运输堡垒
@@ -29,8 +30,10 @@
 需要条件:if 队伍中此单位数量(需标签="护送运输")<(选择(队伍中此单位数量(需标签="请求重拦")>0, 队伍中此单位数量(需标签="重拦")*0.2, 0)) and 队伍中此单位数量(需标签="重拦")+盟友有此单位数量(需标签="重拦")>(敌人有此单位数量(需标签="重拦", 包含队列中的=true)*1.25) and 最后转换时间(指定时间后=30)
 转换成:护送重拦I
 [隐藏行动_转]
-自动触发:if not 自身属于AI控制
+自动触发:真
+需要条件:if not 自身属于AI控制
 转换成:重拦模版
 [隐藏行动_降频]
-自动触发:if 敌人有此单位数量(需标签="拦截", 范围内=210, 少于=1)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="拦截", 范围内=210, 少于=1)
 转换成:降频重拦

================================================================================
文件: 空中单位\拦截\重型拦截机\重拦作战模块.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\拦截\重型拦截机\重拦作战模块.ini
+++ 空中单位\拦截\重型拦截机\重拦作战模块.ini
@@ -1,5 +1,7 @@
 [核心]
 禁止加载:真
+#参考与修改自鲨鲨的重拦代码
+#集结模块
 [隐藏行动_主要]
 自动触发:if 队伍中此单位数量(需标签="重拦", 范围内=144, 超过=2) or 队伍中此单位数量(需标签="重拦", 范围内=390, 少于=3)
 需要条件:if 队伍中此单位数量(需标签="主要", 范围内=999, 少于=1) and not 自身有标签(包含标签="主要") and 自身属于AI控制
@@ -12,37 +14,43 @@
 添加路径点动作类型:靠近目标
 添加路径点检索标签:主要
 添加路径点靠近队伍:己方
+#指挥模块
 [隐藏行动_唯一主要]
 自动触发:if 队伍中此单位数量(需标签="主要", 范围内=999, 超过=1)
 需要条件:if 自身有标签(包含标签="主要")
 临时标签删除:主要, 集结完毕
 [隐藏行动_集结完毕]
-自动触发:if ((队伍中此单位数量(需标签="重拦", 范围内=149)+盟友有此单位数量(需标签="重拦", 范围内=149))*(1+(队伍中此单位数量(需标签="重拦", 范围内=390)+盟友有此单位数量(需标签="重拦", 范围内=390))*(100+(队伍中此单位数量(需标签="重拦", 范围内=390)+盟友有此单位数量(需标签="重拦", 范围内=390))/1.96)*0.0001))>=(队伍中此单位数量(需标签="重拦", 范围内=500)) or (队伍中此单位数量(需标签="重拦", 范围内=390))==(队伍中此单位数量(需标签="重拦", 范围内=500)) and 敌人有此单位数量(需标签="拦截", 范围内=666, 超过=0)
-需要条件:if 自身属于AI控制 and 自身有标签(包含标签="主要") and not 自身有标签(包含标签="集结完毕")
+需要条件:if ((队伍中此单位数量(需标签="重拦", 范围内=149)+盟友有此单位数量(需标签="重拦", 范围内=149))*(1+(队伍中此单位数量(需标签="重拦", 范围内=390)+盟友有此单位数量(需标签="重拦", 范围内=390))*(100+(队伍中此单位数量(需标签="重拦", 范围内=390)+盟友有此单位数量(需标签="重拦", 范围内=390))/1.96)*0.0001))>=(队伍中此单位数量(需标签="重拦", 范围内=500)) or (队伍中此单位数量(需标签="重拦", 范围内=390))==(队伍中此单位数量(需标签="重拦", 范围内=500)) and 敌人有此单位数量(需标签="拦截", 范围内=666, 超过=0)
+自动触发:if 自身属于AI控制 and 自身有标签(包含标签="主要") and not 自身有标签(包含标签="集结完毕")
 临时标签添加:集结完毕
 [隐藏行动_掉队]
-自动触发:if (队伍中此单位数量(需标签="重拦", 范围内=149)*(1+队伍中此单位数量(需标签="重拦", 范围内=390)*(100+队伍中此单位数量(需标签="重拦", 范围内=390)/1.96)*0.0001))<(队伍中此单位数量(需标签="重拦", 范围内=500)) and 敌人有此单位数量(需标签="拦截", 范围内=500, 少于=1) or (队伍中此单位数量(需标签="重拦", 范围内=390))<(队伍中此单位数量(需标签="重拦", 范围内=666))
-需要条件:if 自身属于AI控制 and 自身有标签(包含标签="集结完毕") and 自身有标签(包含标签="主要")
+需要条件:if (队伍中此单位数量(需标签="重拦", 范围内=149)*(1+队伍中此单位数量(需标签="重拦", 范围内=390)*(100+队伍中此单位数量(需标签="重拦", 范围内=390)/1.96)*0.0001))<(队伍中此单位数量(需标签="重拦", 范围内=500)) and 敌人有此单位数量(需标签="拦截", 范围内=500, 少于=1) or (队伍中此单位数量(需标签="重拦", 范围内=390))<(队伍中此单位数量(需标签="重拦", 范围内=666))
+自动触发:if 自身属于AI控制 and 自身有标签(包含标签="集结完毕") and 自身有标签(包含标签="主要")
 临时标签删除:集结完毕
+#作战模块
 [隐藏行动_绕圈1]
-自动触发:if 敌人有此单位数量(需标签='拦截', 超过=1, 范围内=170) and 自身属于AI控制 and 自身护盾>=150 and 自身有资源(引火=4) and 自身资源.编号%2==1
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签='拦截', 超过=1, 范围内=170) and 自身属于AI控制 and 自身护盾>=150 and 自身有资源(引火=4) and 自身资源.编号%2==1
 添加路径点动作类型:移动
 添加路径点来自参考:创建标记(x=攻击中.x, y=攻击中.y, dir=间距(self, self.攻击中)+100).获取相对偏移(y=-160)
 清除所有路径点:真
 [隐藏行动_绕圈2]
-自动触发:if 敌人有此单位数量(需标签='拦截', 超过=1, 范围内=170) and 自身属于AI控制 and 自身护盾>=150 and 自身有资源(引火=4) and 自身资源.编号%2==0
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签='拦截', 超过=1, 范围内=170) and 自身属于AI控制 and 自身护盾>=150 and 自身有资源(引火=4) and 自身资源.编号%2==0
 添加路径点动作类型:移动
 添加路径点来自参考:创建标记(x=攻击中.x, y=攻击中.y, dir=间距(self, self.攻击中)-100).获取相对偏移(y=-160)
 清除所有路径点:真
 [隐藏行动_转圈]
-自动触发:if 敌人有此单位数量(超过=0, 范围内=170) and 敌人有此单位数量(少于=2, 范围内=170) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(超过=0, 范围内=170) and 敌人有此单位数量(少于=2, 范围内=170) and 自身属于AI控制
 添加路径点动作类型:移动
 添加路径点来自参考:创建标记(x=攻击中.x, y=攻击中.y, dir=间距(self, self.攻击中)-135).获取相对偏移(y=-60)
 清除所有路径点:真
 添加路径点序列位置:真
 [隐藏行动_直线急撤]
 添加路径点来自参考:创建标记(dir=间距(self, self.攻击中), x=self.x, y=self.y).获取相对偏移(y=10)
-自动触发:if 自身属于AI控制 and 敌人有此单位数量(需标签='拦截', 范围内=170, 超过=0) and 自身资源.防引火<3 and 自身资源.引火==选择(全图中此单位数量(需标签="重拦测试", 超过=0), rnd(0, 3), int(rnd(0, 3)))
+自动触发:真
+需要条件:if 自身属于AI控制 and 敌人有此单位数量(需标签='拦截', 范围内=170, 超过=0) and 自身资源.防引火<3 and 自身资源.引火==选择(全图中此单位数量(需标签="重拦测试", 超过=0), rnd(0, 3), int(rnd(0, 3)))
 添加路径点动作类型:移动
 清除所有路径点:真
 临时标签添加:后撤
@@ -50,13 +58,16 @@
 [隐藏行动_防引火左]
 复制节:hiddenAction_直线急撤
 添加路径点来自参考:创建标记(dir=间距(self, self.攻击中), x=self.x, y=self.y).获取相对偏移(y=400, x=100)
-自动触发:if 自身属于AI控制 and 自身资源.防引火==3 and 自身资源.编号%3==1 and 敌人有此单位数量(需标签="重拦", 范围内=390, 超过=0)
+需要条件:if 自身属于AI控制 and 自身资源.防引火==3 and 自身资源.编号%3==1 and 敌人有此单位数量(需标签="重拦", 范围内=390, 超过=0)
+自动触发:真
 [隐藏行动_防引火右]
 复制节:hiddenAction_直线急撤
 添加路径点来自参考:创建标记(dir=间距(self, self.攻击中), x=self.x, y=self.y).获取相对偏移(y=400, x=-100)
-自动触发:if 自身属于AI控制 and 自身资源.防引火==3 and 自身资源.编号%3==0 and 敌人有此单位数量(需标签="重拦", 范围内=390, 超过=0)
+需要条件:if 自身属于AI控制 and 自身资源.防引火==3 and 自身资源.编号%3==0 and 敌人有此单位数量(需标签="重拦", 范围内=390, 超过=0)
+自动触发:真
 [隐藏行动_防引火计时]
-自动触发:if 敌人有此单位数量(需标签='重拦', 范围内=220, 超过=2) and 敌人有此单位数量(需标签='重拦', 范围内=120)==1 and 自身资源.防引火<3 and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签='重拦', 范围内=220, 超过=2) and 敌人有此单位数量(需标签='重拦', 范围内=120)==1 and 自身资源.防引火<3 and 自身属于AI控制
 增加资源:防引火=1.5
 [隐藏行动_防引火急停]
 自动触发:if 敌人有此单位数量(需标签='重拦', 范围内=162, 少于=1)

================================================================================
文件: 空中单位\拦截\重型拦截机\重拦模版.ini
================================================================================

(内容完全相同)

================================================================================
文件: 空中单位\拦截\重型拦截机\降频重型.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\拦截\重型拦截机\降频重型.ini
+++ 空中单位\拦截\重型拦截机\降频重型.ini
@@ -4,7 +4,8 @@
 自动触发间隔:1.2s
 自动触发检查率:每8帧
 [隐藏行动_进攻]
-自动触发:if 自身有标签(包含标签="安全") and not 自身在攻击 and 自身属于AI控制 and 队伍中此单位数量(需标签="集结完毕", 范围内=500, 超过=0)
+自动触发:真
+需要条件:if 自身有标签(包含标签="安全") and not 自身在攻击 and 自身属于AI控制 and 队伍中此单位数量(需标签="集结完毕", 范围内=500, 超过=0)
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:运输堡垒
@@ -29,8 +30,10 @@
 需要条件:if 队伍中此单位数量(需标签="护送运输")<(选择(队伍中此单位数量(需标签="请求重拦")>0, 队伍中此单位数量(需标签="重拦")*0.2, 0)) and 队伍中此单位数量(需标签="重拦")+盟友有此单位数量(需标签="重拦")>(敌人有此单位数量(需标签="重拦", 包含队列中的=true)*1.25) and 最后转换时间(指定时间后=30)
 转换成:护送重拦I
 [隐藏行动_转]
-自动触发:if not 自身属于AI控制
+自动触发:真
+需要条件:if not 自身属于AI控制
 转换成:重拦模版
 [隐藏行动_升频]
-自动触发:if 敌人有此单位数量(需标签="拦截", 范围内=210, 超过=0)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="拦截", 范围内=210, 超过=0)
 转换成:重型拦截机I

================================================================================
文件: 空中单位\空对地\两栖喷气机\两栖.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\两栖喷气机\两栖.ini
+++ 空中单位\空对地\两栖喷气机\两栖.ini
@@ -3,6 +3,9 @@
 class:CustomUnitMetadata
 界面显示内部调用:amphibiousJet
 覆盖单位:c_amphibiousJet, amphibiousJet
+#THIS UNIT IS NOT YET USED IN-GAME (but is mostly done)
+#displayLocaleKey: amphibiousJet
+#overrideAndReplace: amphibiousJet
 价格:2000
 生命值:530
 质量:10000
@@ -10,27 +13,33 @@
 建造速度:0.001
 availableInDemo:假
 半径:16
+#displayRadius: 11
 是生物:假
+#softCollisionOnAll: 3
 碰撞体积软化:5
-tags:空对地, 电击, 拦截, 喷气机
+tags:空对地, 电击, 拦截, 喷气机, C1
 自动触发间隔:2s
 [隐藏行动_创建]
 自动触发事件:创建
 需要条件:if rnd(1, 100)>max(100-自身资源.AI难度*5, 75)
 临时标签添加:进攻, 安全
 [隐藏行动_潜水]
-自动触发:if 敌人有此单位数量(需标签="海", 超过=0, 范围内=180) and 队伍中此单位数量(需标签="电击", 超过=1, 范围内=200) and 自身在地块类型上(type="WATER") and 自身队列量(少于=1) and 自身属于AI控制 and 最后转换时间(指定时间后=5)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="海", 超过=0, 范围内=180) and 队伍中此单位数量(需标签="电击", 超过=1, 范围内=200) and 自身在地块类型上(type="WATER") and 自身队列量(少于=1) and 自身属于AI控制 and 最后转换时间(指定时间后=5)
 也添加进队列:dive
 [隐藏行动_ai屯兵]
-自动触发:if 队伍中此单位数量(需标签="喷气机", 范围内=300)<int(min(自身资源.AI阶段*(1.2+自身资源.AI阶段*0.01), 10)) and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="控距") and not 自身有标签(包含标签="进攻") and 自身属于AI控制
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="喷气机", 范围内=300)<int(min(自身资源.AI阶段*(1.2+自身资源.AI阶段*0.01), 10)) and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="控距") and not 自身有标签(包含标签="进攻") and 自身属于AI控制
 添加路径点动作类型:follow
 添加路径点检索标签:家
 添加路径点靠近队伍:己方
 [隐藏行动_进攻]
-自动触发:if 队伍中此单位数量(需标签="喷气机", 范围内=300)>=int(min(自身资源.AI阶段*(1.2+自身资源.AI阶段*0.01), 10)) and not 自身有标签(包含标签="进攻")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="喷气机", 范围内=300)>=int(min(自身资源.AI阶段*(1.2+自身资源.AI阶段*0.01), 10)) and not 自身有标签(包含标签="进攻")
 临时标签添加:进攻, 请求重拦
 [隐藏行动_ai进攻]
-自动触发:if 自身有标签(包含标签="进攻") and 自身有标签(包含标签="安全") and 自身属于AI控制 and not 自身有活动的路径点(type='攻击')
+自动触发:真
+需要条件:if 自身有标签(包含标签="进攻") and 自身有标签(包含标签="安全") and 自身属于AI控制 and not 自身有活动的路径点(type='攻击')
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:无防空保护, 概念坦, 重拦
@@ -77,6 +86,8 @@
 image:amphibious_jet.png
 死亡图像:amphibious_jet_dead.png
 炮塔图像:无
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
 image_shadow:AUTO
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -99,7 +110,11 @@
 转弯速度:3.9
 炮塔旋转加速度:0.5
 可以开火:假
+#recoilOffset: 0.5
+#recoilOutTime: 3
+#recoilReturnTime: 3
 [炮塔_wing1]
+#
 x:13
 y:10
 链接到:base
@@ -110,9 +125,12 @@
 炮塔旋转加速度:1.5
 开火音效:lighting_burst
 开火音效大小:0.3
+#shoot_flame:CUSTOM:sparks2*3, CUSTOM:lightSlowFade
 开火动画:CUSTOM:lightSlowFade
+#shoot_light:#FFcceeee
 可以开火:真
 size:0
+#energyUsage: 1
 预热:35
 chargeEffectImage:SHARED:lighting_charge2.png
 预热下降速度:0.3
@@ -123,6 +141,7 @@
 预热:35
 链接间隔:wing1
 [抛射体_lightning]
+#directDamage: 310
 直接伤害:45
 效果存在时间:25
 瞬间命中:真

================================================================================
文件: 空中单位\空对地\两栖喷气机\两栖喷气机-水下.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\两栖喷气机\两栖喷气机-水下.ini
+++ 空中单位\空对地\两栖喷气机\两栖喷气机-水下.ini
@@ -7,6 +7,8 @@
 tags:电击, 水
 [图像]
 运动效果:CUSTOM:splash
+#movementEffectReverse: CUSTOM:splash
+#movementEffectReverseFlipEffects: true
 运动效果频率:10
 [行动_dive]
 可见性:假
@@ -23,7 +25,8 @@
 建造时无法移动:真
 AI被禁用:真
 [隐藏行动_ai潜水]
-自动触发:if 敌人有此单位数量(需标签="水", 少于=1, 范围内=300) and 敌人有此单位数量(需标签="拦截", 少于=3, 范围内=300) and 自身队列量(少于=1) and 自身属于AI控制 and 最后转换时间(指定时间后=5)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="水", 少于=1, 范围内=300) and 敌人有此单位数量(需标签="拦截", 少于=3, 范围内=300) and 自身队列量(少于=1) and 自身属于AI控制 and 最后转换时间(指定时间后=5)
 也添加进队列:fly
 [攻击]
 可攻击空中单位:假
@@ -68,4 +71,5 @@
 最大转弯速度:1.5
 转弯加速度:0.2
 [AI]
+#this also groups actions between units in UI
 升级自:c_amphibiousJet

================================================================================
文件: 空中单位\空对地\两栖喷气机\两栖模版.ini
================================================================================

(内容完全相同)

================================================================================
文件: 空中单位\空对地\导弹飞艇\导弹飞艇.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\导弹飞艇\导弹飞艇.ini
+++ 空中单位\空对地\导弹飞艇\导弹飞艇.ini
@@ -17,19 +17,22 @@
 builtFrom_1_pos:6
 能量值:6
 能量恢复速度:0.003
-tags:空对地, 拦截, 导飞
+tags:空对地, 拦截, 导飞, C1
 [隐藏行动_ai屯兵]
-自动触发:if 队伍中此单位数量(需标签="导飞")<min(自身资源.AI阶段*(3+自身资源.AI阶段*0.02), 200) and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="进攻") and 自身属于AI控制
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="导飞")<min(自身资源.AI阶段*(3+自身资源.AI阶段*0.02), 200) and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="进攻") and 自身属于AI控制
 添加路径点动作类型:follow
 添加路径点检索标签:家
 添加路径点靠近队伍:盟友
 添加路径点序列位置:真
 添加路径点路径可达:真
 [隐藏行动_进攻]
-自动触发:if 队伍中此单位数量(需标签="导飞")>=min(自身资源.AI阶段*(3+自身资源.AI阶段*0.02), 200) and not 自身有标签(包含标签="进攻")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="导飞")>=min(自身资源.AI阶段*(3+自身资源.AI阶段*0.02), 200) and not 自身有标签(包含标签="进攻")
 临时标签添加:进攻, 已锁定
 [隐藏行动_ai进攻]
-自动触发:if 自身有标签(包含标签="进攻") and 自身属于AI控制 and not 自身有活动的路径点(type='攻击')
+自动触发:真
+需要条件:if 自身有标签(包含标签="进攻") and 自身属于AI控制 and not 自身有活动的路径点(type='攻击')
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:建筑物

================================================================================
文件: 空中单位\空对地\武装直升机\偷家武装.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\武装直升机\偷家武装.ini
+++ 空中单位\空对地\武装直升机\偷家武装.ini
@@ -13,25 +13,30 @@
 碰撞体积软化:24
 是生物:假
 禁止接受指令:真
-tags:空对地, 武装, 已锁定, 安全, 请求重拦, 已定制
+tags:空对地, 武装, 已锁定, 安全, 请求重拦, 已定制, C1
 自动触发间隔:0.2s
 自动触发检查率:everyFrame
 [隐藏行动_冷却]
-自动触发:if 自身有标签(包含标签="开始")
+自动触发:真
+需要条件:if 自身有标签(包含标签="开始")
 增加资源:冷却:0.2
 [隐藏行动_禁止]
-自动触发:if 有全局标签(包含标签="禁止偷家")
+自动触发:真
+需要条件:if 有全局标签(包含标签="禁止偷家")
 转换成:武装直升机T1
 [隐藏行动_ai屯兵]
-自动触发:if 队伍中此单位数量(需标签="武装")<7 and 队伍中此单位数量(需标签="重拦")<1 and not 自身有标签(包含标签="开始")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="武装")<7 and 队伍中此单位数量(需标签="重拦")<1 and not 自身有标签(包含标签="开始")
 添加路径点动作类型:follow
 添加路径点检索标签:家
 添加路径点靠近队伍:己方
 [隐藏行动_进攻]
-自动触发:if 队伍中此单位数量(需标签="武装")>=7 and 队伍中此单位数量(需标签="重拦")>=1
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="武装")>=7 and 队伍中此单位数量(需标签="重拦")>=1
 临时标签添加:开始
 [隐藏行动_偷家]
-自动触发:if 自身有标签(包含标签="开始") and not 自身有活动的路径点(type='移动') and 自身自定义计时器(指定时间后=1) or 自身有标签(包含标签="停止绕路") and not 自身有活动的路径点(type='攻击')
+自动触发:真
+需要条件:if 自身有标签(包含标签="开始") and not 自身有活动的路径点(type='移动') and 自身自定义计时器(指定时间后=1) or 自身有标签(包含标签="停止绕路") and not 自身有活动的路径点(type='攻击')
 添加路径点动作类型:攻击
 添加路径点靠近队伍:敌方
 添加路径点检索标签:家
@@ -50,6 +55,7 @@
 可攻击表面单位:真
 可攻击水下单位:假
 炮塔大小:0
+#turretTurnSpeed: 2
 瞄准偏移:0.4
 攻击距离:140
 攻击间隔:40
@@ -66,6 +72,9 @@
 开火音效大小:0.2
 开火动画:small
 开火闪光: #FFFFFF
+#recoilOffset: -2
+#recoilOutTime: 10
+#recoilReturnTime: 14
 [抛射体_1]
 直接伤害:35
 效果存在时间:70

================================================================================
文件: 空中单位\空对地\武装直升机\武直.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\武装直升机\武直.ini
+++ 空中单位\空对地\武装直升机\武直.ini
@@ -14,7 +14,7 @@
 是生物:假
 builtFrom_1_name:airFactory
 builtFrom_1_pos:3
-tags:空对地, 武装
+tags:空对地, 武装, C1
 自动触发间隔:0.5s
 自动触发检查率:每8帧
 [隐藏行动_创建]
@@ -22,15 +22,18 @@
 需要条件:if rnd(1, 100)>max(100-自身资源.AI难度*5, 75)
 临时标签添加:进攻, 安全
 [隐藏行动_ai屯兵]
-自动触发:if 队伍中此单位数量(需标签="武装")<int(min(自身资源.AI阶段*(0.5+自身资源.AI阶段*0.05), 10)) and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="进攻") and 自身属于AI控制
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="武装")<int(min(自身资源.AI阶段*(0.5+自身资源.AI阶段*0.05), 10)) and 自身有标签(包含标签="安全") and not 自身有标签(包含标签="进攻") and 自身属于AI控制
 添加路径点动作类型:follow
 添加路径点检索标签:家
 添加路径点靠近队伍:己方
 [隐藏行动_进攻]
-自动触发:if 队伍中此单位数量(需标签="武装")>=int(min(自身资源.AI阶段*(0.5+自身资源.AI阶段*0.05), 10)) and not 自身有标签(包含标签="进攻")
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="武装")>=int(min(自身资源.AI阶段*(0.5+自身资源.AI阶段*0.05), 10)) and not 自身有标签(包含标签="进攻")
 临时标签添加:进攻, 请求重拦
 [隐藏行动_ai进攻]
-自动触发:if 自身有标签(包含标签="进攻") and 自身有标签(包含标签="安全") and 自身属于AI控制 and not 自身有活动的路径点(type='攻击')
+自动触发:真
+需要条件:if 自身有标签(包含标签="进攻") and 自身有标签(包含标签="安全") and 自身属于AI控制 and not 自身有活动的路径点(type='攻击')
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:无防空保护
@@ -50,6 +53,7 @@
 可攻击表面单位:真
 可攻击水下单位:假
 炮塔大小:0
+#turretTurnSpeed: 2
 瞄准偏移:0.4
 攻击距离:140
 攻击间隔:40
@@ -66,6 +70,9 @@
 开火音效大小:0.2
 开火动画:small
 开火闪光: #FFFFFF
+#recoilOffset: -2
+#recoilOutTime: 10
+#recoilReturnTime: 14
 [抛射体_1]
 直接伤害:35
 效果存在时间:70

================================================================================
文件: 空中单位\空对地\火蜂战机\火蜂战机.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\火蜂战机\火蜂战机.ini
+++ 空中单位\空对地\火蜂战机\火蜂战机.ini
@@ -2,6 +2,8 @@
 name:火蜂战机
 界面显示内部调用:fireBee
 覆盖单位:fireBee
+#displayText:Fire bee
+#displayDescription:-Heavily armed \n -Can attack ground \n -Medium air attack \n -Needs to reload after firing \n -Self repair
 class:CustomUnitMetadata
 价格:12000
 生命值:4900
@@ -11,13 +13,15 @@
 实验单位标志:真
 availableInDemo:假
 半径:24
+#displayRadius:11
 是生物:假
+#softCollisionOnAll:3
 碰撞体积软化:24
 生命恢复速度:0.1
 能量值:24
 能量恢复速度:0.03
 能量需要充满:真
-tags:空对地, 拦截
+tags:空对地, 拦截, C5
 [图像]
 drawLayer:experimentals
 总帧数:2
@@ -25,6 +29,8 @@
 image:body.png
 死亡图像:body_dead.png
 炮塔图像:small_laser_turret.png
+#scaleImagesTo:20
+#scaleTurretImagesTo:9
 image_shadow:AUTO
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -45,13 +51,16 @@
 炮塔转速:1
 攻击距离:210
 攻击间隔:25
+#isFixedFiring:true
 [炮塔_1]
+#head
 不可见:真
 可以开火:假
 x:0
 y:0
 闲置方向:0
 [炮塔_2]
+#laser
 不可见:假
 链接到:1
 x:-6
@@ -70,6 +79,7 @@
 转弯速度:0.8
 炮塔旋转加速度:1
 [炮塔_3]
+#laser
 复制与:2
 闲置方向:20
 预热:10
@@ -77,6 +87,7 @@
 x:6
 y:23
 [炮塔_4]
+#missile
 不可见:真
 链接到:1
 x:-8
@@ -96,36 +107,42 @@
 转弯速度:0.8
 炮塔旋转加速度:1
 [炮塔_5]
+#missile
 复制与:4
 预热:10
 不可见:真
 x:8
 y:25
 [炮塔_6]
+#missile
 复制与:4
 预热:20
 不可见:真
 x:-12
 y:25
 [炮塔_7]
+#missile
 复制与:4
 预热:30
 不可见:真
 x:12
 y:25
 [炮塔_8]
+#missile
 复制与:4
 预热:40
 不可见:真
 x:-16
 y:25
 [炮塔_9]
+#missile
 复制与:4
 预热:50
 不可见:真
 x:16
 y:25
 [抛射体_1]
+#missile
 火焰武器:真
 范围伤害:45
 范围半径:40
@@ -142,6 +159,7 @@
 摆动幅度:0.9
 摆动频率:0.4s
 [抛射体_2]
+#laser
 直接伤害:22
 绘制大小:1
 瞬间命中:真

================================================================================
文件: 空中单位\空对地\直升机\直升机.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\直升机\直升机.ini
+++ 空中单位\空对地\直升机\直升机.ini
@@ -15,15 +15,17 @@
 builtFrom_1_pos:3
 自动触发间隔:0.2s
 自动触发检查率:每4帧
-tags:空对地, 拦截
+tags:空对地, 拦截, C1
 [隐藏行动_转圈]
-自动触发:if 敌人有此单位数量(需标签='侦查', 超过=0, 范围内=148) and 敌人有此单位数量(需标签='对空', 少于=2, 范围内=170) and 自身属于AI控制 and not 自身有活动的路径点(type='移动')
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签='侦查', 超过=0, 范围内=148) and 敌人有此单位数量(需标签='对空', 少于=2, 范围内=170) and 自身属于AI控制 and not 自身有活动的路径点(type='移动')
 添加路径点动作类型:移动
 添加路径点来自参考:创建标记(x=攻击中.x, y=攻击中.y, dir=间距(self.攻击中, self)).获取相对偏移(y=360)
 清除所有路径点:真
 添加路径点序列位置:真
 [隐藏行动_进攻]
-自动触发:if not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="安全") and 自身属于AI控制 and 敌人有此单位数量(需标签="对空", 范围内=180, 少于=1)
+自动触发:真
+需要条件:if not 自身有活动的路径点(type='攻击') and 自身有标签(包含标签="安全") and 自身属于AI控制 and 敌人有此单位数量(需标签="对空", 范围内=180, 少于=1)
 添加路径点动作类型:攻击
 添加路径点检索标签:builder, 无防空保护
 添加路径点路径可达:真

================================================================================
文件: 空中单位\空对地\轰炸机\轰炸机.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\轰炸机\轰炸机.ini
+++ 空中单位\空对地\轰炸机\轰炸机.ini
@@ -20,7 +20,7 @@
 能量值:3
 能量恢复速度:0.002
 能量需要充满:真
-tags:空对地, 轰炸, 对水, 已锁定, 已定制
+tags:空对地, 轰炸, 对水, 已锁定, 已定制, C4
 自动触发间隔:0.2s
 [全局资源_队伍]
 隐藏:真
@@ -51,13 +51,15 @@
 添加路径点检索标签:修复, 家
 添加路径点靠近队伍:己方
 [隐藏行动_屯兵]
-自动触发:if 队伍中此单位数量(需标签="轰炸")<min((敌人有此单位数量(需标签="防空")/自身资源.队伍)*0.2, 15) and not 自身有标签(包含标签="开始") and 自身属于AI控制 and not 自身有活动的路径点(type='follow')
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="轰炸")<min((敌人有此单位数量(需标签="防空")/自身资源.队伍)*0.2, 15) and not 自身有标签(包含标签="开始") and 自身属于AI控制 and not 自身有活动的路径点(type='follow')
 清除所有路径点:真
 添加路径点动作类型:follow
 添加路径点检索标签:家
 添加路径点靠近队伍:己方
 [隐藏行动_进攻]
-自动触发:if 队伍中此单位数量(需标签="轰炸")>=min((敌人有此单位数量(需标签="防空")/自身资源.队伍)*0.2, 15)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="轰炸")>=min((敌人有此单位数量(需标签="防空")/自身资源.队伍)*0.2, 15)
 临时标签添加:开始
 [隐藏行动_攻激光]
 自动触发:if 自身有标签(包含标签="开始") and not 自身有活动的路径点(type='攻击') and 敌人有此单位数量(需标签="激光防御塔", 少于=1, 范围内=210) and 自身属于AI控制
@@ -91,6 +93,7 @@
 范围半径:65
 激光拦截耗能:3
 [炮塔_2]
+#anti-sub
 不可见:真
 x:0
 y:0
@@ -103,6 +106,7 @@
 转弯速度:20
 能量需求:1
 [抛射体_2]
+#bomb anti-sub
 直接伤害:70
 效果存在时间:250
 速度:0.3
@@ -112,6 +116,7 @@
 尾焰:假
 大的打击效果:假
 目标为地面:假
+#for laser defence
 激光拦截耗能:3
 [运动]
 运动类型:空中
@@ -119,6 +124,7 @@
 加速度:0.01
 减速度:0.01
 落到地面上:onlyIdle
+#note: joinsGroupFormations=false could case slowdowns for groups of non-flying units
 加入队形:假
 最大转弯速度:1.2
 转弯加速度:0.04
@@ -127,7 +133,8 @@
 移动滑动角度:25
 死亡缓慢降落:真
 [隐藏行动_炸防空]
-自动触发:if 敌人有此单位数量(超过=0, 范围内=300, 需标签="防空") and 自身护盾满(满=true) and 敌人有此单位数量(需标签="激光防御塔", 少于=1, 范围内=210) and 自身属于AI控制
+自动触发:真
+需要条件:if 敌人有此单位数量(超过=0, 范围内=300, 需标签="防空") and 自身护盾满(满=true) and 敌人有此单位数量(需标签="激光防御塔", 少于=1, 范围内=210) and 自身属于AI控制
 添加路径点动作类型:攻击
 添加路径点检索标签:防空, 密集
 添加路径点靠近队伍:敌方
@@ -136,13 +143,16 @@
 需要条件:if 敌人有此单位数量(需标签="建筑物", 超过=0, 范围内=100) or 敌人有此单位数量(需标签="地", 超过=0, 范围内=100)
 清除所有路径点:真
 [隐藏行动_激光禁攻击]
-自动触发:if 敌人有此单位数量(需标签="激光防御塔", 超过=0, 范围内=210) and 自身护盾满(满=true) and 自身在天上
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="激光防御塔", 超过=0, 范围内=210) and 自身护盾满(满=true) and 自身在天上
 临时标签添加:禁攻击
 [隐藏行动_降落冷却]
-自动触发:if 敌人有此单位数量(需标签="激光防御塔", 超过=0, 范围内=210) and not 自身在移动 and not 自身在天上
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="激光防御塔", 超过=0, 范围内=210) and not 自身在移动 and not 自身在天上
 增加资源:降落=1
 [隐藏行动_降落攻击]
-自动触发:if 敌人有此单位数量(需标签="激光防御塔", 超过=0, 范围内=210) and not 自身在移动 and not 自身在天上 and 自身有资源(降落=3)
+自动触发:真
+需要条件:if 敌人有此单位数量(需标签="激光防御塔", 超过=0, 范围内=210) and not 自身在移动 and not 自身在天上 and 自身有资源(降落=3)
 用逻辑设置资源:降落=0
 临时标签删除:禁攻击
 [资源_降落]

================================================================================
文件: 空中单位\空对地\轻型武装直升机\蚊子.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\轻型武装直升机\蚊子.ini
+++ 空中单位\空对地\轻型武装直升机\蚊子.ini
@@ -1,6 +1,8 @@
 [核心]
 name:轻型武装直升机
 界面显示内部调用:lightGunship
+#displayText: Light gun ship
+#displayDescription: -Can attack ground only
 class:CustomUnitMetadata
 价格:250
 生命值:50
@@ -17,12 +19,15 @@
 碰撞体积软化:3
 死亡产生碎片:0
 死亡爆炸:假
+#effectOnDeath: CUSTOM:lightningShock*2
 explodeOnDeathGroundCollosion:假
 effectOnDeathGroundCollosion:CUSTOM:lightningShock*2, CUSTOM:fireSmall*3
+#default: fogOfWarSightRange: 15
 视野:10
-tags:空对地
+tags:空对地, C1
 [隐藏行动_变]
-自动触发:if 自身属于AI控制
+自动触发:真
+需要条件:if 自身属于AI控制
 转换时保留标签:真
 转换成:蚊子I
 [图像]
@@ -30,9 +35,12 @@
 image:base.png
 死亡图像:base_dead.png
 炮塔图像:无
+#scaleImagesTo: 20
+#scaleTurretImagesTo: 9
 图像缩放:0.7
 turretImageScale:0.7
 锁定主体旋转随主炮塔:真
+#AUTO
 image_shadow:AUTO
 X轴阴影偏移:1
 Y轴阴影偏移:1
@@ -49,6 +57,7 @@
 可攻击表面单位:真
 可攻击水下单位:假
 炮塔大小:9
+#turretTurnSpeed: 2
 瞄准偏移:0.4
 攻击距离:120
 攻击间隔:40
@@ -131,6 +140,7 @@
 移动速度:1.1
 加速度:0.02
 减速度:0.06
+#body_rotation_with_main_turret means this is 非 used
 最大转弯速度:99
 转弯加速度:99
 移动后滑动:真
@@ -143,5 +153,6 @@
 需要条件:if 队伍中此单位数量(需标签="对地", 范围内=165, 少于=1)
 临时标签添加:找打
 [隐藏行动_结束挨打]
-自动触发:if 队伍中此单位数量(需标签="对地", 范围内=165, 超过=0)
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="对地", 范围内=165, 超过=0)
 临时标签删除:找打

================================================================================
文件: 空中单位\空对地\轻型武装直升机\蚊子I.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\空对地\轻型武装直升机\蚊子I.ini
+++ 空中单位\空对地\轻型武装直升机\蚊子I.ini
@@ -4,10 +4,12 @@
 禁止接受指令:真
 自动触发间隔:0.2s
 [隐藏行动_变]
-自动触发:if not 自身属于AI控制
+自动触发:真
+需要条件:if not 自身属于AI控制
 转换成:轻型武装直升机
 [隐藏行动_ai]
-自动触发:if 自身有标签(包含标签="安全") and not 自身有活动的路径点(type='攻击')
+自动触发:真
+需要条件:if 自身有标签(包含标签="安全") and not 自身有活动的路径点(type='攻击')
 清除所有路径点:真
 添加路径点动作类型:攻击
 添加路径点检索标签:无防空保护, 建造, 建筑物

================================================================================
文件: 空中单位\运输机\运输机.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\运输机\运输机.ini
+++ 空中单位\运输机\运输机.ini
@@ -6,13 +6,15 @@
 自动触发检查率:每8帧
 tags:运
 [隐藏行动_转换后起飞]
-自动触发:if 自身运输数量(少于=1) and 最后转换时间(指定时间内=5) and 自身属于AI控制
+自动触发:真
+需要条件:if 自身运输数量(少于=1) and 最后转换时间(指定时间内=5) and 自身属于AI控制
 清除所有路径点:真
 添加路径点动作类型:移动
 添加路径点检索标签:I
 添加路径点靠近队伍:己方
 [隐藏行动_ai]
-自动触发:if 队伍中此单位数量(需标签="运输机I", 超过=0) and 最后转换时间(指定时间后=5) and 自身属于AI控制
+自动触发:真
+需要条件:if 队伍中此单位数量(需标签="运输机I", 超过=0) and 最后转换时间(指定时间后=5) and 自身属于AI控制
 转换成:运输机X
 [隐藏行动_转换]
 自动触发:if 中立有此单位数量(需标签="资源点", 超过=0)

================================================================================
文件: 空中单位\运输机\运输机I.ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\运输机\运输机I.ini
+++ 空中单位\运输机\运输机I.ini
@@ -6,22 +6,26 @@
 [资源_冷却]
 隐藏:真
 [隐藏行动_增加冷却]
-自动触发:if not 自身在移动 and not 自身有活动的路径点
+自动触发:真
+需要条件:if not 自身在移动 and not 自身有活动的路径点
 增加资源:冷却=0.4
 [隐藏行动_偏移]
-自动触发:if 自身有资源(冷却=3) and not 自身在移动
+自动触发:真
+需要条件:if 自身有资源(冷却=3) and not 自身在移动
 开始卸载单位:真
 转换成:运输机T1
 增加资源:冷却=-2
 [隐藏行动_ai装建造]
-自动触发:if not 自身运输单位有标签(包含标签='建造') and not 自身有活动的路径点(type='loadUP') and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165) and (队伍中此单位数量(需标签="经济", 范围内=165, 包含未完成的=true)-(队伍中此单位数量(需标签="经济", 范围内=165)))==0
+自动触发:真
+需要条件:if not 自身运输单位有标签(包含标签='建造') and not 自身有活动的路径点(type='loadUP') and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165) and (队伍中此单位数量(需标签="经济", 范围内=165, 包含未完成的=true)-(队伍中此单位数量(需标签="经济", 范围内=165)))==0
 添加路径点动作类型:loadUP
 清除所有路径点:真
 添加路径点序列位置:真
 添加路径点检索标签:外出
 添加路径点靠近队伍:己方
 [隐藏行动_ai装对地]
-自动触发:if 自身运输单位有标签(包含标签='建造') and not 自身在移动 and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165)
+自动触发:真
+需要条件:if 自身运输单位有标签(包含标签='建造') and not 自身在移动 and not 全图中此单位数量(需标签="造抽取", 超过=0, 范围内=165)
 添加路径点动作类型:loadUP
 添加路径点序列位置:真
 添加路径点检索标签:小坦, 小甲, 重坦, 猛犸

================================================================================
文件: 空中单位\运输机\运输机X..ini
================================================================================

--- scripts/元/人机的玩笑/空中单位\运输机\运输机X..ini
+++ 空中单位\运输机\运输机X..ini
@@ -6,21 +6,25 @@
 [资源_冷却]
 隐藏:真
 [隐藏行动_增加冷却]
-自动触发:if not 自身在移动 and not 自身有活动的路径点
+自动触发:真
+需要条件:if not 自身在移动 and not 自身有活动的路径点
 增加资源:冷却=0.4
 [隐藏行动_偏移]
-自动触发:if 自身有资源(冷却=3) and not 自身在移动
+自动触发:真
+需要条件:if 自身有资源(冷却=3) and not 自身在移动
 开始卸载单位:真
 转换成:运输机T1
 增加资源:冷却=-2
 [隐藏行动_ai装对地]
-自动触发:if 自身运输数量(少于=4) and not 自身有活动的路径点(type='loadUP') and not 自身在移动 and 自身属于AI控制
+自动触发:真
+需要条件:if 自身运输数量(少于=4) and not 自身有活动的路径点(type='loadUP') and not 自身在移动 and 自身属于AI控制
 清除所有路径点:真
 添加路径点动作类型:loadUP
 添加路径点检索标签:重坦, 小甲, 猛犸
 添加路径点靠近队伍:己方
 [隐藏行动_ai]
-自动触发:if 自身运输数量(超过=3) and not 自身在移动
+自动触发:真
+需要条件:if 自身运输数量(超过=3) and not 自身在移动
 添加路径点动作类型:follow
 清除所有路径点:真
 添加指定标签的随机单位:野矿, 无保护, 无防空保护

================================================================================
文件: 空中单位\运输机\运输机模版.ini
================================================================================

(内容完全相同)
