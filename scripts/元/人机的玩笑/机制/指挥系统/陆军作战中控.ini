[核心]
name:陆军作战中控
tags:陆军作战中控, 作战中控
复制与:作战通用模块.ini
@memory 附属检测:unit
@memory 目标:unit[]
@memory 攻击目标:unit
不可选择:假

[全局资源_最高战力]
隐藏:真

[全局资源_军队战力]
隐藏:真

[全局资源_压力值]
隐藏:真

[资源_陆军]
隐藏:真

[图像]
可见性:假

[运动]
运动类型:跨悬崖
移动速度:0.8
移动忽略转向:真

[行动_信息]
可见性:真
text:%{内存.攻击目标.resource.总战力}\n%{(内存.攻击目标.读取单位内存('阵地对地战力', type='float')+内存.攻击目标.读取单位内存('阵地对地战力X', type='float'))} \n%{选择(自身有标签(包含标签="发起进攻"), '只手炼化', '道友饶命')}
建造速度:0s
显示类型:infoOnly
显示给盟友:真
显示给敌人:真
界面闪烁:真
pos:0

[隐藏行动_检索敌人]
自动触发:if not 自身有活动的路径点(type='靠近目标')
需要条件:if 敌人有此单位数量(需标签="地", 范围内=300, 超过=0) or 敌人有此单位数量(需标签="地", 范围内=520, 超过=0) and not 自身有标签(包含标签="发起进攻")
清除所有路径点:真
添加路径点动作类型:靠近目标
添加路径点检索标签:修复, 家
添加路径点靠近队伍:己方

[隐藏行动_压力值]
自动触发:真
需要条件:if 自身资源.时间%15>=3 and 自身资源.军队战力>=1 and 存活时间(指定时间后=5) and 自身资源.总战力>=1 and 自身自定义计时器(指定时间后=1)
重置自定义计时器:真
用逻辑设置资源:压力值=0.4+((自身资源.军队战力+0.01)/(自身资源.总战力+0.01))*0.6

[隐藏行动_检索战力]
提取资源标签:陆军
提取资源触发行为:军队战力

[隐藏行动_检索盟友]
提取资源标签:陆军作战中控
提取资源触发行为:盟友战力

[隐藏行动_区块消失]
自动触发:if 敌人有此单位数量(需标签="作战区块", 超过=0)
需要条件:if 自身有资源(冷却=30) and 自身有资源(时间=240) or 队伍中此单位数量(需标签="陆军作战中控", 范围内=250, 超过=1)

[隐藏行动_判断分散]
自动触发:真
需要条件:if 队伍中此单位数量(需标签="陆军", 范围内=460)>(内存.附属检测.resource.陆军*(1+队伍中此单位数量(需标签="陆军", 范围内=460)*0.0036)) and 自身资源.时间%5==3 and 自身资源.总战力<自身资源.最高战力*1.44 and not 自身有标签(包含标签="开始进攻") and 自身资源.时间%15>=3
临时标签删除:聚集, 开始进攻, 发起进攻
临时标签添加:未下达指令

[隐藏行动_判断聚集]
自动触发:真
需要条件:if 队伍中此单位数量(需标签="陆军", 范围内=460)<=(内存.附属检测.resource.陆军*(1+队伍中此单位数量(需标签="陆军", 范围内=460)*0.0036)) or 自身资源.总战力>自身资源.最高战力*1.44>0 and 队伍中此单位数量(需标签="陆军", 范围内=250, 超过=0)
临时标签添加:聚集

[隐藏行动_判断进攻]
自动触发:if 敌人有此单位数量(需标签="地", 范围内=300, 少于=1) and 自身有标签(包含标签="发起进攻") or 敌人有此单位数量(需标签="地", 范围内=520, 少于=1)
需要条件:if 自身有资源(总战力=52) and 自身有标签(包含标签="聚集") and 自身资源.时间%15>=3 and not 自身有活动的路径点(type='follow') or 自身有标签(包含标签="开始进攻") and not 自身有活动的路径点(type='follow')
临时标签删除:未下达指令
清除所有路径点:真
添加路径点动作类型:follow
添加路径点检索标签:作战区块
添加路径点靠近队伍:敌方
添加路径点匹配触发:存储战力
添加路径点失败触发:区块消失

[隐藏行动_存储战力]
需要条件:if 自身有活动的路径点(type='follow') and 活动路径点目标.tags(包含标签="作战区块")
设置单位内存:攻击目标=活动路径点目标
也执行动作:更换目标

[隐藏行动_更换目标]
需要条件:if 活动路径点目标.resource.总战力==0 or 自身资源.总战力<(活动路径点目标.读取单位内存('阵地对地战力', type='float')+活动路径点目标.读取单位内存('阵地对地战力X', type='float'))*1.2 and 活动路径点目标.tags(包含标签="作战区块") and 自身资源.时间%15>=3
清除所有路径点:真
添加路径点动作类型:follow
添加指定标签的随机单位:作战区块
添加指定队伍的随机单位:敌方
添加路径点匹配触发:存储战力

[隐藏行动_开始进攻]
自动触发:真
需要条件:if 自身有标签(包含标签="聚集") and 自身资源.总战力>=内存.攻击目标.resource.总战力*1.144
临时标签添加:开始进攻
临时标签删除:发起撤退

[隐藏行动_开始作战]
自动触发:真
需要条件:if 自身有标签(包含标签="开始进攻") and 队伍中此单位数量(需标签="陆军", 范围内=460)<=(内存.附属检测.resource.陆军*(1+队伍中此单位数量(需标签="陆军", 范围内=460)*0.008))
临时标签添加:发起进攻

[隐藏行动_取消进攻]
自动触发:真
需要条件:if 自身资源.总战力<内存.攻击目标.resource.总战力*1.144 and 自身资源.时间%15>=3
临时标签删除:开始进攻, 发起进攻