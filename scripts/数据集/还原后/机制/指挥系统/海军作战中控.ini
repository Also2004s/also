[core]
name:海军作战中控
tags:海军作战中控, 作战中控
copyFrom:作战通用模块.ini
@memory 目标:unit[]
@memory 攻击目标:unit
isUnselectable:true
[resource_海军最高战力]
hidden:true
[resource_海军战力]
hidden:true
[graphics]
image:海军.png
isVisible:false
[movement]
movementType:WATER
moveSpeed:0.8
[action_信息]
isVisible:true
text:%{memory.攻击目标.resource.总战力} \n%{select(self.tags(includes="开始进攻"), '只手炼化', '道友饶命')}
buildSpeed:0s
displayType:infoOnly
isAlsoViewableByAllies:true
isAlsoViewableByEnemies:true
isGuiBlinking:true
pos:0
#––「记忆系统」––#
[hiddenAction_检索敌人]
#1
autoTrigger:if not self.hasActiveWaypoint(type='touchTarget')
requireConditional:if numberOfUnitsInEnemyTeam(withTag="海", withinRange=300, greaterThan=0) or numberOfUnitsInEnemyTeam(withTag="海", withinRange=540, greaterThan=0) and not self.tags(includes="开始进攻")
clearAllWaypoints:true
addWaypoint_type:touchTarget
addWaypoint_target_nearestUnit_tagged:修复, 海厂
addWaypoint_target_mapMustBeReachable:false
addWaypoint_target_nearestUnit_team:ally
[hiddenAction_判断战力]
autoTrigger:true
requireConditional:if not self.tags(includes="开始进攻") and not self.hasActiveWaypoint(type='touchTarget')
addWaypoint_type:attack
addWaypoint_target_randomUnit_tagged:海军区块
addWaypoint_target_randomUnit_team:enemy
addWaypoint_triggerActionIfMatched:更新军队, 更新最高
[hiddenAction_更新军队]
requireConditional:if self.resource.海军战力<(activeWaypointTarget.readUnitMemory('对地总战力', type='float')+activeWaypointTarget.readUnitMemory('对地总战力X', type='float')) and self.hasActiveWaypoint(type='attack')
setResourcesWithLogic:海军战力=(activeWaypointTarget.readUnitMemory('对地总战力', type='float')+activeWaypointTarget.readUnitMemory('对地总战力X', type='float'))
setUnitMemory:目标[0]=activeWaypointTarget
[hiddenAction_更新最高]
requireConditional:if self.resource.海军最高战力<activeWaypointTarget.resource.总战力
setResourcesWithLogic:海军最高战力=activeWaypointTarget.resource.总战力
setUnitMemory:目标[1]=activeWaypointTarget
#––「战力模块」––#
[hiddenAction_检索战力]
takeResources_excludeUnitsWithoutTags:海军
takeResources_triggerActionForEach:军队战力
#––「战力链接」––#
[hiddenAction_检索盟友]
takeResources_excludeUnitsWithoutTags:海军作战中控
takeResources_triggerActionForEach:盟友战力
#––「计算模块」––#
[hiddenAction_战力重新计算]
setResourcesWithLogic:海军最高战力=select(self.tags(includes="开始进攻"), self.resource.海军最高战力, 0), 海军战力=select(self.tags(includes="开始进攻"), self.resource.海军战力, 0)
#––「唯一设定」––#
[hiddenAction_唯一]
autoTrigger:true
requireConditional:if not self.tags(includes="发起进攻") and self.resource.时间%15==2 and not self.hasActiveWaypoint(type='touchTarget')
clearAllWaypoints:true
addWaypoint_target_mapMustBeReachable:true
addWaypoint_type:attack
addWaypoint_target_nearestUnit_tagged:海军作战中控
addWaypoint_target_nearestUnit_team:own
addWaypoint_triggerActionIfMatched:比较
[hiddenAction_比较]
requireConditional:if activeWaypointTarget.timeAlive>self.timeAlive
alsoTriggerAction:区块消失
[hiddenAction_区块消失]
autoTrigger:true
requireConditional:if self.hasResources(冷却=30)
#––「兵力聚集」––#
[hiddenAction_判断分散]
autoTrigger:true
requireConditional:if numberOfUnitsInTeam(withTag="海军", withinRange=460)>(numberOfUnitsInTeam(withTag="海军", withinRange=300)*(1+numberOfUnitsInTeam(withTag="海军", withinRange=460)*0.0036)) and self.resource.时间%5==3 and self.resource.总战力<self.resource.海军最高战力*1.275 and not self.tags(includes="开始进攻") and self.resource.时间%15>=3
temporarilyRemoveTags:聚集, 开始进攻, 发起进攻
temporarilyAddTags:未下达指令
[hiddenAction_判断聚集]
autoTrigger:true
requireConditional:if numberOfUnitsInTeam(withTag="海军", withinRange=460)<=(numberOfUnitsInTeam(withTag="海军", withinRange=300)*(1+numberOfUnitsInTeam(withTag="海军", withinRange=460)*0.0036)) or self.resource.总战力>=self.resource.海军最高战力*1.275 and numberOfUnitsInTeam(withTag="海军", withinRange=250, greaterThan=0)
temporarilyAddTags:聚集
#––「作战模块」––#
[hiddenAction_判断进攻]
autoTrigger:if numberOfUnitsInEnemyTeam(withTag="海", withinRange=300, lessThan=1) and self.tags(includes="开始进攻") or numberOfUnitsInEnemyTeam(withTag="海", withinRange=540, lessThan=1)
requireConditional:if self.hasResources(总战力=52) and self.tags(includes="聚集") and self.resource.时间%15>=3 and not self.hasActiveWaypoint(type='follow') or self.tags(includes="开始进攻") and not self.hasActiveWaypoint(type='follow')
temporarilyRemoveTags:未下达指令
clearAllWaypoints:true
addWaypoint_type:follow
addWaypoint_target_nearestUnit_tagged:海军区块
addWaypoint_target_nearestUnit_team:enemy
addWaypoint_triggerActionIfMatched:存储战力
addWaypoint_triggerActionIfFailed:攻海厂
[hiddenAction_攻海厂]
addWaypoint_type:follow
addWaypoint_target_nearestUnit_tagged:海厂
addWaypoint_target_nearestUnit_team:enemy
addWaypoint_triggerActionIfFailed:攻岛矿
[hiddenAction_攻岛矿]
addWaypoint_type:follow
addWaypoint_target_nearestUnit_tagged:抽取器
addWaypoint_target_nearestUnit_team:enemy
addWaypoint_triggerActionIfFailed:区块消失
[hiddenAction_存储战力]
#需要条件:if self.hasActiveWaypoint(type='follow') and activeWaypointTarget.tags(includes="海军区块")
setUnitMemory:攻击目标=activeWaypointTarget
alsoTriggerAction:更换目标
[hiddenAction_更换目标]
requireConditional:if activeWaypointTarget.resource.总战力==0 and activeWaypointTarget.tags(includes="海军区块") and self.resource.时间%15>=3
clearAllWaypoints:true
addWaypoint_type:follow
addWaypoint_target_randomUnit_tagged:海军区块
addWaypoint_target_randomUnit_team:enemy
addWaypoint_triggerActionIfMatched:存储战力
addWaypoint_triggerActionIfFailed:攻海厂
[hiddenAction_发起进攻]
autoTrigger:true
requireConditional:if self.tags(includes="聚集") and self.resource.总战力>=memory.攻击目标.resource.总战力*1.144 and self.resource.时间%15>=3
temporarilyAddTags:开始进攻
temporarilyRemoveTags:发起撤退
[hiddenAction_开始作战]
autoTrigger:true
requireConditional:if self.tags(includes="开始进攻") and numberOfUnitsInEnemyTeam(withTag="海", withinRange=460, greaterThan=0)
temporarilyAddTags:海军进攻
[hiddenAction_取消进攻]
autoTrigger:true
requireConditional:if self.resource.总战力<memory.攻击目标.resource.总战力*1.144 and self.resource.时间%15>=3
temporarilyRemoveTags:开始进攻, 海军进攻