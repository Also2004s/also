[core]
name:海点判断
copyFrom:ROOT:/机制/通用模版.ini
tags:海点判断
radius:10
isUnselectable:true
autoTriggerCooldownTime:0.01s
autoTriggerCheckRate:everyFrame
autoTriggerCooldownTime_allowDangerousHighCPU:true
[graphics]
isVisible:false
[movement]
movementType:WATER
moveSpeed:36
moveIgnoringBody:true

[hiddenAction_检测敌方海点]
autoTriggerOnEvent:created
addWaypoint_type:move
addWaypoint_target_nearestUnit_tagged:海点
addWaypoint_target_nearestUnit_team:enemy
addWaypoint_target_mapMustBeReachable:true
addWaypoint_triggerActionIfMatched:返回锚点
addWaypoint_triggerActionIfFailed:寻找敌人
[hiddenAction_寻找海岛点]
autoTrigger:true
requireConditional:if numberOfUnitsInAllTeams(withTag="海岛检测点", greaterThan=0) and not self.tags(includes="海点判断完毕")
addWaypoint_type:move
addWaypoint_target_nearestUnit_tagged:海岛检测点
addWaypoint_target_nearestUnit_team:any
addWaypoint_target_mapMustBeReachable:true
addWaypoint_triggerActionIfMatched:返回锚点
[hiddenAction_寻找敌人]
autoTrigger:true
requireConditional:if numberOfUnitsInAllTeams(withTag="海岛检测点", lessThan=1) and not self.tags(includes="海点判断完毕")
addWaypoint_type:move
addWaypoint_target_nearestUnit_tagged:建造
addWaypoint_target_nearestUnit_team:enemy
addWaypoint_target_mapMustBeReachable:false

[hiddenAction_发现敌人]
autoTrigger:true
requireConditional:if numberOfUnitsInEnemyTeam(withTag="建造", withinRange=240)+numberOfUnitsInEnemyTeam(withTag="建筑物", withinRange=240)+numberOfUnitsInNeutralTeam(withTag="资源点", withinRange=240)>0 and self.timeAlive(laterThanSeconds=1) and not self.tags(includes="海点判断成功")
alsoTriggerAction:返回锚点
[hiddenAction_返回锚点]
temporarilyAddTags:海点判断成功
clearAllWaypoints:true
addWaypoint_type:move
addWaypoint_target_nearestUnit_tagged:海点
addWaypoint_target_nearestUnit_team:own

[hiddenAction_死亡]
autoTrigger:true
requireConditional:if self.timeAlive(laterThanSeconds=10) and not self.isMoving or numberOfUnitsInTeam(withTag="海域锚点", withinRange=100)>0
deleteSelf:true