[core]
name:海军基地I
displayLocaleKey:seaFactory
class:CustomUnitMetadata
price:1000
maxHp:1000
mass:9000
showInEditor:false
footprint:-1,-1,1,2
constructionFootprint:-2,-1,2,4
autoTriggerCooldownTime:2s
autoTriggerCheckRate:every8Frames
buildingToFootprintOffsetX:10
techLevel:1
buildSpeed:0.0007
radius:45
isBio:false
isBuilding:true
overrideAndReplace:seaFactory
extraBuildRangeWhenBuildingThis:120
exit_x:0
exit_y:-1
exit_moveAwayAmount:130
tags:建筑物,海厂,厂
canBuild_1_name:setRally
canBuild_1_pos:0.1
canBuild_5_name:运输艇I
canBuild_5_pos:4
canBuild_5_isVisible:if not numberOfUnitsInTeam(withTag="运",greaterThan=0,factoryQueue=true)
autoTriggerCheckWhileNotBuilt:true
[hiddenAction_未完成]
autoTrigger:true
requireConditional:if self.completed==false and numberOfUnitsInTeam(withTag="辅助建造",withinRange=25,lessThan=1)
spawnUnits:AI辅助建造
[resource_空闲]
hidden:true
[hiddenAction_无队列]
autoTrigger:if self.queueSize(lessThan=1) and self.hasResources(credits=2000)
requireConditional:if rnd(0,100)<min(self.resource.时间*self.resource.AI难度,40*50)*0.02
addResourcesWithLogic:空闲=select(self.resource.空闲<4,max(0.2+numberOfUnitsInTeam(withTag="海厂")*(-0.09)+self.resource.AI阶段*0.036,0.05),0)
[canBuild_4]
name:导弹舰T1
pos:3
isVisible:if not self.tags(includes="T2厂") and numberOfUnitsInTeam(withTag="战列",greaterThan=1)
isLocked:if numberOfUnitsInTeam(withTag="导弹",greaterThan=3)
isLockedMessage:数量过多
isLockedAlt:if self.globalTeamTags(includes="空军")
[action_upgrade]
convertTo:海军基地II
price:2000
text:升级T2
description:-允许海军基地生产高级单位
displayType:upgrade
buildSpeed:0.0004
pos:0.2
iconImage:SHARED:icon_upgrade.png
ai_isHighPriority:true
allowMultipleInQueue:false
onlyOneUnitAtATime:true
isVisible:if self.timeAlive(laterThanSeconds=60) and numberOfUnitsInTeam(withTag="海")>=numberOfUnitsInEnemyTeam(withTag="海",factoryQueue=true) and not self.tags(includes="T2厂")
isActive:if self.hasResources(AI阶段=7.5) and not numberOfUnitsInTeam(withTag="T2厂",greaterThan=0) and self.globalTeamTags(includes="海军") or numberOfUnitsInTeam(withTag="前期",lessThan=1) and numberOfUnitsInTeam(withTag="T2海厂",factoryQueue=true)<int(self.resource.AI阶段/8)
[action_战列]
textAddUnitName:战列舰T1
unitShownInUI:战列舰T1
produceUnits:战列舰T1
price:1500
buildSpeed:16.6s
pos:11
isActive:if self.queueSize(lessThan=1) and self.hasResources(credits=3000) and not self.hasResources(AI阶段=20) and numberOfUnitsInTeam(withTag="战列",lessThan=3)
[hiddenAction_补充战列]
autoTrigger:if numberOfUnitsInTeam(withTag="战列",factoryQueue=true)<=(numberOfUnitsInEnemyTeam(withTag="战列",factoryQueue=true)/self.resource.队伍) and self.hasResources(空闲=0.9) or numberOfUnitsInTeam(withTag="战列",lessThan=3,factoryQueue=true) and self.hasResources(credits=1600)
requireConditional:if self.queueSize(lessThan=1)
addResources:空闲=-0.9
alsoQueueAction:海军队列
[hiddenAction_海军队列]
produceUnits:战列舰T1*1
buildSpeed:16.6s
addResources:-1500
[graphics]
total_frames:1
image:sea_factory.png
image_wreak:sea_factory_dead.png
image_shadow:NONE
shadowOffsetX:1
shadowOffsetY:1
[attack]
canAttack:false
[movement]
movementType:WATER
fallingAccelerationDead:0
[ai]
buildPriority:0.35
noneGlobalExtraPriority:1
ai_upgradePriority:0.09
maxEachBase:4
[hiddenAction_变]
autoTriggerOnEvent:created
requireConditional:if not self.isControlledByAI
convertTo:毒-海军基地
[placementRule_前期]
searchTags:前期
searchTeam:own
searchDistance:9999
maxCount:0
anyRuleInGroup:前期
[placementRule_中期]
searchTags:中期
searchTeam:own
searchDistance:9999
maxCount:0
anyRuleInGroup:中期
[placementRule_后期]
searchTags:后期
searchTeam:own
searchDistance:9999
maxCount:0
anyRuleInGroup:后期
[placementRule_1]
searchTags:海厂
searchTeam:own
searchDistance:9999
maxCount:0
anyRuleInGroup:前期
[placementRule_2]
searchTags:海厂
searchTeam:own
searchDistance:9999
maxCount:2
anyRuleInGroup:中期
[placementRule_3]
searchTags:海厂
searchTeam:own
searchDistance:9999
maxCount:5
anyRuleInGroup:后期