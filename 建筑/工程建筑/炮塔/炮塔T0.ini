[core]
name:炮塔T1
displayText:炮塔T1
displayLocaleKey:c_turret_t1
copyFrom:炮塔模版.ini
displayDescription:-攻击地面单位\n-可升级
overrideAndReplace:turret
price:500
maxHp:700
techLevel:1
buildSpeed:0.0008
tags:建筑物,炮塔I,对地,炮塔T0
borrowResourcesWhileAlive:伤害量=-2350
[hiddenAction_完成]
autoTrigger:true
requireConditional:if numberOfUnitsInTeam(withTag="建筑物",withinRange=25,greaterThan=0) and not self.globalTeamTags(includes="对塔完毕")
addGlobalTeamTags:对塔完毕
alsoTriggerAction:前线判断
[hiddenAction_前线判断]
requireConditional:if numberOfUnitsInTeam(withTag="I",withinRange=810)+self.numberOfUnitsInAllyNotOwnTeam(withTag="I",withinRange=810)<1 and numberOfUnitsInTeam(withTag="前线",lessThan=1)
temporarilyAddTags:前线
[hiddenAction_攻击建造]
autoTrigger:true
requireConditional:if numberOfUnitsInEnemyTeam(withTag="建造",greaterThan=0,withinRange=165) and self.isControlledByAI
addWaypoint_type:attack
addWaypoint_target_nearestUnit_tagged:建造
addWaypoint_target_nearestUnit_team:enemy
[action_upgrade_gun]
convertTo:机枪T1
price:1000
text:T2-机枪
description:-更好的血量，伤害和射程
allowMultipleInQueue:false
descriptionAddUnitStats:${section.convertTo}
displayType:Upgrade
buildSpeed:16.6s
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
isVisible:if not self.isControlledByAI
alsoTriggerAction:玩家机枪
[hiddenAction_玩家机枪]
temporarilyAddTags:玩家机枪
[action_ai机枪]
convertTo:机枪T1
price:1000
text:ai机枪
buildSpeed:16.6s
alsoTriggerAction:upgrade_gun
allowMultipleInQueue:false
onlyOneUnitAtATime:true
isVisible:if self.isControlledByAI
isActive:if self.timeAlive(laterThanSeconds=45) or self.lastConverted(laterThanSeconds=45)
[action_upgrade_artillery]
convertTo:火炮T1
price:1600
text:T2-火炮
description:-非常远的射程
displayType:Upgrade
buildSpeed:41.6s
allowMultipleInQueue:false
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
isVisible:if not self.isControlledByAI
[hiddenAction_紧急火炮]
autoTrigger:if self.queueSize(lessThan=1) and numberOfUnitsInEnemyTeam(withTag="对地",withinRange=350,greaterThan=0,incompleteBuildings=true) and numberOfUnitsInEnemyTeam(withinRange=210,lessThan=1,incompleteBuildings=true) and self.isControlledByAI and numberOfUnitsInTeam(withTag="火炮塔I",withinRange=460,lessThan=3) and numberOfUnitsInEnemyTeam(withTag="对地",withinRange=345,lessThan=4) and self.hp>650
requireConditional:if numberOfUnitsInTeam(withTag="火炮塔I",incompleteBuildings=true,factoryQueue=true)<max(int((self.resource.AI阶段-10)*0.33),1) and numberOfUnitsInTeam(withTag="升级火炮",lessThan=1) and numberOfUnitsInEnemyTeam(withTag="激光防御塔",withinRange=345,lessThan=1,incompleteBuildings=true) and self.hasResources(AI阶段=3) and self.hasResources(credits=1800) and (numberOfUnitsInTeam(withTag="机枪塔I",withinRange=350)+numberOfUnitsInTeam(withTag="机枪塔II",withinRange=350))>=(numberOfUnitsInTeam(withTag="火炮塔I",withinRange=350)+numberOfUnitsInTeam(withTag="火炮塔II",withinRange=350))
temporarilyAddTags:升级火炮
alsoQueueAction:升级火炮
[hiddenAction_升级火炮]
convertTo:火炮T1
buildSpeed:41.6s
addResources:-1600
[hiddenAction_取消队列]
autoTrigger:if numberOfUnitsInEnemyTeam(withTag="炮塔I",withinRange=210,greaterThan=0,incompleteBuildings=true) and self.tags(includes="升级火炮")
requireConditional:if self.isControlledByAI and self.queueSize(greaterThan=0) and self.hp==700
deleteSelf:true
spawnUnits:炮塔T1
[hiddenAction_紧急机枪]
autoTrigger:if numberOfUnitsInEnemyTeam(withTag="建筑物",withinRange=185,greaterThan=0,incompleteBuildings=true) or numberOfUnitsInEnemyTeam(withTag="激光防御塔",withinRange=345,greaterThan=0,incompleteBuildings=true)
requireConditional:if self.isControlledByAI and self.queueSize(lessThan=1) and self.hasResources(AI阶段=2.5) and self.hasResources(credits=1000)
alsoQueueAction:升级机枪
addResources:-1000
[hiddenAction_升级机枪]
convertTo:机枪T1
buildSpeed:16.6s
[hiddenAction_喷火]
autoTrigger:true
requireConditional:if self.queueSize(lessThan=1) and self.isControlledByAI and numberOfUnitsInTeam(withTag="喷火塔I",lessThan=1,incompleteBuildings=true) and numberOfUnitsInTeam(withTag="升级火",lessThan=1) and self.hp<650 and self.hasResources(AI阶段=2.5)
temporarilyAddTags:升级火
alsoQueueAction:升级喷火
[hiddenAction_升级喷火]
convertTo:火焰喷射器
buildSpeed:8.3s
addResources:-700
[hiddenAction_电]
autoTrigger:if numberOfUnitsInEnemyTeam(withTag="建筑物",withinRange=210,greaterThan=0,incompleteBuildings=true) and numberOfUnitsInEnemyTeam(withTag="建筑物",withinRange=185,lessThan=1,incompleteBuildings=true) or numberOfUnitsInEnemyTeam(withTag="机枪",withinRange=666,greaterThan=0) and numberOfUnitsInTeam(withTag="闪电塔I",withinRange=512,incompleteBuildings=true,lessThan=1) and numberOfUnitsInTeam(withTag="升级电",lessThan=1)
temporarilyAddTags:升级电
requireConditional:if self.queueSize(lessThan=1) and self.isControlledByAI and self.hasResources(AI阶段=4) and self.hasResources(credits=4400)
alsoQueueAction:升级电
[hiddenAction_升级电]
convertTo:c_turret_t1_lightning
buildSpeed:29.0s
addResources:-2200
[action_upgrade_flame]
convertTo:火焰喷射器
price:700
text:T2-喷火器
description:-近距离范围攻击\n-血量更高\n-能自我修复
descriptionAddUnitStats:${section.convertTo}
displayType:Upgrade
buildSpeed:8.3s
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
ai_isDisabled:true
[action_upgrade_lightning]
convertTo:c_turret_t1_lightning
price:2200
text:i:gui.actions.upgradeToLightning
description:i:units.turret_lightning.description
descriptionAddUnitStats:${section.convertTo}
allowMultipleInQueue:false
displayType:Upgrade
buildSpeed:29.0s
isActive:if self.hasResources(AI阶段=10) and self.timeAlive(laterThanSeconds=60) and numberOfUnitsInTeam(withTag="闪电塔I",withinRange=512,incompleteBuildings=true,lessThan=1) or not self.isControlledByAI
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
[graphics]
total_frames:1
image:turret_base.png
image_wreak:turret_base_dead.png
image_turret:turret_top.png
image_shadow:NONE
shadowOffsetX:1
shadowOffsetY:1
[attack]
canAttack:true
canAttackFlyingUnits:false
canAttackLandUnits:true
canAttackUnderwaterUnits:false
turretSize:22
turretTurnSpeed:6
maxAttackRange:165
shootDelay:30
[turret_1]
x:0
y:6
shoot_sound:firing3
shoot_sound_vol:0.3
shoot_flame:small
shoot_light:#FFEECCCC
idleSweepAngle:20
idleSweepDelay:210
idleSweepSpeed:0.2
recoilOffset:-0.5
recoilOutTime:6
recoilReturnTime:12
[projectile_1]
directDamage:41
life:240
speed:6
frame:1