[core]
name:检测团战
tags:检测团战
autoTriggerCooldownTime_allowDangerousHighCPU:true
autoTriggerCooldownTime:0.01s
autoTriggerCheckRate:everyFrame
class:CustomUnitMetadata
copyFrom:ROOT:/机制/通用模版.ini
radius:1
isUnselectable:true
[graphics]
isVisible:false
[movement]
movementType:HOVER
moveSpeed:48
moveAccelerationSpeed:2
maxTurnSpeed:1.8
turnAcceleration:1.8
moveIgnoringBody:true
[hiddenAction_检测盟友位置]
autoTriggerOnEvent:created
addWaypoint_type:move
addWaypoint_target_nearestUnit_tagged:建筑物,建造
addWaypoint_target_nearestUnit_team:enemy
[hiddenAction_防线位]
autoTrigger:true
requireConditional:if self.numberOfUnitsInAllyNotOwnTeam(withTag="前排",lessThan=1) and self.numberOfUnitsInAllyNotOwnTeam(withTag="I",greaterThan=0) and not self.globalTeamTags(includes="防线") and self.tags(includes="前排")
temporarilyAddTags:防线
addGlobalTeamTags:防线
alsoTriggerAction:机械战法
[hiddenAction_机械战法]
requireConditional:if not self.globalTeamTags(includes="ai死路")
spawnUnits:机械战法
[hiddenAction_发育位]
requireConditional:if not numberOfUnitsInTeam(withTag="发育位",greaterThan=0) and not self.numberOfUnitsInAllyNotOwnTeam(withTag="发育位",greaterThan=0)
addGlobalTeamTags:后排,空军,对塔完毕
removeGlobalTeamTags:陆军
spawnUnits:发育位
[hiddenAction_发现盟友]
autoTrigger:true
requireConditional:if not self.tags(includes="后排") and not self.tags(includes="前排") and self.numberOfUnitsInAllyNotOwnTeam(withTag="I",withinRange=500,greaterThan=0) and self.numberOfUnitsInAllyNotOwnTeam(withTag="后排")<int(self.numberOfUnitsInAllyNotOwnTeam(withTag="I")*0.25)
temporarilyAddTags:后排
[hiddenAction_发现敌人]
requireConditional:if numberOfUnitsInEnemyTeam(withTag="检测团战",greaterThan=0,withinRange=500) and self.numberOfUnitsInAllyNotOwnTeam(withTag="前排")<int(self.numberOfUnitsInAllyNotOwnTeam(withTag="I")*0.75) or self.numberOfUnitsInAllyNotOwnTeam(withTag="后排")>=int(self.numberOfUnitsInAllyNotOwnTeam(withTag="I")*0.5)
autoTrigger:if not self.tags(includes="前排") and not self.tags(includes="后排")
alsoTriggerAction:防线位
temporarilyAddTags:前排
[hiddenAction_结算]
autoTrigger:if self.numberOfUnitsInAllyNotOwnTeam(withTag="前排")>=int(self.numberOfUnitsInAllyNotOwnTeam(withTag="I")*0.75) or self.timeAlive(laterThanSeconds=0.9)
requireConditional:if not self.tags(includes="前排") and not self.tags(includes="后排") and self.numberOfUnitsInAllyNotOwnTeam(withTag="后排")<=int(self.numberOfUnitsInAllyNotOwnTeam(withTag="I")*0.25)
temporarilyAddTags:后排
alsoTriggerAction:发育位
[hiddenAction_死亡]
autoTrigger:true
requireConditional:if self.timeAlive(laterThanSeconds=3)
deleteSelf:true