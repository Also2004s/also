[core]
name:天空资源点
autoTriggerCooldownTime:0.4s
autoTriggerCheckRate:every4Frames
class:CustomUnitMetadata
copyFrom:ROOT:/机制/通用模版.ini
radius:25
isUnselectable:true
disableAllUnitCollisions:true
[graphics]
isVisible:false
[movement]
movementType:AIR
targetHeight:0
moveSpeed:10
moveAccelerationSpeed:10
moveIgnoringBody:true
[hiddenAction_抵达]
autoTrigger:true
requireConditional:if numberOfUnitsInNeutralTeam(withTag="资源点",withinRange=10,lessThan=1) and not self.tags(includes="造抽取") and not self.isMoving 
clearAllWaypoints:true
addWaypoint_target_randomUnit_tagged:建造不可达
addWaypoint_type:move
addWaypoint_target_randomUnit_team:any
addWaypoint_triggerActionIfFailed:去资源点
[hiddenAction_去资源点]
clearAllWaypoints:true
addWaypoint_target_nearestUnit_tagged:资源点
addWaypoint_type:move
addWaypoint_target_nearestUnit_team:any
[hiddenAction_造抽取]
autoTrigger:true
requireConditional:if numberOfUnitsInNeutralTeam(withTag="资源点",greaterThan=0,withinRange=10)
temporarilyAddTags:造抽取
[hiddenAction_辅助建造]
autoTrigger:true
requireConditional:if numberOfUnitsInTeam(withTag="建造",withinRange=280)>0 and not self.tags(includes="辅助建造") and self.tags(includes="造抽取") and self.globalTeamTags(includes="对塔完毕")
temporarilyAddTags:辅助建造
[hiddenAction_建造]
autoTrigger:true
requireConditional:if numberOfUnitsInTeam(withTag="建造",withinRange=110)>0 and self.tags(includes="辅助建造")
fireTurretXAtGround:1
temporarilyAddTags:开始建造
[hiddenAction_消失]
autoTrigger:true
requireConditional:if numberOfUnitsInAllTeams(withTag="经济",greaterThan=0,withinRange=25,incompleteBuildings=true) or numberOfUnitsInEnemyTeam(withTag="对地",greaterThan=0,withinRange=310) and self.timeAlive(laterThanSeconds=3) or not self.isControlledByAI
deleteSelf:true
[turret_1]
x:0
y:0
[projectile_1]
directDamage:0
life:10
instant:true
explodeEffect:NONE
deflectionPower:-1
spawnUnit:人机造矿(skipIfOverlapping=true,gridAlign=true)