[core]
name:陆地资源点
autoTriggerCooldownTime:0.2s
autoTriggerCheckRate:every4Frames
class:CustomUnitMetadata
copyFrom:ROOT:/机制/通用模版.ini
radius:25
isUnselectable:true
disableAllUnitCollisions:true
@memory 初始位置:number[]
[graphics]
isVisible:false
[movement]
movementType:OVER_CLIFF
targetHeight:0
moveSpeed:12.5
moveAccelerationSpeed:13
maxTurnSpeed:12.5
turnAcceleration:12.5
moveIgnoringBody:true
[hiddenAction_寻找]
autoTriggerOnEvent:created
addWaypoint_target_nearestUnit_tagged:I
addWaypoint_target_nearestUnit_team:enemy
addWaypoint_type:move
setUnitMemory:初始位置[0]=self.x,初始位置[1]=self.y
[hiddenAction_抵达]
autoTrigger:if numberOfUnitsInNeutralTeam(withTag="资源点",withinRange=10,lessThan=1) and not self.tags(includes="可达资源")
requireConditional:if self.timeAlive(laterThanSeconds=2) or distance(self.x,self.y,memory.初始位置[0],memory.初始位置[1])>(select(game.mapHeight>=game.mapHeight,game.mapHeight,game.mapHeight)*0.2) or self.hasResources(时间=10)
clearAllWaypoints:true
addWaypoint_target_nearestUnit_tagged:中矿
addWaypoint_type:move
addWaypoint_target_nearestUnit_team:any
addWaypoint_triggerActionIfFailed:去外矿
[hiddenAction_去外矿]
addWaypoint_target_nearestUnit_tagged:外矿
addWaypoint_type:move
addWaypoint_target_nearestUnit_team:any
addWaypoint_triggerActionIfFailed:去资源点
[hiddenAction_去资源点]
addWaypoint_target_nearestUnit_tagged:资源点
addWaypoint_type:move
addWaypoint_target_nearestUnit_team:any
addWaypoint_triggerActionIfFailed:消失
[hiddenAction_造抽取]
autoTrigger:if numberOfUnitsInNeutralTeam(withTag="资源点",greaterThan=0,withinRange=10) and numberOfUnitsInAllTeams(withTag="建造不可达",withinRange=25,lessThan=1)
requireConditional:if (select(game.mapHeight>=game.mapHeight,game.mapHeight,game.mapHeight)*0.36)>(distance(self.x,self.y,memory.初始位置[0],memory.初始位置[1]))>(select(game.mapHeight>=game.mapHeight,game.mapHeight,game.mapHeight)*0.2) or self.hasResources(时间=10)
clearAllWaypoints:true
temporarilyAddTags:可达资源
[hiddenAction_辅助建造]
autoTrigger:true
requireConditional:if numberOfUnitsInTeam(withTag="建造",withinRange=280)>0 and not self.tags(includes="辅助建造") and self.tags(includes="可达资源") and self.globalTeamTags(includes="对塔完毕")
temporarilyAddTags:辅助建造
[hiddenAction_建造]
autoTrigger:true
requireConditional:if numberOfUnitsInTeam(withTag="建造",withinRange=110)>0 and self.tags(includes="辅助建造") and self.globalTeamTags(includes="对塔完毕")
fireTurretXAtGround:1
temporarilyAddTags:开始建造
[hiddenAction_消失]
autoTrigger:true
requireConditional:if numberOfUnitsInAllTeams(withTag="经济",greaterThan=0,withinRange=25) or numberOfUnitsInEnemyTeam(withTag="对地",withinRange=310)>(numberOfUnitsInTeam(withTag="激光防御塔",withinRange=160)) or numberOfUnitsInAllTeams(withTag="建造不可达",withinRange=25,greaterThan=0) and self.timeAlive(laterThanSeconds=2) or not self.isControlledByAI
deleteSelf:true
[turret_1]
x:0
y:0
[projectile_1]
directDamage:0
life:10
instant:true
explodeEffect:NONE
deflectionPower:-1
spawnUnit:人机造矿(skipIfOverlapping=true,gridAlign=true)